function dhtmlXWindowsSngl(){}
function dhtmlXWindowsBtn(){}
function dhtmlXWindows(){if(!dhtmlXContainer){alert("dhtmlxcontainer.js is missed on the page");return}
this.engine="dhx";var engineFunc="_"+this.engine+"_Engine";if(!this[engineFunc]){alert("No dhtmlxWindows engine was found.");return}else{this[engineFunc]()}
var that=this;this.pathPrefix="dhxwins_";this.imagePath=dhtmlx.image_path||"codebase/imgs/";this.setImagePath=function(path){this.imagePath=path};this.skin="dhx_skyblue";this.skinParams={"standard":{"header_height":32,"border_left_width":6,"border_right_width":7,"border_bottom_height":6},"aqua_dark":{"header_height":31,"border_left_width":3,"border_right_width":3,"border_bottom_height":3},"aqua_orange":{"header_height":31,"border_left_width":3,"border_right_width":3,"border_bottom_height":3},"aqua_sky":{"header_height":31,"border_left_width":3,"border_right_width":3,"border_bottom_height":3},"clear_blue":{"header_height":32,"border_left_width":6,"border_right_width":6,"border_bottom_height":6},"clear_green":{"header_height":32,"border_left_width":6,"border_right_width":6,"border_bottom_height":6},"clear_silver":{"header_height":32,"border_left_width":6,"border_right_width":6,"border_bottom_height":6},"glassy_blue":{"header_height":26,"border_left_width":4,"border_right_width":4,"border_bottom_height":4},"glassy_blue_light":{"header_height":26,"border_left_width":3,"border_right_width":3,"border_bottom_height":3},"glassy_caramel":{"header_height":26,"border_left_width":4,"border_right_width":4,"border_bottom_height":4},"glassy_greenapple":{"header_height":26,"border_left_width":4,"border_right_width":4,"border_bottom_height":4},"glassy_rainy":{"header_height":26,"border_left_width":4,"border_right_width":4,"border_bottom_height":4},"glassy_raspberries":{"header_height":26,"border_left_width":4,"border_right_width":4,"border_bottom_height":4},"glassy_yellow":{"header_height":26,"border_left_width":4,"border_right_width":4,"border_bottom_height":4},"modern_black":{"header_height":39,"border_left_width":2,"border_right_width":2,"border_bottom_height":2},"modern_blue":{"header_height":39,"border_left_width":2,"border_right_width":2,"border_bottom_height":2},"modern_red":{"header_height":39,"border_left_width":2,"border_right_width":2,"border_bottom_height":2},"web":{"header_height":21,"border_left_width":2,"border_right_width":2,"border_bottom_height":2},"vista_blue":{"header_height":28,"border_left_width":8,"border_right_width":8,"border_bottom_height":8},"dhx_black":{"header_height":21,"border_left_width":2,"border_right_width":2,"border_bottom_height":2},"dhx_blue":{"header_height":21,"border_left_width":2,"border_right_width":2,"border_bottom_height":2},"dhx_skyblue":{"header_height":29,"border_left_width":0,"border_right_width":0,"border_bottom_height":0}};this.setSkin=function(skin){this.skin=skin;this._engineRedrawSkin()};this.isWindow=function(id){var t=(this.wins[id]!=null);return t};this.findByText=function(text){var wins=[];for(var a in this.wins){if(this.wins[a].getText().search(text,"gi")>=0){wins[wins.length]=this.wins[a]}}
return wins};this.window=function(id){var win=null;if(this.wins[id]!=null){win=this.wins[id]}
return win};this.forEachWindow=function(handler){for(var a in this.wins){handler(this.wins[a])}};this.getBottommostWindow=function(){var bottommost=this.getTopmostWindow();for(var a in this.wins){if(this.wins[a].zi<bottommost.zi){bottommost=this.wins[a]}}
return(bottommost.zi!=0?bottommost:null)};this.getTopmostWindow=function(visibleOnly){var topmost={"zi":0};for(var a in this.wins){if(this.wins[a].zi>topmost.zi){if(visibleOnly==!0&&!this._isWindowHidden(this.wins[a])){topmost=this.wins[a]}
if(visibleOnly!=!0){topmost=this.wins[a]}}}
return(topmost.zi!=0?topmost:null)};this.wins={};for(var a in this.wins)delete this.wins[a];this.autoViewport=!0;this._createViewport=function(){this.vp=document.body;this.vp._css=(String(this.vp.className).length>0?this.vp.className:"");this.vp.className+=" dhtmlx_skin_"+this.skin+(this._r?" dhx_wins_rtl":"");this.modalCoverI=document.createElement("IFRAME");this.modalCoverI.frameBorder="0";this.modalCoverI.className="dhx_modal_cover_ifr";this.modalCoverI.setAttribute("src","javascript:false;");this.modalCoverI.style.display="none";this.modalCoverI.style.zIndex=0;this.vp.appendChild(this.modalCoverI);this.modalCoverD=document.createElement("DIV");this.modalCoverD.className="dhx_modal_cover_dv";this.modalCoverD.style.display="none";this.modalCoverD.style.zIndex=0;this.vp.appendChild(this.modalCoverD);this._vpcover=document.createElement("DIV");this._vpcover.className="dhx_content_vp_cover";this._vpcover.style.display="none";this.vp.appendChild(this._vpcover);this._carcass=document.createElement("DIV");this._carcass.className="dhx_carcass_resmove";this._carcass.style.display="none";if(_isIE){this._carcass.innerHTML="<iframe border=0 frameborder=0 style='filter: alpha(opacity=0); width: 100%; height:100%; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;'></iframe><div style='position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;'></div>";this._carcass.childNodes[0].setAttribute("src","javascript:false;")}
this._carcass.onselectstart=function(e){e=e||event;e.returnValue=!1};this.vp.appendChild(this._carcass)};this._autoResizeViewport=function(){for(var a in this.wins){if(this.wins[a]._isFullScreened){this.wins[a]._content.style.width=document.body.offsetWidth-(_isIE?4:0)+"px";if(document.body.offsetHeight==0){if(window.innerHeight){this.wins[a]._content.style.height=window.innerHeight+"px"}else{this.wins[a]._content.style.height=document.body.scrollHeight+"px"}}else{this.wins[a]._content.style.height=document.body.offsetHeight-(_isIE?4:0)+"px"}
if(this.wins[a].layout!=null&&_isOpera){this.wins[a].layout._fixCellsContentOpera950()}
this.wins[a].updateNestedObjects()}
if(this.wins[a]._isMaximized&&this.wins[a].style.display!="none"){this._restoreWindow(this.wins[a]);this._maximizeWindow(this.wins[a])}}
if(this.vp==document.body)return;if(this.autoViewport==!1)return;this.vp.style.width=(_isIE?document.body.offsetWidth-4:window.innerWidth)+"px";this.vp.style.height=(_isIE?document.body.offsetHeight-4:window.innerHeight)+"px";for(var a in this.wins){var win=this.wins[a];var overX=!1;var overY=!1;if(win.x>this.vp.offsetWidth-10){win.x=this.vp.offsetWidth-10;overX=!0}
var skinParams=(win._skinParams!=null?win._skinParams:this.skinParams[this.skin]);if(win.y+skinParams.header_height>this.vp.offsetHeight){win.y=this.vp.offsetHeight-skinParams.header_height;overY=!0}
if(overX||overY){this._engineRedrawWindowPos(win)}}};this.enableAutoViewport=function(state){if(this.vp!=document.body)return;this.autoViewport=state;if(state==!1){document.body.className=this.vp._css;this.vp=document.createElement("DIV");this.vp.autocreated=!0;this.vp.className="dhtmlx_winviewport dhtmlx_skin_"+this.skin+(this._r?" dhx_wins_rtl":"");this.vp.style.left="0px";this.vp.style.top="0px";document.body.appendChild(this.vp);this.vp.ax=0;this.vp.ay=0;this._autoResizeViewport();this.vp.appendChild(this.modalCoverI);this.vp.appendChild(this.modalCoverD);this.vp.appendChild(this._carcass)}};this.attachViewportTo=function(objId){if(this.autoViewport==!1){if(this.vp!=document.body){this.vp.parentNode.removeChild(this.vp)}
this.vp=document.getElementById(objId);this.vp.autocreated=!1;this.vp.className+=" dhtmlx_skin_"+this.skin+(this._r?" dhx_wins_rtl":"");this.vp.style.position="relative";this.vp.style.overflow="hidden";this.vp.ax=0;this.vp.ay=0;this.vp.appendChild(this.modalCoverI);this.vp.appendChild(this.modalCoverD);this.vp.appendChild(this._carcass)}};this.setViewport=function(x,y,width,height,parentObj){if(this.autoViewport==!1){this.vp.style.left=x+"px";this.vp.style.top=y+"px";this.vp.style.width=width+"px";this.vp.style.height=height+"px";if(parentObj!=null){parentObj.appendChild(this.vp)}
this.vp.ax=getAbsoluteLeft(this.vp);this.vp.ay=getAbsoluteTop(this.vp)}};this._effects={"move":!1,"resize":!1};this.setEffect=function(efName,efValue){if((this._effects[efName]!=null)&&(typeof(efValue)=="boolean")){this._effects[efName]=efValue}};this.getEffect=function(efName){return this._effects[efName]};this.createWindow=function(id,x,y,width,height){var win=document.createElement("DIV");win.className="dhtmlx_window_inactive";win.dir="ltr";win.zi=this.zIndexStep;win.style.zIndex=win.zi;win.states=arguments[5];win.active=!1;win._isWindow=!0;win.isWindow=!0;win.w=width;win.h=height;win.x=x;win.y=y;this._engineFixWindowPosInViewport(win);win._isModal=!1;win._allowResize=!0;win.maxW="auto";win.maxH="auto";win.minW=200;win.minH=140;win.iconsPresent=!0;win.icons=[this.imagePath+this.pathPrefix+this.skin+"/active/icon_normal.gif",this.imagePath+this.pathPrefix+this.skin+"/inactive/icon_normal.gif"];win._allowMove=!0;win._allowMoveGlobal=!0;win._allowResizeGlobal=!0;win._keepInViewport=!1;var skin=this.skinParams[this.skin];win.idd=id;this.vp.appendChild(win);this._engineSetWindowBody(win);this._engineRedrawWindowPos(win);this._engineRedrawWindowSize(win);this._engineUpdateWindowIcon(win,win.icons[0]);this._engineDiableOnSelectInWindow(win,!0);this.wins[id]=win;dhtmlxEventable(win);this._engineGetWindowHeader(win).onmousedown=function(e){var w=that.wins[this.idd];w.bringToTop();if(that._engineGetWindowHeaderState(w))return;e=e||event;if(!that._engineCheckHeaderMouseDown(w,e)){return}
if(!w._allowMove||!w._allowMoveGlobal){return}
w.oldMoveX=w.x;w.oldMoveY=w.y;w.moveOffsetX=w.x-e.clientX;w.moveOffsetY=w.y-e.clientY;that.movingWin=w;if(that._effects.move==!1){that._carcass.x=that.movingWin.x;that._carcass.y=that.movingWin.y;that._carcass.w=parseInt(that.movingWin.style.width)+(_isIE?0:-2);that._carcass.h=parseInt(that.movingWin.style.height)+(_isIE?0:-2);that._carcass.style.left=that._carcass.x+"px";that._carcass.style.top=that._carcass.y+"px";that._carcass.style.width=that._carcass.w+"px";that._carcass.style.height=that._carcass.h+"px";that._carcass.style.zIndex=that._getTopZIndex(!0)+1;that._carcass._keepInViewport=win._keepInViewport}
that._blockSwitcher(!0);that._vpcover.style.zIndex=that.movingWin.style.zIndex-1;that._vpcover.style.display="";e.returnValue=!1;e.cancelBubble=!0;w=null;return!1};this._engineGetWindowHeader(win).ondblclick=function(e){var w=that.wins[this.idd];if(!that._engineCheckHeaderMouseDown(w,e||event)){return}
if(w._allowResizeGlobal&&!w._isParked){if(w._isMaximized==!0){that._restoreWindow(w)}else{that._maximizeWindow(w)}}};win.setText=function(text){that._engineGetWindowLabel(this).innerHTML=text};win.getText=function(){return that._engineGetWindowLabel(this).innerHTML};win.getId=function(){return this.idd};win.showwin=function(){that._showWindow(this)},win.show=function(){that._showWindow(this)};win.hidewin=function(){that._hideWindow(this)};win.hide=function(){that._hideWindow(this)};win.minimize=function(){that._restoreWindow(this)};win.maximize=function(){that._maximizeWindow(this)};win.close=function(){that._closeWindow(this)};win.park=function(){if(this._isParkedAllowed){that._parkWindow(this)}};win.stick=function(){that._stickWindow(this)};win.unstick=function(){that._unstickWindow(this)};win.isSticked=function(){return this._isSticked};win.setIcon=function(iconEnabled,iconDisabled){that._setWindowIcon(win,iconEnabled,iconDisabled)};win.getIcon=function(){return that._getWindowIcon(this)};win.clearIcon=function(){that._clearWindowIcons(this)};win.restoreIcon=function(){that._restoreWindowIcons(this)};win.keepInViewport=function(state){this._keepInViewport=state};win.setModal=function(state){if(state==!0){if(that.modalWin!=null||that.modalWin==this)return;that._setWindowModal(this,!0)}else{if(that.modalWin!=this)return;that._setWindowModal(this,!1)}};win.isModal=function(){return this._isModal};win.isHidden=function(){return that._isWindowHidden(this)};win.isMaximized=function(){return this._isMaximized};win.isParked=function(){return this._isParked};win.allowPark=function(){that._allowParking(this)};win.denyPark=function(){that._denyParking(this)};win.isParkable=function(){return this._isParkedAllowed};win.allowResize=function(){that._allowReszieGlob(this)};win.denyResize=function(){that._denyResize(this)};win.isResizable=function(){return this._allowResizeGlobal};win.allowMove=function(){if(!this._isMaximized){this._allowMove=!0}
this._allowMoveGlobal=!0};win.denyMove=function(){this._allowMoveGlobal=!1};win.isMovable=function(){return this._allowMoveGlobal};win.bringToTop=function(val){that._bringOnTop(this,val);that._makeActive(this)};win.bringToBottom=function(){that._bringOnBottom(this)};win.isOnTop=function(){return that._isWindowOnTop(this)};win.isOnBottom=function(){return that._isWindowOnBottom(this)};win.setPosition=function(x,y){this.x=x;this.y=y;that._engineFixWindowPosInViewport(this);that._engineRedrawWindowPos(this)};win.getPosition=function(){return[this.x,this.y]};win.setDimension=function(width,height){if(width!=null){this.w=width}
if(height!=null){this.h=height}
that._fixWindowDimensionInViewport(this);that._engineFixWindowPosInViewport(this);that._engineRedrawWindowSize(this);this.updateNestedObjects()};win.getDimension=function(){return[this.w,this.h]};win.setMaxDimension=function(maxWidth,maxHeight){this.minW="auto";this.minH="auto";that._engineRedrawWindowSize(this)};win.getMaxDimension=function(){return[this.maxW,this.maxH]};win.setMinDimension=function(minWidth,minHeight){if(minWidth!=null){this.minW=minWidth}
if(minHeight!=null){this.minH=minHeight}
that._fixWindowDimensionInViewport(this);that._engineRedrawWindowPos(this)};win.getMinDimension=function(){return[this.minW,this.minH]};win._adjustToContent=function(cw,ch){that._engineAdjustWindowToContent(this,cw,ch)};win._doOnAttachMenu=function(){that._engineRedrawWindowSize(this);this.updateNestedObjects()};win._doOnAttachToolbar=function(){that._engineRedrawWindowSize(this);this.updateNestedObjects()};win._doOnAttachStatusBar=function(){that._engineRedrawWindowSize(this);this.updateNestedObjects()};win._doOnAttachURL=function(addIFrameEvents){if(!addIFrameEvents){that.callEvent("onContentLoaded",[this]);return}
if(_isIE){var w=this;var f=this._frame;f.onreadystatechange=function(a){if(f.readyState=="complete"){try{f.contentWindow.document.body.onmousedown=function(){try{w.bringToTop()}catch(e){}}}catch(e){}
try{that.callEvent("onContentLoaded",[w])}catch(e){}}}}else{var w=this;var f=this._frame;f.onload=function(){try{f.contentWindow.onmousedown=function(){try{w.bringToTop()}catch(e){}}}catch(e){}
that.callEvent("onContentLoaded",[w])}}};win.addUserButton=function(id,pos,title,label){var userBtn=that._addUserButton(this,id,pos,title,label);return userBtn};win.removeUserButton=function(id){if(!((id=="minmax1")||(id=="minmax2")||(id=="park")||(id=="close")||(id=="stick")||(id=="unstick")||(id=="help"))){if(btn!=null){that._removeUserButton(this,id)}}};win.progressOn=function(){that._engineSwitchWindowProgress(this,!0)};win.progressOff=function(){that._engineSwitchWindowProgress(this,!1)};win.setToFullScreen=function(state){that._setWindowToFullScreen(this,state)};win.showHeader=function(){that._engineSwitchWindowHeader(this,!0)};win.hideHeader=function(){that._engineSwitchWindowHeader(this,!1)};win.progressOff();win.canStartResize=!1;win.onmousemove=function(e){e=e||event;var targetObj=e.target||e.srcElement;if((!this._allowResize)||(this._allowResizeGlobal==!1)){if(targetObj.style.cursor!="")targetObj.style.cursor="";if(this.style.cursor!="")this.style.cursor="";this.canStartResize=!1;return!1}
if(that.resizingWin!=null)return;if(that.movingWin!=null)return;if(this._isParked)return;var px=(_isIE||_isOpera?e.offsetX:e.layerX);var py=(_isIE||_isOpera?e.offsetY:e.layerY);var resDir=that._engineAllowWindowResize(win,targetObj,px,py);if(resDir==null){this.canStartResize=!1;this.style.cursor="";return}
that.resizingDirs=resDir;switch(that.resizingDirs){case "border_left":targetObj.style.cursor="w-resize";this.resizeOffsetX=this.x-e.clientX;break;case "border_right":targetObj.style.cursor="e-resize";this.resizeOffsetXW=this.x+this.w-e.clientX;break;case "border_top":targetObj.style.cursor="n-resize";this.resizeOffsetY=this.y-e.clientY;break;case "border_bottom":targetObj.style.cursor="n-resize";this.resizeOffsetYH=this.y+this.h-e.clientY;break;case "corner_left":targetObj.style.cursor="sw-resize";this.resizeOffsetX=this.x-e.clientX;this.resizeOffsetYH=this.y+this.h-e.clientY;break;case "corner_up_left":targetObj.style.cursor="nw-resize";this.resizeOffsetY=this.y-e.clientY;this.resizeOffsetX=this.x-e.clientX;break;case "corner_right":targetObj.style.cursor="nw-resize";this.resizeOffsetXW=this.x+this.w-e.clientX;this.resizeOffsetYH=this.y+this.h-e.clientY;break;case "corner_up_right":targetObj.style.cursor="sw-resize";this.resizeOffsetY=this.y-e.clientY;this.resizeOffsetXW=this.x+this.w-e.clientX;break}
this.canStartResize=!0;this.style.cursor=targetObj.style.cursor;return!1};win.onmousedown=function(e){that._makeActive(this);that._bringOnTop(this);if(this.canStartResize){that._blockSwitcher(!0);that.resizingWin=this;if(!that._effects.resize){that._carcass.x=that.resizingWin.x;that._carcass.y=that.resizingWin.y;that._carcass.w=that.resizingWin.w+(_isIE?0:-2);that._carcass.h=that.resizingWin.h+(_isIE?0:-2);that._carcass.style.left=that._carcass.x+"px";that._carcass.style.top=that._carcass.y+"px";that._carcass.style.width=that._carcass.w+"px";that._carcass.style.height=that._carcass.h+"px";that._carcass.style.zIndex=that._getTopZIndex(!0)+1;that._carcass.style.cursor=this.style.cursor;that._carcass._keepInViewport=this._keepInViewport;that._carcass.style.display=""}
that._vpcover.style.zIndex=that.resizingWin.style.zIndex-1;that._vpcover.style.display="";if(this.layout){this.callEvent("_onBeforeTryResize",[this])}
e=e||event;e.returnValue=!1;e.cancelBubble=!0;return!1}};this._addDefaultButtons(win);win.button=function(id){var b=null;if(this.btns[id]!=null){b=this.btns[id]}
return b};win.center=function(){that._centerWindow(this,!1)};win.centerOnScreen=function(){that._centerWindow(this,!0)};win._attachContent("empty",null);win._redraw=function(){that._engineRedrawWindowSize(this)};win.bringToTop();this._engineRedrawWindowSize(win);return this.wins[id]};this.zIndexStep=2;this._getTopZIndex=function(ignoreSticked){var topZIndex=0;for(var a in this.wins){if(ignoreSticked==!0){if(this.wins[a].zi>topZIndex){topZIndex=this.wins[a].zi}}else{if(this.wins[a].zi>topZIndex&&!this.wins[a]._isSticked){topZIndex=this.wins[a].zi}}}
return topZIndex};this.movingWin=null;this._moveWindow=function(e){if(this.movingWin!=null){if(!this.movingWin._allowMove||!this.movingWin._allowMoveGlobal){return}
if(this._effects.move==!0){if(this._engineGetWindowHeader(this.movingWin).style.cursor!="move"){this._engineGetWindowHeader(this.movingWin).style.cursor="move"}
this.movingWin.oldMoveX=this.movingWin.x;this.movingWin.oldMoveY=this.movingWin.y;this.movingWin.x=e.clientX+this.movingWin.moveOffsetX;this.movingWin.y=e.clientY+this.movingWin.moveOffsetY;this._engineFixWindowPosInViewport(this.movingWin);this._engineRedrawWindowPos(this.movingWin)}else{if(this._carcass.style.display!=""){this._carcass.style.display=""}
if(this._carcass.style.cursor!="move"){this._carcass.style.cursor="move"}
if(this._engineGetWindowHeader(this.movingWin).style.cursor!="move"){this._engineGetWindowHeader(this.movingWin).style.cursor="move"}
this._carcass.x=e.clientX+this.movingWin.moveOffsetX;this._carcass.y=e.clientY+this.movingWin.moveOffsetY;this._engineFixWindowPosInViewport(this._carcass);this._carcass.style.left=this._carcass.x+"px";this._carcass.style.top=this._carcass.y+"px"}}
if(this.resizingWin!=null){if(!this.resizingWin._allowResize){return}
if(this.resizingDirs=="border_left"||this.resizingDirs=="corner_left"||this.resizingDirs=="corner_up_left"){if(this._effects.resize){var ofs=e.clientX+this.resizingWin.resizeOffsetX;var sign=(ofs>this.resizingWin.x?-1:1);newW=this.resizingWin.w+Math.abs(ofs-this.resizingWin.x)*sign;if((newW<this.resizingWin.minW)&&(sign<0)){this.resizingWin.x=this.resizingWin.x+this.resizingWin.w-this.resizingWin.minW;this.resizingWin.w=this.resizingWin.minW}else{this.resizingWin.w=newW;this.resizingWin.x=ofs}
this._engineRedrawWindowPos(this.resizingWin);this._engineRedrawWindowSize(this.resizingWin)}else{var ofs=e.clientX+this.resizingWin.resizeOffsetX;var sign=(ofs>this._carcass.x?-1:1);newW=this._carcass.w+Math.abs(ofs-this._carcass.x)*sign;if((newW<this.resizingWin.minW)&&(sign<0)){this._carcass.x=this._carcass.x+this._carcass.w-this.resizingWin.minW;this._carcass.w=this.resizingWin.minW}else{this._carcass.w=newW;this._carcass.x=ofs}
this._carcass.style.left=this._carcass.x+"px";this._carcass.style.width=this._carcass.w+"px"}}
if(this.resizingDirs=="border_right"||this.resizingDirs=="corner_right"||this.resizingDirs=="corner_up_right"){if(this._effects.resize){var ofs=e.clientX-(this.resizingWin.x+this.resizingWin.w)+this.resizingWin.resizeOffsetXW;newW=this.resizingWin.w+ofs;if(newW<this.resizingWin.minW){newW=this.resizingWin.minW}
this.resizingWin.w=newW;this._engineRedrawWindowPos(this.resizingWin);this._engineRedrawWindowSize(this.resizingWin)}else{var ofs=e.clientX-(this._carcass.x+this._carcass.w)+this.resizingWin.resizeOffsetXW;newW=this._carcass.w+ofs;if(newW<this.resizingWin.minW){newW=this.resizingWin.minW}
this._carcass.w=newW;this._carcass.style.width=this._carcass.w+"px"}}
if(this.resizingDirs=="border_bottom"||this.resizingDirs=="corner_left"||this.resizingDirs=="corner_right"){if(this._effects.resize){var ofs=e.clientY-(this.resizingWin.y+this.resizingWin.h)+this.resizingWin.resizeOffsetYH;newH=this.resizingWin.h+ofs;if(newH<this.resizingWin.minH){newH=this.resizingWin.minH}
this.resizingWin.h=newH;this._engineRedrawWindowPos(this.resizingWin);this._engineRedrawWindowSize(this.resizingWin)}else{var ofs=e.clientY-(this._carcass.y+this._carcass.h)+this.resizingWin.resizeOffsetYH;newH=this._carcass.h+ofs;if(newH<this.resizingWin.minH){newH=this.resizingWin.minH}
this._carcass.h=newH;this._carcass.style.height=this._carcass.h+"px"}}
if(this.resizingDirs=="border_top"||this.resizingDirs=="corner_up_right"||this.resizingDirs=="corner_up_left"){if(this._effects.resize){}else{var ofs=e.clientY+this.resizingWin.resizeOffsetY;var sign=(ofs>this.resizingWin.y?-1:1);newH=this.resizingWin.h+Math.abs(ofs-this.resizingWin.y)*sign;if((newH<this.resizingWin.minH)&&(sign<0)){this._carcass.y=this._carcass.y+this._carcass.h-this.resizingWin.minH;this._carcass.h=this.resizingWin.minH}else{this._carcass.h=newH+(_isIE?0:-2);this._carcass.y=ofs}
this._carcass.style.top=this._carcass.y+"px";this._carcass.style.height=this._carcass.h+"px"}}}};this._stopMove=function(){if(this.movingWin!=null){if(this._effects.move){var win=this.movingWin;this.movingWin=null;this._blockSwitcher(!1);this._engineGetWindowHeader(win).style.cursor="";if(_isFF){win.h++;that._engineRedrawWindowPos(win);win.h--;that._engineRedrawWindowPos(win)}}else{this._carcass.style.cursor="";this._carcass.style.display="none";var win=this.movingWin;this._engineGetWindowHeader(win).style.cursor="";this.movingWin=null;this._blockSwitcher(!1);win.setPosition(parseInt(this._carcass.style.left),parseInt(this._carcass.style.top))}
this._vpcover.style.display="none";if(!(win.oldMoveX==win.x&&win.oldMoveY==win.y)){if(win.checkEvent("onMoveFinish")){win.callEvent("onMoveFinish",[win])}else{this.callEvent("onMoveFinish",[win])}}}
if(this.resizingWin!=null){var win=this.resizingWin;this.resizingWin=null;this._blockSwitcher(!1);if(!this._effects.resize){this._carcass.style.display="none";win.setPosition(this._carcass.x,this._carcass.y);win.setDimension(this._carcass.w+(_isIE?0:2),this._carcass.h+(_isIE?0:2))}else{win.updateNestedObjects()}
if(win.layout){win.layout.callEvent("onResize",[])}
this._vpcover.style.display="none";if(win.checkEvent("onResizeFinish")){win.callEvent("onResizeFinish",[win])}else{this.callEvent("onResizeFinish",[win])}}};this._fixWindowDimensionInViewport=function(win){if(win.w<win.minW){win.w=win.minW}
if(win._isParked)return;if(win.h<win.minH){win.h=win.minH}};this._bringOnTop=function(win,val){var cZIndex=win.zi;if(!val){if(this.tzi&&!(win.tzi)){topZIndex=this.tzi;this.tzi=null}else{if(win.tzi){topZIndex=win.tzi}else{var topZIndex=this._getTopZIndex(win._isSticked)}}}else{topZIndex=val;win.tzi=val;this.tzi=this._getTopZIndex(win._isSticked)}
for(var a in this.wins){if(this.wins[a]!=win){if(win._isSticked||(!win._isSticked&&!this.wins[a]._isSticked)){if(this.wins[a].zi>cZIndex){this.wins[a].zi=this.wins[a].zi-this.zIndexStep;this.wins[a].style.zIndex=this.wins[a].zi}}}}
win.zi=topZIndex;win.style.zIndex=win.zi};this._makeActive=function(win,ignoreFocusEvent){for(var a in this.wins){if(this.wins[a]==win){var needEvent=!1;if(this.wins[a].className!="dhtmlx_window_active"&&!ignoreFocusEvent){needEvent=!0}
this.wins[a].className="dhtmlx_window_active";this._engineUpdateWindowIcon(this.wins[a],this.wins[a].icons[0]);if(needEvent==!0){if(win.checkEvent("onFocus")){win.callEvent("onFocus",[win])}else{this.callEvent("onFocus",[win])}}}else{this.wins[a].className="dhtmlx_window_inactive";this._engineUpdateWindowIcon(this.wins[a],this.wins[a].icons[1])}}};this._getActive=function(){var win=null;for(var a in this.wins){if(this.wins[a].className=="dhtmlx_window_active"){win=this.wins[a]}}
return win};this._get_page_size=function(){var xScroll,yScroll;if(window.innerHeight&&window.scrollMaxY){xScroll=window.innerWidth+window.scrollMaxX;yScroll=window.innerHeight+window.scrollMaxY}else if(document.body.scrollHeight>document.body.offsetHeight){xScroll=document.body.scrollWidth;yScroll=document.body.scrollHeight}else{xScroll=document.body.offsetWidth;yScroll=document.body.offsetHeight}
var windowWidth,windowHeight;if(self.innerHeight){if(document.documentElement.clientWidth){windowWidth=document.documentElement.clientWidth}else{windowWidth=self.innerWidth}
windowHeight=self.innerHeight}else if(document.documentElement&&document.documentElement.clientHeight){windowWidth=document.documentElement.clientWidth;windowHeight=document.documentElement.clientHeight}else if(document.body){windowWidth=document.body.clientWidth;windowHeight=document.body.clientHeight}
if(yScroll<windowHeight){pageHeight=windowHeight}else{pageHeight=yScroll}
if(xScroll<windowWidth){pageWidth=xScroll}else{pageWidth=windowWidth}
return[pageWidth,pageHeight]};this._centerWindow=function(win,onScreen){if(win._isMaximized==!0){return}
if(win._isParked==!0){return}
if(onScreen==!0){var vpw=(_isIE?document.body.offsetWidth:window.innerWidth);var vph=(_isIE?document.body.offsetHeight:window.innerHeight)}else{var vpw=(this.vp==document.body?document.body.offsetWidth:(Number(parseInt(this.vp.style.width))&&String(this.vp.style.width).search("%")==-1?parseInt(this.vp.style.width):this.vp.offsetWidth));var vph=(this.vp==document.body?document.body.offsetHeight:(Number(parseInt(this.vp.style.height))&&String(this.vp.style.height).search("%")==-1?parseInt(this.vp.style.height):this.vp.offsetHeight))}
var newX=Math.round((vpw/2)-(win.w/2));var newY=Math.round((vph/2)-(win.h/2));win.x=newX;if(onScreen==!0){win.y=newY+window.pageYOffset}else{win.y=newY}
this._engineFixWindowPosInViewport(win);this._engineRedrawWindowPos(win)};this._addDefaultButtons=function(win){var btnStick=this._engineGetWindowButton(win,"stick");btnStick.title="Stick";btnStick.isVisible=!1;btnStick.style.display="none";btnStick._isEnabled=!0;btnStick.isPressed=!1;btnStick.label="stick";btnStick._doOnClick=function(){this.isPressed=!0;that._stickWindow(win)};var btnSticked=this._engineGetWindowButton(win,"sticked");btnSticked.title="Unstick";btnSticked.isVisible=!1;btnSticked.style.display="none";btnSticked._isEnabled=!0;btnSticked.isPressed=!1;btnSticked.label="sticked";btnSticked._doOnClick=function(){this.isPressed=!1;that._unstickWindow(win)};var btnHelp=this._engineGetWindowButton(win,"help");btnHelp.title="Help";btnHelp.isVisible=!1;btnHelp.style.display="none";btnHelp._isEnabled=!0;btnHelp.isPressed=!1;btnHelp.label="help";btnHelp._doOnClick=function(){that._needHelp(win)};var btnPark=this._engineGetWindowButton(win,"park");btnPark.titleIfParked="Park Down";btnPark.titleIfNotParked="Park Up";btnPark.title=btnPark.titleIfNotParked;btnPark.isVisible=!0;btnPark._isEnabled=!0;btnPark.isPressed=!1;btnPark.label="park";btnPark._doOnClick=function(){that._parkWindow(win)};var btnMinMax1=this._engineGetWindowButton(win,"minmax1");btnMinMax1.title="Maximize";btnMinMax1.isVisible=!1;btnMinMax1._isEnabled=!1;btnMinMax1.style.display="none";btnMinMax1.isPressed=!1;btnMinMax1.label="minmax1";btnMinMax1._doOnClick=function(){that._maximizeWindow(win)};var btnMinMax2=this._engineGetWindowButton(win,"minmax2");btnMinMax2.title="Restore";btnMinMax2.isVisible=!1;btnMinMax2.style.display="none";btnMinMax2._isEnabled=!1;btnMinMax2.isPressed=!1;btnMinMax2.label="minmax2";btnMinMax2._doOnClick=function(){that._restoreWindow(win)};var btnClose=this._engineGetWindowButton(win,"close");btnClose.title="Close";btnClose.isVisible=!0;btnClose._isEnabled=!0;btnClose.isPressed=!1;btnClose.label="close";if(!win.states){btnClose._doOnClick=function(){that._closeWindow(win)}}else{btnClose._doOnClick=function(){that._hideWindow(win)}}
var btnDock=this._engineGetWindowButton(win,"dock");btnDock.title="Dock";btnDock.style.display="none";btnDock.isVisible=!1;btnDock._isEnabled=!0;btnDock.isPressed=!1;btnDock.label="dock";btnDock._doOnClick=function(){};win._isSticked=!1;win._isParked=!1;win._isParkedAllowed=!0;win._isMaximized=!1;win._isDocked=!1;win.btns={};win.btns.stick=btnStick;win.btns.sticked=btnSticked;win.btns.help=btnHelp;win.btns.park=btnPark;win.btns.minmax1=btnMinMax1;win.btns.minmax2=btnMinMax2;win.btns.close=btnClose;win.btns.dock=btnDock;for(var a in win.btns){this._attachEventsOnButton(win,win.btns[a])}};this._attachEventsOnButton=function(win,btn){btn.onmouseover=function(){if(this._isEnabled){this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_over_"+(this.isPressed?"pressed":"default")}else{this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_disabled"}};btn.onmouseout=function(){if(this._isEnabled){this.isPressed=!1;this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_default"}else{this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_disabled"}};btn.onmousedown=function(){if(this._isEnabled){this.isPressed=!0;this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_over_pressed"}else{this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_disabled"}};btn.onmouseup=function(){if(this._isEnabled){var wasPressed=this.isPressed;this.isPressed=!1;this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_over_default";if(wasPressed){if(this.checkEvent("onClick")){this.callEvent("onClick",[win,this])}else{this._doOnClick()}}}else{this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_disabled"}};btn.show=function(){that._showButton(win,this.label)};btn.hide=function(){that._hideButton(win,this.label)};btn.enable=function(){that._enableButton(win,this.label)};btn.disable=function(){that._disableButton(win,this.label)};btn.isEnabled=function(){return this._isEnabled};btn.isHidden=function(){return(!this.isVisible)};dhtmlxEventable(btn)};this._parkWindow=function(win,parkBeforeMinMax){if(!win._isParkedAllowed)return;if(this.enableParkEffect&&win.parkBusy)return;if(win._isParked){if(this.enableParkEffect&&!parkBeforeMinMax){win.parkBusy=!0;this._doParkDown(win)}else{win.h=win.lastParkH;this._engineRedrawWindowSize(win);this._engineDoOnWindowParkDown(win);win.updateNestedObjects();win.btns.park.title=win.btns.park.titleIfNotParked;if(win._allowResizeGlobal==!0){this._enableButton(win,"minmax1");this._enableButton(win,"minmax2")}
win._isParked=!1;if(!parkBeforeMinMax)if(win.checkEvent("onParkDown"))win.callEvent("onParkDown",[win]);else this.callEvent("onParkDown",[win])}}else{if(this.enableParkEffect&&!parkBeforeMinMax){win.lastParkH=(String(win.h).search(/\%$/)==-1?win.h:win.offsetHeight);if(win._allowResizeGlobal==!0){this._disableButton(win,"minmax1");this._disableButton(win,"minmax2")}
if(this.enableParkEffect){win.parkBusy=!0;this._doParkUp(win)}else{var skinParams=(win._skinParams!=null?win._skinParams:this.skinParams[this.skin]);win.h=skinParams.header_height+skinParams.border_bottom_height;win.btns.park.title=win.btns.park.titleIfParked}}else{win.lastParkH=(String(win.h).search(/\%$/)==-1?win.h:win.offsetHeight);win.h=this._engineGetWindowParkedHeight(win);this._engineRedrawWindowSize(win);this._engineDoOnWindowParkUp(win);win.btns.park.title=win.btns.park.titleIfParked;win._isParked=!0;if(!parkBeforeMinMax)if(win.checkEvent("onParkUp"))win.callEvent("onParkUp",[win]);else this.callEvent("onParkUp",[win])}}};this._allowParking=function(win){win._isParkedAllowed=!0;this._enableButton(win,"park")};this._denyParking=function(win){win._isParkedAllowed=!1;this._disableButton(win,"park")};this.enableParkEffect=!1;this.parkStartSpeed=80;this.parkSpeed=this.parkStartSpeed;this.parkTM=null;this.parkTMTime=5;this._doParkUp=function(win){if(String(win.h).search(/\%$/)!=-1){win.h=win.offsetHeight}
win.h-=this.parkSpeed;var hh=this._engineGetWindowParkedHeight(win);if(win.h<=hh){win.h=hh;this._engineGetWindowButton(win,"park").title=this._engineGetWindowButton(win,"park").titleIfParked;win._isParked=!0;win.parkBusy=!1;this._engineRedrawWindowSize(win);this._engineDoOnWindowParkUp(win);if(win.checkEvent("onParkUp"))win.callEvent("onParkUp",[win]);else this.callEvent("onParkUp",[win])}else{this._engineRedrawWindowSize(win);this.parkTM=window.setTimeout(function(){that._doParkUp(win)},this.parkTMTime)}};this._doParkDown=function(win){win.h+=this.parkSpeed;if(win.h>=win.lastParkH){win.h=win.lastParkH;this._engineGetWindowButton(win,"park").title=this._engineGetWindowButton(win,"park").titleIfNotParked;if(win._allowResizeGlobal==!0){this._enableButton(win,"minmax1");this._enableButton(win,"minmax2")}
win._isParked=!1;win.parkBusy=!1;this._engineRedrawWindowSize(win);win.updateNestedObjects();this._engineDoOnWindowParkDown(win);if(win.checkEvent("onParkDown"))win.callEvent("onParkDown",[win]);else this.callEvent("onParkDown",[win])}else{this._engineRedrawWindowSize(win);this.parkTM=window.setTimeout(function(){that._doParkDown(win)},this.parkTMTime)}};this._enableButton=function(win,btn){var button=this._engineGetWindowButton(win,btn);if(!button)return;button._isEnabled=!0;button.className="dhtmlx_wins_btns_button dhtmlx_button_"+button.label+"_default"};this._disableButton=function(win,btn){var button=this._engineGetWindowButton(win,btn);if(!button)return;button._isEnabled=!1;button.className="dhtmlx_wins_btns_button dhtmlx_button_"+win.btns[btn].label+"_disabled"};this._allowReszieGlob=function(win){win._allowResizeGlobal=!0;this._enableButton(win,"minmax1");this._enableButton(win,"minmax2")};this._denyResize=function(win){win._allowResizeGlobal=!1;this._disableButton(win,"minmax1");this._disableButton(win,"minmax2")};this._maximizeWindow=function(win){if(win._allowResizeGlobal==!1)return;var isParkedBeforeMinMax=win._isParked;if(isParkedBeforeMinMax)this._parkWindow(win,!0);win.lastMaximizeX=win.x;win.lastMaximizeY=win.y;win.lastMaximizeW=win.w;win.lastMaximizeH=win.h;win.x=0;win.y=0;win._isMaximized=!0;win._allowMove=!1;win._allowResize=!1;win.w=(win.maxW=="auto"?(this.vp==document.body?"100%":(this.vp.style.width!=""&&String(this.vp.style.width).search("%")==-1?parseInt(this.vp.style.width):this.vp.offsetWidth)):win.maxW);win.h=(win.maxH=="auto"?(this.vp==document.body?"100%":(this.vp.style.height!=""&&String(this.vp.style.width).search("%")==-1?parseInt(this.vp.style.height):this.vp.offsetHeight)):win.maxH);this._hideButton(win,"minmax1");this._showButton(win,"minmax2");this._engineRedrawWindowPos(win);if(isParkedBeforeMinMax){this._parkWindow(win,!0)}else{this._engineRedrawWindowSize(win);win.updateNestedObjects()}
if(win.checkEvent("onMaximize"))win.callEvent("onMaximize",[win]);else this.callEvent("onMaximize",[win])};this._restoreWindow=function(win){if(win._allowResizeGlobal==!1)return;if(win.layout)win.layout._defineWindowMinDimension(win);var isParkedBeforeMinMax=win._isParked;if(isParkedBeforeMinMax)this._parkWindow(win,!0);win.x=win.lastMaximizeX;win.y=win.lastMaximizeY;win.w=win.lastMaximizeW;win.h=win.lastMaximizeH;win._isMaximized=!1;win._allowMove=win._allowMoveGlobal;win._allowResize=!0;this._fixWindowDimensionInViewport(win);this._hideButton(win,"minmax2");this._showButton(win,"minmax1");this._engineRedrawWindowPos(win);if(isParkedBeforeMinMax){this._parkWindow(win,!0)}else{this._engineRedrawWindowSize(win);win.updateNestedObjects()}
if(win.checkEvent("onMinimize"))win.callEvent("onMinimize",[win]);else this.callEvent("onMinimize",[win])};this._showButton=function(win,btn){var button=this._engineGetWindowButton(win,btn);if(!button)return;button.isVisible=!0;button.style.display="";this._engineRedrawWindowTitle(win)};this._hideButton=function(win,btn){var button=this._engineGetWindowButton(win,btn);if(!button)return;button.isVisible=!1;button.style.display="none";this._engineRedrawWindowTitle(win)};this._showWindow=function(win){win.style.display="";if(win.checkEvent("onShow")){win.callEvent("onShow",[win])}else{this.callEvent("onShow",[win])}
var w=this._getActive();if(w==null){this._bringOnTop(win);this._makeActive(win)}else if(this._isWindowHidden(w)){this._bringOnTop(win);this._makeActive(win)}};this._hideWindow=function(win){win.style.display="none";this._setWindowModal(win,!1);if(win.checkEvent("onHide")){win.callEvent("onHide",[win])}else{this.callEvent("onHide",[win])}
var w=this.getTopmostWindow(!0);if(w!=null){this._bringOnTop(w);this._makeActive(w)}};this._isWindowHidden=function(win){var isHidden=(win.style.display=="none");return isHidden};this._closeWindow=function(win){if(win.isModal){this._setWindowModal(win,!1)}
if(win.checkEvent("onClose")){if(!win.callEvent("onClose",[win]))return}else{if(!this.callEvent("onClose",[win]))return}
this._removeWindowGlobal(win);var latest={"zi":0};for(var a in this.wins){if(this.wins[a].zi>latest.zi){latest=this.wins[a]}}
if(latest!=null){this._makeActive(latest)}};this._needHelp=function(win){if(win.checkEvent("onHelp")){win.callEvent("onHelp",[win])}else{this.callEvent("onHelp",[win])}};this._setWindowIcon=function(win,iconEnabled,iconDisabled){win.iconsPresent=!0;win.icons[0]=this.imagePath+iconEnabled;win.icons[1]=this.imagePath+iconDisabled;this._engineUpdateWindowIcon(win,win.icons[win.isOnTop()?0:1])};this._getWindowIcon=function(win){if(win.iconsPresent){return[win.icons[0],win.icons[1]]}else{return[null,null]}};this._clearWindowIcons=function(win){win.iconsPresent=!1;win.icons[0]=this.imagePath+this.pathPrefix+this.skin+"/active/icon_blank.gif";win.icons[1]=this.imagePath+this.pathPrefix+this.skin+"/inactive/icon_blank.gif";this._engineUpdateWindowIcon(win,win.icons[win.isOnTop()?0:1])};this._restoreWindowIcons=function(win){win.iconsPresent=!0;win.icons[0]=this.imagePath+this.pathPrefix+this.skin+"/active/icon_normal.gif";win.icons[1]=this.imagePath+this.pathPrefix+this.skin+"/inactive/icon_normal.gif";this._engineUpdateWindowIcon(win,win.icons[win.className=="dhtmlx_window_active"?0:1])};this._attachWindowContentTo=function(win,obj,w,h){var data=this._engineGetWindowContent(win).parentNode;data.parentNode.removeChild(data);win.hide();data.style.left="0px";data.style.top="0px";data.style.width=(w!=null?w:obj.offsetWidth)+"px";data.style.height=(h!=null?h:obj.offsetHeight)+"px";data.style.position="relative";obj.appendChild(data);this._engineGetWindowContent(win).style.width=data.style.width;this._engineGetWindowContent(win).style.height=data.style.height};this._setWindowToFullScreen=function(win,state){if(state==!0){var data=win._content;data.parentNode.removeChild(data);win.hide();win._isFullScreened=!0;data.style.left="0px";data.style.top="0px";data.style.width=document.body.offsetWidth-(_isIE?4:0)+"px";if(document.body.offsetHeight==0){if(window.innerHeight){data.style.height=window.innerHeight+"px"}else{data.style.height=document.body.scrollHeight+"px"}}else{data.style.height=document.body.offsetHeight-(_isIE?4:0)+"px"}
data.style.position="absolute";document.body.appendChild(data)}else if(state==!1){var data=win.childNodes[0].childNodes[0].childNodes[1].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1];var base=win._content;document.body.removeChild(base);data.appendChild(base);win._isFullScreened=!1;win.setDimension(win.w,win.h);win.show();win.bringToTop();win.center()}
win.updateNestedObjects()};this._isWindowOnTop=function(win){var state=(this.getTopmostWindow()==win);return state};this._bringOnBottom=function(win){for(var a in this.wins){if(this.wins[a].zi<win.zi){this.wins[a].zi+=this.zIndexStep;this.wins[a].style.zIndex=this.wins[a].zi}}
win.zi=50;win.style.zIndex=win.zi;this._makeActive(this.getTopmostWindow())};this._isWindowOnBottom=function(win){var state=!0;for(var a in this.wins){if(this.wins[a]!=win){state=state&&(this.wins[a].zi>win.zi)}}
return state};this._stickWindow=function(win){win._isSticked=!0;this._hideButton(win,"stick");this._showButton(win,"sticked");this._bringOnTop(win)};this._unstickWindow=function(win){win._isSticked=!1;this._hideButton(win,"sticked");this._showButton(win,"stick");this._bringOnTopAnyStickedWindows()};this._addUserButton=function(win,id,pos,title){var userButton=this._engineAddUserButton(win,id,pos);userButton.title=title;userButton.isVisible=!0;userButton._isEnabled=!0;userButton.isPressed=!1;userButton.label=id;win.btns[id]=userButton;userButton._doOnClick=function(){};this._attachEventsOnButton(win,userButton)};this._removeUserButton=function(win,buttonId){this._removeButtonGlobal(win,buttonId)};this._blockSwitcher=function(state){for(var a in this.wins){if(state==!0){this.wins[a].showCoverBlocker()}else{this.wins[a].hideCoverBlocker()}}};this.resizingWin=null;this.modalWin=null;this.resizingDirs="none";if(_isIE){this._focusFixIE=document.createElement("INPUT");this._focusFixIE.className="dhx_windows_ieonclosefocusfix";document.body.appendChild(this._focusFixIE)}
this._createViewport();this._doOnMouseUp=function(){if(that!=null)that._stopMove()};this._doOnMoseMove=function(e){e=e||event;if(that!=null)that._moveWindow(e)};this._resizeTM=null;this._resizeTMTime=200;this._doOnResize=function(){window.clearTimeout(that._resizeTM);that._resizeTM=window.setTimeout(function(){that._autoResizeViewport()},that._resizeTMTime)};this._doOnUnload=function(){that.unload()};this._doOnSelectStart=function(e){e=e||event;if(that.movingWin!=null||that.resizingWin!=null)e.returnValue=!1};if(_isIE){document.body.attachEvent("onselectstart",this._doOnSelectStart)}
dhtmlxEvent(window,"resize",this._doOnResize);dhtmlxEvent(document.body,"unload",this._doOnUnload);dhtmlxEvent(document.body,"mouseup",this._doOnMouseUp);dhtmlxEvent(this.vp,"mousemove",this._doOnMoseMove);dhtmlxEvent(this.vp,"mouseup",this._doOnMouseUp);this._setWindowModal=function(win,state){if(state==!0){this._makeActive(win);this._bringOnTop(win);this.modalWin=win;win._isModal=!0;this.modalCoverI.style.zIndex=win.zi-2;this.modalCoverI.style.display="";this.modalCoverD.style.zIndex=win.zi-2;this.modalCoverD.style.display="";vp=this._get_page_size();this.modalCoverD.style.height=vp[1]+'px'}else{this.modalWin=null;win._isModal=!1;this.modalCoverI.style.zIndex=0;this.modalCoverI.style.display="none";this.modalCoverD.style.zIndex=0;this.modalCoverD.style.display="none"}};this._bringOnTopAnyStickedWindows=function(){var wins=[];for(var a in this.wins){if(this.wins[a]._isSticked){wins[wins.length]=this.wins[a]}}
for(var q=0;q<wins.length;q++){this._bringOnTop(wins[q])}
if(wins.length==0){for(var a in this.wins){if(this.wins[a].className=="dhtmlx_window_active"){this._bringOnTop(this.wins[a])}}}};this.unload=function(){this._clearAll()};this._removeButtonGlobal=function(win,buttonId){if(!win.btns[buttonId])return;var btn=win.btns[buttonId];btn.title=null;btn.isVisible=null;btn._isEnabled=null;btn.isPressed=null;btn.label=null;btn._doOnClick=null;btn.attachEvent=null;btn.callEvent=null;btn.checkEvent=null;btn.detachEvent=null;btn.disable=null;btn.enable=null;btn.eventCatcher=null;btn.hide=null;btn.isEnabled=null;btn.isHidden=null;btn.show=null;btn.onmousedown=null;btn.onmouseout=null;btn.onmouseover=null;btn.onmouseup=null;if(btn.parentNode)btn.parentNode.removeChild(btn);btn=null;win.btns[buttonId]=null};this._removeWindowGlobal=function(win){if(this.modalWin==win)this._setWindowModal(win,!1);var idd=win.idd;if(win._frame){if(_isIE){try{win._frame.onreadystatechange=null;win._frame.contentWindow.document.body.onmousedown=null;win._frame.onload=null}catch(e){}}else{try{win._frame.contentWindow.onmousedown=null;win._frame.onload=null}catch(e){}}}
win.coverBlocker().onselectstart=null;win._dhxContDestruct();this._engineDiableOnSelectInWindow(win,!1);this._engineGetWindowHeader(win).onmousedown=null;this._engineGetWindowHeader(win).ondblclick=null;this.movingWin=null;this.resizingWin=null;for(var a in win.btns)this._removeButtonGlobal(win,a);win.btns=null;win._adjustToContent=null;win._doOnAttachMenu=null;win._doOnAttachStatusBar=null;win._doOnAttachToolbar=null;win._doOnAttachURL=null;win._redraw=null;win.addUserButton=null;win.allowMove=null;win.allowPark=null;win.allowResize=null;win.attachEvent=null;win.bringToBottom=null;win.bringToTop=null;win.callEvent=null;win.center=null;win.centerOnScreen=null;win.checkEvent=null;win.clearIcon=null;win.close=null;win.denyMove=null;win.denyPark=null;win.denyResize=null;win.detachEvent=null;win.eventCatcher=null;win.getDimension=null;win.getIcon=null;win.getId=null;win.getMaxDimension=null;win.getMinDimension=null;win.getPosition=null;win.getText=null;win.hide=null;win.hideHeader=null;win.isHidden=null;win.isMaximized=null;win.isModal=null;win.isMovable=null;win.isOnBottom=null;win.isOnTop=null;win.isParkable=null;win.isParked=null;win.isResizable=null;win.isSticked=null;win.keepInViewport=null;win.maximize=null;win.minimize=null;win.park=null;win.progressOff=null;win.progressOn=null;win.removeUserButton=null;win.restoreIcon=null;win.setDimension=null;win.setIcon=null;win.setMaxDimension=null;win.setMinDimension=null;win.setModal=null;win.setPosition=null;win.setText=null;win.setToFullScreen=null;win.show=null;win.showHeader=null;win.stick=null;win.unstick=null;win.onmousemove=null;win.onmousedown=null;win.icons=null;win.button=null;win._dhxContDestruct=null;win.dhxContGlobal.obj=null;win.dhxContGlobal.setContent=null;win.dhxContGlobal.dhxcont=null;win.dhxContGlobal=null;if(win._frame){while(win._frame.childNodes.length>0)win._frame.removeChild(win._frame.childNodes[0]);win._frame=null}
this._parseNestedForEvents(win);win._content=null;win.innerHTML="";win.parentNode.removeChild(win);win=null;this.wins[idd]=null;delete this.wins[idd];idd=null};this._removeEvents=function(obj){obj.onmouseover=null;obj.onmouseout=null;obj.onmousemove=null;obj.onclick=null;obj.ondblclick=null;obj.onmouseenter=null;obj.onmouseleave=null;obj.onmouseup=null;obj.onmousewheel=null;obj.onmousedown=null;obj.onselectstart=null;obj.onfocus=null;obj.style.display=""};this._parseNestedForEvents=function(obj){this._removeEvents(obj);for(var q=0;q<obj.childNodes.length;q++){if(obj.childNodes[q].tagName!=null){this._parseNestedForEvents(obj.childNodes[q])}}};this._clearAll=function(){this._clearDocumentEvents();for(var a in this.wins)this._removeWindowGlobal(this.wins[a]);this.wins=null;this._parseNestedForEvents(this._carcass);while(this._carcass.childNodes.length>0)this._carcass.removeChild(this._carcass.childNodes[0]);this._carcass.onselectstart=null;this._carcass.parentNode.removeChild(this._carcass);this._carcass=null;this._parseNestedForEvents(this._vpcover);this._vpcover.parentNode.removeChild(this._vpcover);this._vpcover=null;this._parseNestedForEvents(this.modalCoverD);this.modalCoverD.parentNode.removeChild(this.modalCoverD);this.modalCoverD=null;this._parseNestedForEvents(this.modalCoverI);this.modalCoverI.parentNode.removeChild(this.modalCoverI);this.modalCoverI=null;if(this.vp.autocreated==!0)this.vp.parentNode.removeChild(this.vp);this.vp=null;for(var a in this.skinParams){delete this.skinParams[a]}
this.skinParams=null;this._effects=null;this._engineSkinParams=null;wins=null;this._addDefaultButtons=null;this._addUserButton=null;this._allowParking=null;this._allowReszieGlob=null;this._attachEventsOnButton=null;this._attachWindowContentTo=null;this._autoResizeViewport=null;this._blockSwitcher=null;this._bringOnBottom=null;this._bringOnTop=null;this._bringOnTopAnyStickedWindows=null;this._centerWindow=null;this._clearAll=null;this._clearDocumentEvents=null;this._clearWindowIcons=null;this._closeWindow=null;this._createViewport=null;this._denyParking=null;this._denyResize=null;this._dhx_Engine=null;this._disableButton=null;this._doOnMoseMove=null;this._doOnMouseUp=null;this._doOnResize=null;this._doOnSelectStart=null;this._doOnUnload=null;this._doParkDown=null;this._doParkUp=null;this._enableButton=null;this._engineAddUserButton=null;this._engineAdjustWindowToContent=null;this._engineAllowWindowResize=null;this._engineCheckHeaderMouseDown=null;this._engineDiableOnSelectInWindow=null;this._engineDoOnWindowParkDown=null;this._engineDoOnWindowParkUp=null;this._engineFixWindowPosInViewport=null;this._engineGetWindowButton=null;this._engineGetWindowContent=null;this._engineGetWindowHeader=null;this._engineGetWindowHeaderState=null;this._engineGetWindowLabel=null;this._engineGetWindowParkedHeight=null;this._engineRedrawSkin=null;this._engineRedrawWindowPos=null;this._engineRedrawWindowSize=null;this._engineRedrawWindowTitle=null;this._engineSetWindowBody=null;this._engineSwitchWindowHeader=null;this._engineSwitchWindowProgress=null;this._engineUpdateWindowIcon=null;this._fixWindowDimensionInViewport=null;this._genStr=null;this._getActive=null;this._getTopZIndex=null;this._getWindowIcon=null;this._hideButton=null;this._hideWindow=null;this._isWindowHidden=null;this._isWindowOnBottom=null;this._isWindowOnTop=null;this._makeActive=null;this._maximizeWindow=null;this._moveWindow=null;this._needHelp=null;this._parkWindow=null;this._parseNestedForEvents=null;this._removeButtonGlobal=null;this._removeEvents=null;this._removeUserButton=null;this._removeWindowGlobal=null;this._restoreWindow=null;this._restoreWindowIcons=null;this._setWindowIcon=null;this._setWindowModal=null;this._setWindowToFullScreen=null;this._showButton=null;this._showWindow=null;this._stickWindow=null;this._stopMove=null;this._unstickWindow=null;this.attachEvent=null;this.attachViewportTo=null;this.callEvent=null;this.checkEvent=null;this.createWindow=null;this.detachEvent=null;this.enableAutoViewport=null;this.eventCatcher=null;this.findByText=null;this.forEachWindow=null;this.getBottommostWindow=null;this.getEffect=null;this.getTopmostWindow=null;this.isWindow=null;this.setEffect=null;this.setImagePath=null;this.setSkin=null;this.setViewport=null;this.unload=null;this.window=null;that=null};this._clearDocumentEvents=function(){if(_isIE){window.detachEvent("onresize",this._doOnResize);document.body.detachEvent("onselectstart",this._doOnSelectStart);document.body.detachEvent("onmouseup",this._doOnMouseUp);document.body.detachEvent("onunload",this._doOnUnload);this.vp.detachEvent("onmousemove",this._doOnMoseMove);this.vp.detachEvent("onmouseup",this._doOnMouseUp)}else{window.removeEventListener("resize",this._doOnResize,!1);document.body.removeEventListener("mouseup",this._doOnMouseUp,!1);document.body.removeEventListener("unload",this._doOnUnload,!1);this.vp.removeEventListener("mousemove",this._doOnMoseMove,!1);this.vp.removeEventListener("mouseup",this._doOnMouseUp,!1)}};this._genStr=function(w){var s="";var z="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var q=0;q<w;q++){s=s+z.charAt(Math.round(Math.random()*z.length))}
return s};dhtmlxEventable(this);return this}
dhtmlXWindows.prototype._dhx_Engine=function(){this._engineEnabled=!0;this._engineName="dhx";this._engineSkinParams={"dhx_blue":{"hh":21,"lbw":2,"rbw":2,"lch":2,"lcw":14,"rch":14,"rcw":14,"bbh":2,"mnh":23,"tbh":25,"sbh":20,"noh_t":null,"noh_h":null},"dhx_black":{"hh":21,"lbw":2,"rbw":2,"lch":2,"lcw":14,"rch":14,"rcw":14,"bbh":2,"mnh":23,"tbh":25,"sbh":20,"noh_t":null,"noh_h":null},"dhx_skyblue":{"hh":29,"lbw":2,"rbw":2,"lch":2,"lcw":14,"rch":14,"rcw":14,"bbh":2,"mnh":23,"tbh":25,"sbh":20,"noh_t":5,"noh_h":-10}};this._engineSetWindowBody=function(win){win.innerHTML="<div iswin='1' class='dhtmlx_wins_body_outer'>"+(_isIE?"<iframe frameborder='0' class='dhtmlx_wins_ie6_cover_fix' onload='this.contentWindow.document.body.style.overflow=\"hidden\";'></iframe>":"")+"<div></div>"+"<div class='dhtmlx_wins_progress'></div>"+"<div class='dhtmlx_wins_title'>dhtmlxWindow</div>"+"<div class='dhtmlx_wins_btns'>"+"<div class='dhtmlx_wins_btns_button dhtmlx_button_dock_default'></div>"+"<div class='dhtmlx_wins_btns_button dhtmlx_button_close_default'></div>"+"<div class='dhtmlx_wins_btns_button dhtmlx_button_minmax1_default'></div>"+"<div class='dhtmlx_wins_btns_button dhtmlx_button_minmax2_default'></div>"+"<div class='dhtmlx_wins_btns_button dhtmlx_button_park_default'></div>"+"<div class='dhtmlx_wins_btns_button dhtmlx_button_help_default'></div>"+"<div class='dhtmlx_wins_btns_button dhtmlx_button_stick_default'></div>"+"<div class='dhtmlx_wins_btns_button dhtmlx_button_sticked_default'></div>"+"</div>"+"<div class='dhtmlx_wins_body_inner'></div>"+"<div winResT='yes' class='dhtmlx_wins_resizer_t' style='display:none;'></div>"+"<div winResL='yes' class='dhtmlx_wins_resizer_l'></div>"+"<div winResR='yes' class='dhtmlx_wins_resizer_r'></div>"+"<div winResB='yes' class='dhtmlx_wins_resizer_b'></div>"+"<div class='white_line'></div>"+"<div class='white_line2'></div>"+"</div>";win.dhxContGlobal=new dhtmlXContainer(win);if(this.skin=="dhx_skyblue"){win.dhxContGlobal.obj._offsetWidth=0;win.dhxContGlobal.obj._offsetHeight=0;win.dhxContGlobal.obj._offsetLeft=0;win.dhxContGlobal.obj._offsetHeightSaved=win.dhxContGlobal.obj._offsetHeight}
win.skin=this.skin;win.dhxContGlobal.setContent(win.childNodes[0].childNodes[(_isIE?5:4)]);win.coverBlocker().onselectstart=function(e){e=e||event;e.returnValue=!1;e.cancelBubble=!0}};this._engineDiableOnSelectInWindow=function(win,state){var data=[];data[0]=win.childNodes[0].childNodes[(_isIE?1:0)];data[1]=win.childNodes[0].childNodes[(_isIE?2:1)];data[2]=win.childNodes[0].childNodes[(_isIE?3:2)];data[3]=win.childNodes[0].childNodes[(_isIE?4:3)];data[4]=win.childNodes[0].childNodes[(_isIE?6:5)];data[5]=win.childNodes[0].childNodes[(_isIE?7:6)];data[6]=win.childNodes[0].childNodes[(_isIE?8:7)];data[7]=win.childNodes[0].childNodes[(_isIE?9:8)];for(var q=0;q<data.length;q++){data[q].onselectstart=(state?function(e){e=e||event;e.returnValue=!1;return!1}:null)}};this._engineGetWindowHeader=function(win){win.childNodes[0].idd=win.idd;return win.childNodes[0]};this._engineRedrawWindowSize=function(win){win.style.width=(String(win.w).search("%")==-1?win.w+"px":win.w);win.style.height=(String(win.h).search("%")==-1?win.h+"px":win.h);var body=win.childNodes[0];body.style.width=win.clientWidth+"px";body.style.height=win.clientHeight+"px";if(body.offsetWidth>win.clientWidth){body.style.width=win.clientWidth*2-body.offsetWidth+"px"}
if(body.offsetHeight>win.clientHeight){var px=win.clientHeight*2-body.offsetHeight;if(px<0)px=0;body.style.height=px+"px"}
var hh=(win._noHeader==!0?win._hdrSize:this._engineSkinParams[this.skin].hh);this._engineRedrawWindowTitle(win);win.adjustContent(body,hh)};this._engineRedrawWindowPos=function(win){if(win._isFullScreened)return;win.style.left=win.x+"px";win.style.top=win.y+"px"};this._engineFixWindowPosInViewport=function(win){var hh=this._engineSkinParams[this.skin].hh;var hh=(win._noHeader==!0?win._hdrSize:this._engineSkinParams[this.skin].hh);if(win._keepInViewport){if(win.x<0){win.x=0}
if(win.x+win.w>this.vp.offsetWidth){win.x=this.vp.offsetWidth-win.w}
if(win.y+win.h>this.vp.offsetHeight){win.y=this.vp.offsetHeight-win.h}
if(win.y<0){win.y=0}}else{if(win.y<0){win.y=0}
if(win.y<0){win.y=0}
if(win.x+win.w-10<0){win.x=10-win.w}
if(win.x>this.vp.offsetWidth-10){win.x=this.vp.offsetWidth-10}}};this._engineCheckHeaderMouseDown=function(win,ev){var x=(_isIE||_isOpera?ev.offsetX:ev.layerX);var y=(_isIE||_isOpera?ev.offsetY:ev.layerY);var obj=ev.target||ev.srcElement;var hh=(win._noHeader==!0?win._hdrSize:this._engineSkinParams[this.skin].hh);if(y<=hh&&(obj==win.childNodes[0]||obj==win.childNodes[0].childNodes[(_isIE?1:0)]||obj==win.childNodes[0].childNodes[(_isIE?3:2)]||obj==win.childNodes[0].childNodes[(_isIE?4:3)]))return!0;return!1};this._engineGetWindowContent=function(win){alert("_engineGetWindowContent")};this._engineGetWindowButton=function(win,buttonName){var buttonObj=null;var buttonStyle="dhtmlx_button_"+String(buttonName).toLowerCase()+"_";for(var q=0;q<win.childNodes[0].childNodes[(_isIE?4:3)].childNodes.length;q++){var buttonTemp=win.childNodes[0].childNodes[(_isIE?4:3)].childNodes[q];if(String(buttonTemp.className).search(buttonStyle)!=-1){buttonObj=buttonTemp}}
return buttonObj};this._engineAddUserButton=function(win,buttonName,buttonPos){if(isNaN(buttonPos))buttonPos=0;var button=document.createElement("DIV");button.className="dhtmlx_wins_btns_button dhtmlx_button_"+buttonName+"_default";var buttonPoly=win.childNodes[0].childNodes[(_isIE?4:3)];buttonPos=buttonPoly.childNodes.length-buttonPos;if(buttonPos<0)buttonPos=0;if(buttonPos>=buttonPoly.childNodes.length){buttonPoly.appendChild(button)}else{buttonPoly.insertBefore(button,buttonPoly.childNodes[buttonPos])}
this._engineRedrawWindowTitle(win);return button};this._engineGetWindowParkedHeight=function(win){return this._engineSkinParams[this.skin].hh+1};this._engineDoOnWindowParkDown=function(win){win.childNodes[0].childNodes[(_isIE?6:5)].style.display=(win._noHeader==!0?"":"none");win.childNodes[0].childNodes[(_isIE?7:6)].style.display="";win.childNodes[0].childNodes[(_isIE?8:7)].style.display="";win.childNodes[0].childNodes[(_isIE?9:8)].style.display=""};this._engineDoOnWindowParkUp=function(win){win.childNodes[0].childNodes[(_isIE?6:5)].style.display="none";win.childNodes[0].childNodes[(_isIE?7:6)].style.display="none";win.childNodes[0].childNodes[(_isIE?8:7)].style.display="none";win.childNodes[0].childNodes[(_isIE?9:8)].style.display="none"};this._engineUpdateWindowIcon=function(win,icon){win.childNodes[0].childNodes[(_isIE?1:0)].style.backgroundImage="url('"+icon+"')"};this._engineAllowWindowResize=function(win,targetObj,mouseX,mouseY){if(!targetObj.getAttribute)return;var sk=this._engineSkinParams[this.skin];var hh=(win._noHeader==!0?win._hdrSize:this._engineSkinParams[this.skin].hh);if(targetObj.getAttribute("winResL")!=null){if(targetObj.getAttribute("winResL")=="yes"){if(mouseY>=hh){if(mouseY>=win.h-sk.lch)return"corner_left";if(mouseY<=sk.lch&&win._noHeader==!0)return"corner_up_left";return"border_left"}}}
if(targetObj.getAttribute("winResR")!=null){if(targetObj.getAttribute("winResR")=="yes"){if(mouseY>=hh){if(mouseY>=win.h-sk.rch)return"corner_right";if(mouseY<=sk.rch&&win._noHeader==!0)return"corner_up_right";return"border_right"}}}
if(targetObj.getAttribute("winResT")!=null){if(targetObj.getAttribute("winResT")=="yes"&&win._noHeader==!0){if(mouseX<=sk.lcw)return"corner_up_left";if(mouseX>=win.w-sk.rcw)return"corner_up_right";return"border_top"}}
if(targetObj.getAttribute("winResB")!=null){if(targetObj.getAttribute("winResB")=="yes"){if(mouseX<=sk.lcw)return"corner_left";if(mouseX>=win.w-sk.rcw)return"corner_right";return"border_bottom"}}
return null};this._engineAdjustWindowToContent=function(win,w,h){var newW=w+win.w-win.dhxcont.clientWidth;var newH=h+win.h-win.dhxcont.clientHeight;win.setDimension(newW,newH)};this._engineRedrawSkin=function(){this.vp.className="dhtmlx_winviewport dhtmlx_skin_"+this.skin+(this._r?" dhx_wins_rtl":"");var sk=this._engineSkinParams[this.skin];for(var a in this.wins){if(this.skin=="dhx_skyblue"){this.wins[a].dhxContGlobal.obj._offsetTop=(this.wins[a]._noHeader?sk.noh_t:null);this.wins[a].dhxContGlobal.obj._offsetWidth=-10;this.wins[a].dhxContGlobal.obj._offsetHeight=(this.wins[a]._noHeader?sk.noh_h:-5);this.wins[a].dhxContGlobal.obj._offsetLeft=5;this.wins[a].dhxContGlobal.obj._offsetHeightSaved=-5}else{this.wins[a].dhxContGlobal.obj._offsetWidth=null;this.wins[a].dhxContGlobal.obj._offsetHeight=null;this.wins[a].dhxContGlobal.obj._offsetLeft=null;this.wins[a].dhxContGlobal.obj._offsetTop=null;this.wins[a].dhxContGlobal.obj._offsetHeightSaved=null}
this.wins[a].skin=this.skin;this._restoreWindowIcons(this.wins[a]);this._engineRedrawWindowSize(this.wins[a])}};this._engineSwitchWindowProgress=function(win,state){if(state==!0){win.childNodes[0].childNodes[(_isIE?1:0)].style.display="none";win.childNodes[0].childNodes[(_isIE?2:1)].style.display=""}else{win.childNodes[0].childNodes[(_isIE?2:1)].style.display="none";win.childNodes[0].childNodes[(_isIE?1:0)].style.display=""}};this._engineSwitchWindowHeader=function(win,state){if(!win._noHeader)win._noHeader=!1;if(state!=win._noHeader)return;win._noHeader=(state==!0?false:!0);win._hdrSize=0;win.childNodes[0].childNodes[(_isIE?5:4)].className="dhtmlx_wins_body_inner"+(win._noHeader?" dhtmlx_wins_no_header":"");win.childNodes[0].childNodes[(_isIE?6:5)].style.display=(win._noHeader?"":"none");win.childNodes[0].childNodes[(_isIE?1:0)].style.display=(win._noHeader?"none":"");win.childNodes[0].childNodes[(_isIE?3:2)].style.display=(win._noHeader?"none":"");win.childNodes[0].childNodes[(_isIE?4:3)].style.display=(win._noHeader?"none":"");var sk=this._engineSkinParams[this.skin];if(win._noHeader){win.dhxContGlobal.obj._offsetHeightSaved=win.dhxContGlobal.obj._offsetHeight;win.dhxContGlobal.obj._offsetHeight=sk.noh_h;win.dhxContGlobal.obj._offsetTop=sk.noh_t}else{win.dhxContGlobal.obj._offsetHeight=win.dhxContGlobal.obj._offsetHeightSaved;win.dhxContGlobal.obj._offsetTop=null}
this._engineRedrawWindowSize(win)};this._engineGetWindowHeaderState=function(win){return(win._noHeader?true:!1)};this._engineGetWindowLabel=function(win){return win.childNodes[0].childNodes[(_isIE?3:2)]};this._engineRedrawWindowTitle=function(win){if(win._noHeader!==!0){var p2=win.childNodes[0].childNodes[(_isIE?1:0)].offsetWidth;var p3=win.childNodes[0].childNodes[(_isIE?4:3)].offsetWidth;var newW=win.offsetWidth-p2-p3-24;if(newW<0)newW="100%";else newW+="px";win.childNodes[0].childNodes[(_isIE?3:2)].style.width=newW}}};(function(){dhtmlx.extend_api("dhtmlXWindows",{_init:function(obj){return[]},_patch:function(obj){obj.old_createWindow=obj.createWindow;obj.createWindow=function(obj){if(arguments.length>1)return this.old_createWindow.apply(this,arguments);var res=this.old_createWindow(obj.id,obj.x,obj.y,obj.width,obj.height);res.allowMoveA=function(mode){if(mode)this.allowMove();else this.denyMove()};res.allowParkA=function(mode){if(mode)this.allowPark();else this.denyPark()};res.allowResizeA=function(mode){if(mode)this.allowResize();else this.denyResize()};for(var a in obj){if(map[a])res[map[a]](obj[a]);else if(a.indexOf("on")==0){res.attachEvent(a,obj[a])}}
return res}},animation:"setEffect",image_path:"setImagePath",skin:"setSkin",viewport:"_viewport",wins:"_wins"},{_viewport:function(data){if(data.object){this.enableAutoViewport(!1);this.attachViewportTo(data.object)}else{this.enableAutoViewport(!1);this.setViewport(data.left,data.top,data.width,data.height,data.parent)}},_wins:function(arr){for(var q=0;q<arr.length;q++){var win=arr[q];this.createWindow(win.id,win.left,win.top,win.width,win.height);if(win.text)this.window(win.id).setText(win.text);if(win.keep_in_viewport)this.window(win.id).keepInViewport(!0);if(win.deny_resize)this.window(win.id).denyResize();if(win.deny_park)this.window(win.id).denyPark();if(win.deny_move)this.window(win.id).denyMove()}}});var map={move:"allowMoveA",park:"allowParkA",resize:"allowResizeA",center:"center",modal:"setModal",caption:"setText",header:"showHeader"}})();function dhtmlXContainer(obj){var that=this;this.obj=obj;this.dhxcont=null;this.setContent=function(data){this.dhxcont=data;this.dhxcont.innerHTML="<div style='position: relative; left: 0px; top: 0px; overflow-y: auto;'></div>"+"<div class='dhxcont_content_blocker' style='display: none;'></div>";this.dhxcont.mainCont=this.dhxcont.childNodes[0];this.obj.dhxcont=this.dhxcont};this.obj._genStr=function(w){var s="";var z="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var q=0;q<w;q++){s=s+z.charAt(Math.round(Math.random()*z.length))}
return s};this.obj.setMinContentSize=function(w,h){this._minDataSizeW=w;this._minDataSizeH=h};this.obj.moveContentTo=function(cont){var pref=null;if(this.grid)pref="grid";if(this.tree)pref="tree";if(this.tabbar)pref="tabbar";if(this.folders)pref="folders";if(this.layout)pref="layout";if(pref!=null){if(pref=="layout"&&this._isCell&&cont._isWindow){var aDim=this.layout._defineWindowMinDimension(this,!0);var bDim=cont.getDimension();cont.setDimension((aDim[1]>bDim[0]?aDim[1]:null),(aDim[2]>bDim[1]?aDim[2]:null))}
if(pref=="tabbar"&&cont._isCell)cont.hideHeader();cont.attachObject(this[pref+"Id"]);cont[pref]=this[pref];cont[pref+"Id"]=this[pref+"Id"];cont[pref+"Obj"]=this[pref+"Obj"];if(pref=="layout"){cont.layout._baseWFix=-2;cont.layout._baseHFix=-2;if(cont._isWindow)cont.attachEvent("_onBeforeTryResize",cont.layout._defineWindowMinDimension)}
this[pref]=null;this[pref+"Id"]=null;this[pref+"Obj"]=null;if(pref=="tabbar"&&this._isCell)this.showHeader()}
if(this.menu!=null){cont.dhxcont.insertBefore(document.getElementById(this.menuId),cont.dhxcont.childNodes[0]);cont.menu=this.menu;cont.menuId=this.menuId;cont.menuHeight=this.menuHeight;this.menu=null;this.menuId=null;this.menuHeight=null;if(this._doOnAttachMenu)this._doOnAttachMenu("unload");if(cont._doOnAttachMenu)cont._doOnAttachMenu("move")}
if(this.toolbar!=null){cont.dhxcont.insertBefore(document.getElementById(this.toolbarId),cont.dhxcont.childNodes[(cont.menu!=null?1:0)]);cont.toolbar=this.toolbar;cont.toolbarId=this.toolbarId;cont.toolbarHeight=this.toolbarHeight;this.toolbar=null;this.toolbarId=null;this.toolbarHeight=null;if(this._doOnAttachToolbar)this._doOnAttachToolbar("unload");if(cont._doOnAttachToolbar)cont._doOnAttachToolbar("move")}
if(this.sb!=null){cont.dhxcont.insertBefore(document.getElementById(this.sbId),cont.dhxcont.childNodes[cont.dhxcont.childNodes.length-1]);cont.sb=this.sb;cont.sbId=this.sbId;cont.sbHeight=this.sbHeight;this.sb=null;this.sbId=null;this.sbHeight=null;if(this._doOnAttachToolbar)this._doOnAttachToolbar("unload");if(cont._doOnAttachToolbar)cont._doOnAttachToolbar("move")}
var objA=this.dhxcont.childNodes[0];var objB=cont.dhxcont.childNodes[0];while(objA.childNodes.length>0)objB.appendChild(objA.childNodes[0]);cont.updateNestedObjects()};this.obj.adjustContent=function(parentObj,offsetTop,marginTop,notCalcWidth,offsetBottom){this.dhxcont.style.left=(this._offsetLeft||0)+"px";this.dhxcont.style.top=(this._offsetTop||0)+offsetTop+"px";var cw=parentObj.clientWidth+(this._offsetWidth||0);if(notCalcWidth!==!0)this.dhxcont.style.width=Math.max(0,cw)+"px";if(notCalcWidth!==!0)if(this.dhxcont.offsetWidth>cw)this.dhxcont.style.width=Math.max(0,cw*2-this.dhxcont.offsetWidth)+"px";var ch=parentObj.clientHeight+(this._offsetHeight||0);this.dhxcont.style.height=Math.max(0,ch-offsetTop)+(marginTop!=null?marginTop:0)+"px";if(this.dhxcont.offsetHeight>ch-offsetTop)this.dhxcont.style.height=Math.max(0,(ch-offsetTop)*2-this.dhxcont.offsetHeight)+"px";if(offsetBottom)if(!isNaN(offsetBottom))this.dhxcont.style.height=Math.max(0,parseInt(this.dhxcont.style.height)-offsetBottom)+"px";if(this._minDataSizeH!=null){if(parseInt(this.dhxcont.style.height)<this._minDataSizeH)this.dhxcont.style.height=this._minDataSizeH+"px"}
if(this._minDataSizeW!=null){if(parseInt(this.dhxcont.style.width)<this._minDataSizeW)this.dhxcont.style.width=this._minDataSizeW+"px"}
if(notCalcWidth!==!0){this.dhxcont.mainCont.style.width=this.dhxcont.clientWidth+"px";if(this.dhxcont.mainCont.offsetWidth>this.dhxcont.clientWidth)this.dhxcont.mainCont.style.width=Math.max(0,this.dhxcont.clientWidth*2-this.dhxcont.mainCont.offsetWidth)+"px"}
var menuOffset=(this.menu!=null?(!this.menuHidden?this.menuHeight:0):0);var toolbarOffset=(this.toolbar!=null?(!this.toolbarHidden?this.toolbarHeight:0):0);var statusOffset=(this.sb!=null?(!this.sbHidden?this.sbHeight:0):0);this.dhxcont.mainCont.style.height=this.dhxcont.clientHeight+"px";if(this.dhxcont.mainCont.offsetHeight>this.dhxcont.clientHeight)this.dhxcont.mainCont.style.height=Math.max(0,this.dhxcont.clientHeight*2-this.dhxcont.mainCont.offsetHeight)+"px";this.dhxcont.mainCont.style.height=Math.max(0,parseInt(this.dhxcont.mainCont.style.height)-menuOffset-toolbarOffset-statusOffset)+"px"};this.obj.coverBlocker=function(){return this.dhxcont.childNodes[this.dhxcont.childNodes.length-1]};this.obj.showCoverBlocker=function(){this.coverBlocker().style.display=""};this.obj.hideCoverBlocker=function(){this.coverBlocker().style.display="none"};this.obj.updateNestedObjects=function(){if(this.grid){this.grid.setSizes()}
if(this.tabbar){this.tabbar.adjustOuterSize()}
if(this.folders){this.folders.setSizes()}
if(this.editor){if(!_isIE)this.editor._prepareContent(!0);this.editor.setSizes()}
if(this.layout){this.layoutObj.style.width=this.dhxcont.mainCont.style.width;this.layoutObj.style.height=this.dhxcont.mainCont.style.height;if(this._isAcc&&this.skin=="dhx_skyblue"){this.layoutObj.style.width=parseInt(this.dhxcont.mainCont.style.width)+2+"px";this.layoutObj.style.height=parseInt(this.dhxcont.mainCont.style.height)+2+"px"}
this.layout.setSizes()}
if(this.accordion!=null){this.accordionObj.style.width=parseInt(this.dhxcont.mainCont.style.width)+2+"px";this.accordionObj.style.height=parseInt(this.dhxcont.mainCont.style.height)+2+"px";this.accordion.setSizes()}
if(this.dockedCell){this.dockedCell.updateNestedObjects()}};this.obj.attachStatusBar=function(){var sbObj=document.createElement("DIV");if(this._isCell){sbObj.className="dhxcont_sb_container_layoutcell"}else{sbObj.className="dhxcont_sb_container"}
sbObj.id="sbobj_"+this._genStr(12);sbObj.innerHTML="<div class='dhxcont_statusbar'></div>";this.dhxcont.insertBefore(sbObj,this.dhxcont.childNodes[this.dhxcont.childNodes.length-1]);sbObj.setText=function(text){this.childNodes[0].innerHTML=text};sbObj.getText=function(){return this.childNodes[0].innerHTML};sbObj.onselectstart=function(e){e=e||event;e.returnValue=!1;return!1};this.sb=sbObj;this.sbHeight=sbObj.offsetHeight;this.sbId=sbObj.id;if(this._doOnAttachStatusBar)this._doOnAttachStatusBar("init");this.adjust();return this.sb};this.obj.detachStatusBar=function(){if(!this.sb)return;this.sb.setText=null;this.sb.getText=null;this.sb.onselectstart=null;this.sb.parentNode.removeChild(this.sb);this.sb=null;this.sbHeight=null;this.sbId=null;if(this._doOnAttachStatusBar)this._doOnAttachStatusBar("unload")};this.obj.attachMenu=function(){var menuObj=document.createElement("DIV");menuObj.style.position="relative";menuObj.style.overflow="hidden";menuObj.id="dhxmenu_"+this._genStr(12);this.dhxcont.insertBefore(menuObj,this.dhxcont.childNodes[0]);this.menu=new dhtmlXMenuObject(menuObj.id,this.skin);this.menuHeight=menuObj.offsetHeight;this.menuId=menuObj.id;if(this._doOnAttachMenu)this._doOnAttachMenu("init");this.adjust();return this.menu};this.obj.detachMenu=function(){if(!this.menu)return;var menuObj=document.getElementById(this.menuId);this.menu.unload();this.menu=null;this.menuId=null;this.menuHeight=null;menuObj.parentNode.removeChild(menuObj);menuObj=null;if(this._doOnAttachMenu)this._doOnAttachMenu("unload")};this.obj.attachToolbar=function(){var toolbarObj=document.createElement("DIV");toolbarObj.style.position="relative";toolbarObj.style.overflow="hidden";toolbarObj.id="dhxtoolbar_"+this._genStr(12);this.dhxcont.insertBefore(toolbarObj,this.dhxcont.childNodes[(this.menu!=null?1:0)]);this.toolbar=new dhtmlXToolbarObject(toolbarObj.id,this.skin);this.toolbarHeight=toolbarObj.offsetHeight+(this._isLayout&&this.skin=="dhx_skyblue"?2:0);this.toolbarId=toolbarObj.id;if(this._doOnAttachToolbar)this._doOnAttachToolbar("init");this.adjust();return this.toolbar};this.obj.detachToolbar=function(){if(!this.toolbar)return;var toolbarObj=document.getElementById(this.toolbarId);this.toolbar.unload();this.toolbar=null;this.toolbarId=null;this.toolbarHeight=null;toolbarObj.parentNode.removeChild(toolbarObj);toolbarObj=null;if(this._doOnAttachToolbar)this._doOnAttachToolbar("unload")};this.obj.attachGrid=function(){if(this._isWindow&&this.skin=="dhx_skyblue"){this.dhxcont.mainCont.style.border="#ebe9ec 1px solid";this._redraw()}
var obj=document.createElement("DIV");obj.id="dhxGridObj_"+this._genStr(12);obj.style.width="100%";obj.style.height="100%";obj.cmp="grid";document.body.appendChild(obj);this.attachObject(obj.id);this.grid=new dhtmlXGridObject(obj.id);this.grid.setSkin(this.skin);this.grid.entBox.style.border="0px solid white";this.grid._sizeFix=0;this.gridId=obj.id;this.gridObj=obj;return this.grid};this.obj.attachScheduler=function(day,mode){var obj=document.createElement("DIV");obj.innerHTML='<div id="scheduler_here" class="dhx_cal_container" style="width:100%; height:100%;"><div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div></div>';document.body.appendChild(obj.firstChild);this.attachObject("scheduler_here");this.grid=scheduler;scheduler.setSizes=scheduler.update_view;scheduler.destructor=function(){};scheduler.init("scheduler_here",day,mode);return this.grid};this.obj.attachTree=function(rootId){if(this._isWindow&&this.skin=="dhx_skyblue"){this.dhxcont.mainCont.style.border="#ebe9ec 1px solid";this._redraw()}
var obj=document.createElement("DIV");obj.id="dhxTreeObj_"+this._genStr(12);obj.style.width="100%";obj.style.height="100%";obj.cmp="tree";document.body.appendChild(obj);this.attachObject(obj.id);this.tree=new dhtmlXTreeObject(obj.id,"100%","100%",(rootId||0));this.tree.setSkin(this.skin);this.tree.allTree.childNodes[0].style.marginTop="2px";this.tree.allTree.childNodes[0].style.marginBottom="2px";this.treeId=obj.id;this.treeObj=obj;return this.tree};this.obj.attachTabbar=function(mode){if(this._isWindow&&this.skin=="dhx_skyblue"){this.dhxcont.style.border="none";this.setDimension(this.w,this.h)}
var obj=document.createElement("DIV");obj.id="dhxTabbarObj_"+this._genStr(12);obj.style.width="100%";obj.style.height="100%";obj.style.overflow="hidden";obj.cmp="tabbar";document.body.appendChild(obj);this.attachObject(obj.id);if(this.className=="dhtmlxLayoutSinglePoly"){this.hideHeader()}
this.tabbar=new dhtmlXTabBar(obj.id,mode||"top",20);if(!this._isWindow)
this.tabbar._s.expand=!0;this.tabbar.setSkin(this.skin);this.tabbar.adjustOuterSize();this.tabbarId=obj.id;this.tabbarObj=obj;return this.tabbar};this.obj.attachFolders=function(){if(this._isWindow&&this.skin=="dhx_skyblue"){this.dhxcont.mainCont.style.border="#ebe9ec 1px solid";this._redraw()}
var obj=document.createElement("DIV");obj.id="dhxFoldersObj_"+this._genStr(12);obj.style.width="100%";obj.style.height="100%";obj.style.overflow="hidden";obj.cmp="folders";document.body.appendChild(obj);this.attachObject(obj.id);this.folders=new dhtmlxFolders(obj.id);this.folders.setSizes();this.foldersId=obj.id;this.foldersObj=obj;return this.folders};this.obj.attachAccordion=function(){if(this._isWindow&&this.skin=="dhx_skyblue"){this.dhxcont.mainCont.style.border="#ebe9ec 1px solid";this._redraw()}
var obj=document.createElement("DIV");obj.id="dhxAccordionObj_"+this._genStr(12);obj.style.left="-1px";obj.style.top="-1px";obj.style.width=parseInt(this.dhxcont.mainCont.style.width)+2+"px";obj.style.height=parseInt(this.dhxcont.mainCont.style.height)+2+"px";obj.style.position="relative";obj.cmp="accordion";document.body.appendChild(obj);this.attachObject(obj.id);this.accordion=new dhtmlXAccordion(obj.id,this.skin);this.accordion.setSizes();this.accordionId=obj.id;this.accordionObj=obj;return this.accordion};this.obj.attachLayout=function(view,skin){if(this._isCell&&this.skin=="dhx_skyblue"){this.hideHeader();this.dhxcont.style.border="0px solid white";this.adjustContent(this.childNodes[0],0)}
var obj=document.createElement("DIV");obj.id="dhxLayoutObj_"+this._genStr(12);obj.style.overflow="hidden";obj.style.position="absolute";obj.style.left="0px";obj.style.top="0px";obj.style.width=parseInt(this.dhxcont.mainCont.style.width)+"px";obj.style.height=parseInt(this.dhxcont.mainCont.style.height)+"px";if(this._isAcc&&this.skin=="dhx_skyblue"){obj.style.left="-1px";obj.style.top="-1px";obj.style.width=parseInt(this.dhxcont.mainCont.style.width)+2+"px";obj.style.height=parseInt(this.dhxcont.mainCont.style.height)+2+"px"}
obj.dhxContExists=!0;obj.cmp="layout";document.body.appendChild(obj);this.attachObject(obj.id);this.layout=new dhtmlXLayoutObject(obj,view,this.skin);if(this._isWindow)this.attachEvent("_onBeforeTryResize",this.layout._defineWindowMinDimension);this.layoutId=obj.id;this.layoutObj=obj;return this.layout};this.obj.attachEditor=function(skin){if(this._isWindow&&this.skin=="dhx_skyblue"){this.dhxcont.mainCont.style.border="#ebe9ec 1px solid";this._redraw()}
var obj=document.createElement("DIV");obj.id="dhxEditorObj_"+this._genStr(12);obj.style.position="relative";obj.style.display="none";obj.style.overflow="hidden";obj.style.width="100%";obj.style.height="100%";obj.cmp="editor";document.body.appendChild(obj);this.attachObject(obj.id);this.editor=new dhtmlXEditor(obj.id,this.skin);this.editorId=obj.id;this.editorObj=obj;return this.editor};this.obj.attachObject=function(obj,autoSize){if(typeof(obj)=="string")obj=document.getElementById(obj);if(autoSize){obj.style.visibility="hidden";obj.style.display="";var objW=obj.offsetWidth;var objH=obj.offsetHeight}
this._attachContent("obj",obj);if(autoSize&&this._isWindow){obj.style.visibility="visible";this._adjustToContent(objW,objH)}};this.obj.detachObject=function(remove,moveTo){var pref=null;if(this.tree)pref="tree";if(this.grid)pref="grid";if(this.layout)pref="layout";if(this.tabbar)pref="tabbar";if(this.accordion)pref="accordion";if(this.folders)pref="folders";if(pref!=null){var objHandler=null;var objLink=null;if(remove==!0){if(this[pref].unload)this[pref].unload();if(this[pref].destructor)this[pref].destructor();while(this[pref+"Obj"].childNodes.length>0)this[pref+"Obj"].removeChild(this[pref+"Obj"].childNodes[0]);}else{document.body.appendChild(this[pref+"Obj"]);this[pref+"Obj"].style.display="none";objHandler=this[pref];objLink=this[pref+"Obj"]}
this[pref]=null;this[pref+"Id"]=null;this[pref+"Obj"]=null;return[objHandler,objLink]}
var objA=this.dhxcont.childNodes[0];while(objA.childNodes.length>0){if(remove==!0){objA.removeChild(objA.childNodes[0])}else{var obj=objA.childNodes[0];if(moveTo!=null){if(typeof(moveTo)!="object")moveTo=document.getElementById(moveTo);moveTo.appendChild(obj)}else{document.body.appendChild(obj)}
obj.style.display="none"}}};this.obj.appendObject=function(obj){if(typeof(obj)=="string"){obj=document.getElementById(obj)}
this._attachContent("obj",obj,!0)};this.obj.attachHTMLString=function(str){this._attachContent("str",str);var z=str.match(/<script[^>]*>[^\f]*?<\/script>/g)||[];for(var i=0;i<z.length;i++){var s=z[i].replace(/<([\/]{0,1})script[^>]*>/g,"");if(window.execScript)window.execScript(s);else window.eval(s)}};this.obj.attachURL=function(url,ajax){this._attachContent((ajax==!0?"urlajax":"url"),url,!1)};this.obj.adjust=function(){if(this.skin=="dhx_skyblue"){if(this.menu){if(this._isWindow||this._isLayout){this.menu._topLevelOffsetLeft=0;document.getElementById(this.menuId).style.height="26px";this.menuHeight=document.getElementById(this.menuId).offsetHeight;if(this._doOnAttachMenu)this._doOnAttachMenu("show")}
if(this._isCell){document.getElementById(this.menuId).className+=" in_layoutcell";this.menuHeight=25}
if(this._isAcc){document.getElementById(this.menuId).className+=" in_acccell";this.menuHeight=25}
if(this._doOnAttachMenu)this._doOnAttachMenu("adjust")}
if(this.toolbar){if(this._isWindow||this._isLayout){document.getElementById(this.toolbarId).style.height="29px";this.toolbarHeight=document.getElementById(this.toolbarId).offsetHeight;if(this._doOnAttachToolbar)this._doOnAttachToolbar("show")}
if(this._isCell){document.getElementById(this.toolbarId).className+=" in_layoutcell"}
if(this._isAcc){document.getElementById(this.toolbarId).className+=" in_acccell"}}}};this.obj._attachContent=function(type,obj,append){if(append!==!0){while(that.dhxcont.mainCont.childNodes.length>0){that.dhxcont.mainCont.removeChild(that.dhxcont.mainCont.childNodes[0])}}
if(type=="url"){if(this._isWindow&&obj.cmp==null&&this.skin=="dhx_skyblue"){this.dhxcont.mainCont.style.border="#ebe9ec 1px solid";this._redraw()}
var fr=document.createElement("IFRAME");fr.frameBorder=0;fr.border=0;fr.style.width="100%";fr.style.height="100%";fr.setAttribute("src","javascript:false;");that.dhxcont.mainCont.appendChild(fr);fr.src=obj;this._frame=fr;if(this._doOnAttachURL)this._doOnAttachURL(!0)}else if(type=="urlajax"){if(this._isWindow&&obj.cmp==null&&this.skin=="dhx_skyblue"){this.dhxcont.mainCont.style.border="#ebe9ec 1px solid";this.dhxcont.mainCont.style.backgroundColor="#FFFFFF";this._redraw()}
var t=this;var xmlParser=function(){t.attachHTMLString(this.xmlDoc.responseText,this);if(t._doOnAttachURL)t._doOnAttachURL(!1);this.destructor()};var xmlLoader=new dtmlXMLLoaderObject(xmlParser,window);xmlLoader.dhxWindowObject=this;xmlLoader.loadXML(obj)}else if(type=="obj"){if(this._isWindow&&obj.cmp==null&&this.skin=="dhx_skyblue"){this.dhxcont.mainCont.style.border="#ebe9ec 1px solid";this.dhxcont.mainCont.style.backgroundColor="#FFFFFF";this._redraw()}
that.dhxcont._frame=null;that.dhxcont.mainCont.appendChild(obj);that.dhxcont.mainCont.style.overflow=(append===!0?"auto":"hidden");obj.style.display=""}else if(type=="str"){if(this._isWindow&&obj.cmp==null&&this.skin=="dhx_skyblue"){this.dhxcont.mainCont.style.border="#ebe9ec 1px solid";this.dhxcont.mainCont.style.backgroundColor="#FFFFFF";this._redraw()}
that.dhxcont._frame=null;that.dhxcont.mainCont.innerHTML=obj}};this.obj.showMenu=function(){if(!(this.menu&&this.menuId))return;if(document.getElementById(this.menuId).style.display!="none")return;this.menuHidden=!1;if(this._doOnAttachMenu)this._doOnAttachMenu("show");document.getElementById(this.menuId).style.display=""};this.obj.hideMenu=function(){if(!(this.menu&&this.menuId))return;if(document.getElementById(this.menuId).style.display=="none")return;document.getElementById(this.menuId).style.display="none";this.menuHidden=!0;if(this._doOnAttachMenu)this._doOnAttachMenu("hide")};this.obj.showToolbar=function(){if(!(this.toolbar&&this.toolbarId))return;if(document.getElementById(this.toolbarId).style.display!="none")return;this.toolbarHidden=!1;if(this._doOnAttachToolbar)this._doOnAttachToolbar("show");document.getElementById(this.toolbarId).style.display=""};this.obj.hideToolbar=function(){if(!(this.toolbar&&this.toolbarId))return;if(document.getElementById(this.toolbarId).style.display=="none")return;this.toolbarHidden=!0;document.getElementById(this.toolbarId).style.display="none";if(this._doOnAttachToolbar)this._doOnAttachToolbar("hide")};this.obj.showStatusBar=function(){if(!(this.sb&&this.sbId))return;if(document.getElementById(this.sbId).style.display!="none")return;this.sbHidden=!1;if(this._doOnAttachStatusBar)this._doOnAttachStatusBar("show");document.getElementById(this.sbId).style.display=""};this.obj.hideStatusBar=function(){if(!(this.sb&&this.sbId))return;if(document.getElementById(this.sbId).style.display=="none")return;this.sbHidden=!0;document.getElementById(this.sbId).style.display="none";if(this._doOnAttachStatusBar)this._doOnAttachStatusBar("hide")};this.obj._dhxContDestruct=function(){this.detachMenu();this.detachToolbar();this.detachStatusBar();this.detachObject(!0);if(this.layout)this.layout.unlaod();if(this.accordion)this.accordion.unlaod();if(this.grid)this.grid.destructor();if(this.tree)this.tree.destructor();if(this.tabbar)this.tabbar.destructor();this.layout=null;this.accordion=null;this.grid=null;this.tree=null;this.tabbar=null;this.adjust=null;this._genStr=null;this.setMinContentSize=null;this.moveContentTo=null;this.adjustContent=null;this.coverBlocker=null;this.showCoverBlocker=null;this.hideCoverBlocker=null;this.updateNestedObjects=null;this.attachStatusBar=null;this.detachStatusBar=null;this.attachMenu=null;this.detachMenu=null;this.attachToolbar=null;this.detachToolbar=null;this.attachGrid=this.attachTree=this.attachTabbar=this.attachFolders=this.attachAccordion=this.attachLayout=this.attachEditor=this.attachObject=this.detachObject=this.appendObject=this.attachHTMLString=this.attachURL=this._attachContent=this.attachScheduler=null;this.showMenu=null;this.hideMenu=null;this.showToolbar=null;this.hideToolbar=null;this.showStatusBar=null;this.hideStatusBar=null;while(this.dhxcont.mainCont.childNodes.length>0)this.dhxcont.mainCont.removeChild(this.dhxcont.mainCont.childNodes[0]);this.dhxcont.mainCont.innerHTML="";this.dhxcont.mainCont=null;try{delete this.dhxcont.mainCont}catch(e){}
while(this.dhxcont.childNodes.length>0)this.dhxcont.removeChild(this.dhxcont.childNodes[0]);this.dhxcont.innerHTML="";this.dhxcont=null;try{delete this["dhxcont"]}catch(e){}}};function dhtmlXMenuObject(baseId,skin){var main_self=this;this.addBaseIdAsContextZone=null;this.isDhtmlxMenuObject=!0;this._unloaded=!1;this.skin=(skin!=null?skin:"dhx_skyblue");this.imagePath="";this._isIE6=!1;if(_isIE){this._isIE6=(window.XMLHttpRequest==null?true:!1)}
if(baseId==null){this.base=document.body}else{if(document.getElementById(baseId)!=null){this.base=document.getElementById(baseId);while(this.base.childNodes.length>0){this.base.removeChild(this.base.childNodes[0])}
this.base.className+=" dhtmlxMenu_"+this.skin+"_Middle dir_left";this.base._autoSkinUpdate=!0;this.addBaseIdAsContextZone=baseId;this.base.onselectstart=function(e){e=e||event;e.returnValue=!1;return!1};this.base.oncontextmenu=function(e){e=e||event;e.returnValue=!1;return!1}}else{this.base=document.body}}
this.topId="dhxWebMenuTopId";if(!this.extendedModule){var t=function(){alert("dhtmlxmenu_ext.js required")};var extMethods=["setItemEnabled","setItemDisabled","isItemEnabled","_changeItemState","getItemText","setItemText","loadFromHTML","hideItem","showItem","isItemHidden","_changeItemVisible","setUserData","getUserData","setOpenMode","setWebModeTimeout","enableDynamicLoading","_updateLoaderIcon","getItemImage","setItemImage","clearItemImage","setAutoShowMode","setAutoHideMode","setContextMenuHideAllMode","getContextMenuHideAllMode","setVisibleArea","setTooltip","getTooltip","setHotKey","getHotKey","setItemSelected","setTopText","setRTL","setAlign","setHref","clearHref","getCircuit","_clearAllSelectedSubItemsInPolygon","_checkArrowsState","_addUpArrow","_addDownArrow","_removeUpArrow","_removeDownArrow","_isArrowExists","_doScrollUp","_doScrollDown","_countPolygonItems","setOverflowHeight","_getRadioImgObj","_setRadioState","_radioOnClickHandler","getRadioChecked","setRadioChecked","addRadioButton","_getCheckboxState","_setCheckboxState","_readLevel","_updateCheckboxImage","_checkboxOnClickHandler","setCheckboxState","getCheckboxState","addCheckbox","serialize"];for(var q=0;q<extMethods.length;q++)this[extMethods[q]]=t;extMethods=null}
this.fixedPosition=!1;this.menuSelected=-1;this.menuLastClicked=-1;this.idPrefix="";this.itemTagName="item";this.itemTextTagName="itemtext";this.userDataTagName="userdata";this.itemTipTagName="tooltip";this.itemHotKeyTagName="hotkey";this.itemHrefTagName="href";this.dirTopLevel="bottom";this.dirSubLevel="right";this.menuX1=null;this.menuX2=null;this.menuY1=null;this.menuY2=null;this.menuMode="web";this.menuTimeoutMsec=400;this.menuTimeoutHandler=null;this.idPull={};this.itemPull={};this.userData={};this.radio={};this._rtl=!1;this._align="left";this.menuTouched=!1;this.zIndInit=1200;this.zInd=this.zIndInit;this.zIndStep=50;this.menuModeTopLevelTimeout=!0;this.menuModeTopLevelTimeoutTime=200;this.topLevelItemPaddingIconExists=27;this.topLevelItemPaddingIconNotExists=6;this._topLevelBottomMargin=1;this._topLevelRightMargin=0;this._topLevelOffsetLeft=1;this._arrowFFFix=(_isIE?(document.compatMode=="BackCompat"?0:-4):-4);this.setSkin=function(skin){var oldSkin=this.skin;this.skin=skin;switch(this.skin){case "standard":this._topLevelBottomMargin=1;this._topLevelOffsetLeft=0;this._arrowFFFix=(_isIE?(document.compatMode=="BackCompat"?0:(this._isIE6?-5:-4)):-4);break;case "clear_blue":case "clear_green":case "clear_silver":this._topLevelBottomMargin=3;this._topLevelOffsetLeft=0;this._arrowFFFix=(_isIE?(document.compatMode=="BackCompat"?0:-4):-4);break;case "aqua_orange":case "aqua_sky":case "aqua_dark":this._topLevelBottomMargin=1;this._topLevelOffsetLeft=0;this._arrowFFFix=(_isIE?(document.compatMode=="BackCompat"?0:-2):-2);break;case "modern_blue":case "modern_red":case "modern_black":this._topLevelBottomMargin=3;this._topLevelOffsetLeft=0;this._arrowFFFix=(_isIE?(document.compatMode=="BackCompat"?0:-2):-2);break;case "glassy_blue":this._topLevelBottomMargin=0;this._topLevelOffsetLeft=0;this._arrowFFFix=(_isIE?(document.compatMode=="BackCompat"?0:-4):-4);break;case "dhx_black":case "dhx_blue":case "dhx_skyblue":this._topLevelBottomMargin=2;this._topLevelRightMargin=1;this._topLevelOffsetLeft=1;this._arrowFFFix=(_isIE?(document.compatMode=="BackCompat"?0:-4):-4);break}
if(this.base._autoSkinUpdate){this.base.className=this.base.className.replace("dhtmlxMenu_"+oldSkin+"_Middle","")+" dhtmlxMenu_"+this.skin+"_Middle"}
for(var a in this.idPull){this.idPull[a].className=String(this.idPull[a].className).replace(oldSkin,this.skin)}};this.setSkin(this.skin);this.dLoad=!1;this.dLoadUrl="";this.dLoadSign="?";this.loaderIcon=!1;this.limit=0;this._scrollUpTM=null;this._scrollUpTMTime=20;this._scrollUpTMStep=3;this._scrollDownTM=null;this._scrollDownTMTime=20;this._scrollDownTMStep=3;this.context=!1;this.contextZones={};this.contextMenuZoneId=!1;this.contextAutoShow=!0;this.contextAutoHide=!0;this.contextHideAllMode=!0;this.sxDacProc=null;this.dacSpeed=10;this.dacCycles=[];for(var q=0;q<10;q++){this.dacCycles[q]=q}
this.dacSpeedIE=10;this.dacCyclesIE=[];for(var q=0;q<10;q++){this.dacCyclesIE[q]=q}
this._enableDacSupport=function(dac){this.sxDacProc=dac};this._selectedSubItems=[];this._openedPolygons=[];this._addSubItemToSelected=function(item,polygon){var t=!0;for(var q=0;q<this._selectedSubItems.length;q++){if((this._selectedSubItems[q][0]==item)&&(this._selectedSubItems[q][1]==polygon)){t=!1}}
if(t==!0){this._selectedSubItems.push([item,polygon])}
return t};this._removeSubItemFromSelected=function(item,polygon){var m=[];var t=!1;for(var q=0;q<this._selectedSubItems.length;q++){if((this._selectedSubItems[q][0]==item)&&(this._selectedSubItems[q][1]==polygon)){t=!0}else{m[m.length]=this._selectedSubItems[q]}}
if(t==!0){this._selectedSubItems=m}
return t};this._getSubItemToDeselectByPolygon=function(polygon){var m=[];for(var q=0;q<this._selectedSubItems.length;q++){if(this._selectedSubItems[q][1]==polygon){m[m.length]=this._selectedSubItems[q][0];m=m.concat(this._getSubItemToDeselectByPolygon(this._selectedSubItems[q][0]));var t=!0;for(var w=0;w<this._openedPolygons.length;w++){if(this._openedPolygons[w]==this._selectedSubItems[q][0]){t=!1}}
if(t==!0){this._openedPolygons[this._openedPolygons.length]=this._selectedSubItems[q][0]}
this._selectedSubItems[q][0]=-1;this._selectedSubItems[q][1]=-1}}
return m};this._hidePolygon=function(id){if(this.idPull["polygon_"+id]!=null){if((this.sxDacProc!=null)&&(this.idPull["sxDac_"+id]!=null)){this.idPull["sxDac_"+id]._hide()}else{if(this.idPull["polygon_"+id].style.display=="none")return;this.idPull["polygon_"+id].style.display="none";if(this.idPull["arrowup_"+id]!=null){this.idPull["arrowup_"+id].style.display="none"}
if(this.idPull["arrowdown_"+id]!=null){this.idPull["arrowdown_"+id].style.display="none"}
this._updateItemComplexState(id,!0,!1);if(this._isIE6){if(this.idPull["polygon_"+id+"_ie6cover"]!=null){this.idPull["polygon_"+id+"_ie6cover"].style.display="none"}}
id=String(id).replace(this.idPrefix,"");if(id==this.topId)id=null;this.callEvent("onHide",[id])}}};this._showPolygon=function(id,openType){var itemCount=this._countVisiblePolygonItems(id);if(itemCount==0)return;var pId="polygon_"+id;if((this.idPull[pId]!=null)&&(this.idPull[id]!=null)){if(this.menuModeTopLevelTimeout&&this.menuMode=="web"&&!this.context){if(!this.idPull[id]._mouseOver&&openType==this.dirTopLevel)return}
if(!this.fixedPosition)this._autoDetectVisibleArea();var arrUpH=0;var arrDownH=0;var arrowUp=null;var arrowDown=null;if(this.limit>0&&this.limit<itemCount){var auId="arrowup_"+id;var adId="arrowdown_"+id;if(this.idPull["arrowup_"+id]==null)this._addUpArrow(String(id).replace(this.idPrefix,""));if(this.idPull["arrowdown_"+id]==null)this._addDownArrow(String(id).replace(this.idPrefix,""));arrowUp=this.idPull["arrowup_"+id];arrowUp.style.visibility="hidden";arrowUp.style.display="";arrowUp.style.zIndex=this.zInd;arrUpH=arrowUp.offsetHeight;arrowDown=this.idPull["arrowdown_"+id];arrowDown.style.visibility="hidden";arrowDown.style.display="";arrowDown.style.zIndex=this.zInd;arrDownH=arrowDown.offsetHeight}
this.idPull[pId].style.visibility="hidden";this.idPull[pId].style.left="0px";this.idPull[pId].style.top="0px";this.idPull[pId].style.display="";this.idPull[pId].style.zIndex=this.zInd;if(this.limit>0){if(this.limit<itemCount){this.idPull[pId].style.height=this.idPull[pId].childNodes[0].offsetHeight*this.limit+"px";this.idPull[pId].scrollTop=0}else{this.idPull[pId].style.height=""}}
this.zInd+=this.zIndStep;if(this.itemPull[id]!=null){var parPoly="polygon_"+this.itemPull[id].parent}else if(this.context){var parPoly=this.idPull[this.idPrefix+this.topId]}
var srcX=(this.idPull[id].tagName!=null?getAbsoluteLeft(this.idPull[id]):this.idPull[id][0]);var srcY=(this.idPull[id].tagName!=null?getAbsoluteTop(this.idPull[id]):this.idPull[id][1]);var srcW=(this.idPull[id].tagName!=null?this.idPull[id].offsetWidth:0);var srcH=(this.idPull[id].tagName!=null?this.idPull[id].offsetHeight+arrUpH+arrDownH:0);var x=0;var y=0;var w=this.idPull[pId].offsetWidth;var h=this.idPull[pId].offsetHeight;if(openType=="bottom"){if(this._rtl){x=srcX+(srcW!=null?srcW:0)-w}else{if(this._align=="right"){x=srcX+srcW-w}else{x=srcX-1+(openType==this.dirTopLevel?this._topLevelRightMargin:0)}}
y=srcY-1+srcH-arrUpH-arrDownH+this._topLevelBottomMargin}
if(openType=="right"){x=srcX+srcW-1;y=srcY+2}
if(openType=="left"){x=srcX-this.idPull[pId].offsetWidth+2;y=srcY+2}
if(openType=="top"){x=srcX-1;y=srcY-h+2}
if(this.fixedPosition){var mx=65536;var my=65536}else{var mx=(this.menuX2!=null?this.menuX2:0);var my=(this.menuY2!=null?this.menuY2:0);if(mx==0){if(window.innerWidth){mx=window.innerWidth;my=window.innerHeight}else{mx=document.body.offsetWidth;my=document.body.scrollHeight}}}
if(x+w>mx&&!this._rtl){x=srcX-w+2}
if(x<this.menuX1&&this._rtl){x=srcX+srcW-2}
if(x<0){x=0}
if(y+h>my&&this.menuY2!=null){y=srcY+srcH-h+2;if(this.itemPull[id]!=null&&!this.context){if(this.itemPull[id].parent==this.idPrefix+this.topId)y=y-this.base.offsetHeight}}
this.idPull[pId].style.left=x+"px";this.idPull[pId].style.top=y+arrUpH+"px";if((this.sxDacProc!=null)&&(this.idPull["sxDac_"+id]!=null)){this.idPull["sxDac_"+id]._show()}else{this.idPull[pId].style.visibility="";if(this.limit>0&&this.limit<itemCount){arrowUp.style.left=x+"px";arrowUp.style.top=y+"px";arrowUp.style.width=w+this._arrowFFFix+"px";arrowUp.style.visibility="";arrowDown.style.left=x+"px";arrowDown.style.top=y+arrUpH+h+"px";arrowDown.style.width=w+this._arrowFFFix+"px";arrowDown.style.visibility="";this._checkArrowsState(id)}
if(this._isIE6){var pIdIE6=pId+"_ie6cover";if(this.idPull[pIdIE6]==null){var ifr=document.createElement("IFRAME");ifr.className="dhtmlxMenu_IE6CoverFix_"+this.skin;ifr.frameBorder=0;ifr.setAttribute("src","javascript:false;");document.body.insertBefore(ifr,document.body.firstChild);this.idPull[pIdIE6]=ifr}
this.idPull[pIdIE6].style.left=this.idPull[pId].style.left;this.idPull[pIdIE6].style.top=this.idPull[pId].style.top;this.idPull[pIdIE6].style.width=this.idPull[pId].offsetWidth+"px";this.idPull[pIdIE6].style.height=this.idPull[pId].offsetHeight+"px";this.idPull[pIdIE6].style.zIndex=this.idPull[pId].style.zIndex-1;this.idPull[pIdIE6].style.display=""}
id=String(id).replace(this.idPrefix,"");if(id==this.topId)id=null;this.callEvent("onShow",[id])}}};this._redistribSubLevelSelection=function(id,parentId){while(this._openedPolygons.length>0){this._openedPolygons.pop()}
var i=this._getSubItemToDeselectByPolygon(parentId);this._removeSubItemFromSelected(-1,-1);for(var q=0;q<i.length;q++){if((this.idPull[i[q]]!=null)&&(i[q]!=id)){if(this.itemPull[i[q]].state=="enabled"){this.idPull[i[q]].className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Item_Normal"}}}
for(var q=0;q<this._openedPolygons.length;q++){if(this._openedPolygons[q]!=parentId){this._hidePolygon(this._openedPolygons[q])}}
if(this.itemPull[id].state=="enabled"){this.idPull[id].className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Item_Selected";if(this.itemPull[id].complex&&this.dLoad&&(this.itemPull[id].loaded=="no")){if(this.loaderIcon==!0){this._updateLoaderIcon(id,!0)}
var xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window);this.itemPull[id].loaded="get";this.callEvent("onXLS",[]);xmlLoader.loadXML(this.dLoadUrl+this.dLoadSign+"action=loadMenu&parentId="+id.replace(this.idPrefix,"")+"&etc="+new Date().getTime())}
if(this.itemPull[id].complex||(this.dLoad&&(this.itemPull[id].loaded=="yes"))){if((this.itemPull[id].complex)&&(this.idPull["polygon_"+id]!=null)){this._updateItemComplexState(id,!0,!0);this._showPolygon(id,this.dirSubLevel)}}
this._addSubItemToSelected(id,parentId);this.menuSelected=id}};this._doOnClick=function(id,type,casState){this.menuLastClicked=id;if(this.itemPull[this.idPrefix+id].href_link!=null){var form=document.createElement("FORM");form.action=this.itemPull[this.idPrefix+id].href_link;if(this.itemPull[this.idPrefix+id].href_target!=null){form.target=this.itemPull[this.idPrefix+id].href_target}
form.style.display="none";document.body.appendChild(form);form.submit();if(form!=null){document.body.removeChild(form);form=null}
return}
if(type.charAt(0)=="c")return;if(type.charAt(1)=="d")return;if(type.charAt(2)=="s")return;if(typeof this.itemPull[this.idPrefix+id].cfunc=='function'){if(this.contextID)this.contextMenuZoneId=this.contextID;if(this._isContextMenuVisible()&&this.contextAutoHide)this._hideContextMenu();this.itemPull[this.idPrefix+id].cfunc(id,this.contextMenuZoneId,casState)}
if(this.checkEvent("onClick")){this._clearAndHide();if(this._isContextMenuVisible()&&this.contextAutoHide)this._hideContextMenu();this.callEvent("onClick",[id,this.contextMenuZoneId,casState])}else{if((type.charAt(1)=="d")||(this.menuMode=="win"&&type.charAt(2)=="t"))return;this._clearAndHide();if(this._isContextMenuVisible()&&this.contextAutoHide)this._hideContextMenu()}};this._doOnTouchMenu=function(id){if(this.menuTouched==!1){this.menuTouched=!0;if(this.checkEvent("onTouch")){this.callEvent("onTouch",[id])}}};this._searchMenuNode=function(node,menu){var m=[];for(var q=0;q<menu.length;q++){if(typeof(menu[q])=="object"){if(menu[q].length==5){if(typeof(menu[q][0])!="object"){if((menu[q][0].replace(this.idPrefix,"")==node)&&(q==0)){m=menu}}}
var j=this._searchMenuNode(node,menu[q]);if(j.length>0){m=j}}}
return m};this._getMenuNodes=function(node){var m=[];for(var a in this.itemPull){if(this.itemPull[a].parent==node){m[m.length]=a}}
return m};this._genStr=function(w){var s="";var z="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var q=0;q<w;q++){s=s+z.charAt(Math.round(Math.random()*z.length))}
return s};this.getItemType=function(id){id=this.idPrefix+id;if(this.itemPull[id]==null){return null}
return this.itemPull[id].type};this.forEachItem=function(handler){for(var a in this.itemPull){handler(String(a).replace(this.idPrefix,""))}};this._clearAndHide=function(){main_self.menuSelected=-1;main_self.menuLastClicked=-1;while(main_self._openedPolygons.length>0){main_self._openedPolygons.pop()}
for(var q=0;q<main_self._selectedSubItems.length;q++){var id=main_self._selectedSubItems[q][0];if(main_self.idPull[id]!=null){if(main_self.itemPull[id].state=="enabled"){if(main_self.idPull[id].className=="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_Item_Selected"){main_self.idPull[id].className="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_Item_Normal"}
if(main_self.idPull[id].className=="dhtmlxMenu_"+main_self.skin+"_TopLevel_Item_Selected"){if(main_self.itemPull[id].cssNormal!=null){main_self.idPull[id].className=main_self.itemPull[id].cssNormal}else{main_self.idPull[id].className="dhtmlxMenu_"+main_self.skin+"_TopLevel_Item_Normal"}}}}
main_self._hidePolygon(id)}
main_self.menuTouched=!1;if(main_self.context){if(main_self.contextHideAllMode){main_self._hidePolygon(main_self.idPrefix+main_self.topId);main_self.zInd=main_self.zIndInit}else{main_self.zInd=main_self.zIndInit+main_self.zIndStep}}};this._doOnLoad=function(){};this._buildMenu=function(t,parentId){var u=0;for(var q=0;q<t.childNodes.length;q++){if(t.childNodes[q].tagName==this.itemTagName){var r=t.childNodes[q];var item={};item.id=this.idPrefix+(r.getAttribute("id")||this._genStr(24));item.title=r.getAttribute("text")||"";item.imgen=r.getAttribute("img")||"";item.imgdis=r.getAttribute("imgdis")||"";item.tip="";item.hotkey="";if(r.getAttribute("cssNormal")!=null){item.cssNormal=r.getAttribute("cssNormal")}
item.type=r.getAttribute("type")||"item";if(item.type=="checkbox"){item.checked=(r.getAttribute("checked")!=null);item.imgen="chbx_"+(item.checked?"1":"0");item.imgdis="chbxdis_"+(item.checked?"1":"0")}
if(item.type=="radio"){item.checked=(r.getAttribute("checked")!=null);item.imgen="rdbt_"+(item.checked?"1":"0");item.imgdis="rdbtdis_"+(item.checked?"1":"0");item.group=r.getAttribute("group")||this._genStr(24);if(this.radio[item.group]==null){this.radio[item.group]=[]}
this.radio[item.group][this.radio[item.group].length]=item.id}
item.state=(r.getAttribute("enabled")!=null||r.getAttribute("disabled")!=null?(r.getAttribute("enabled")=="false"||r.getAttribute("disabled")=="true"?"disabled":"enabled"):"enabled");item.parent=(parentId!=null?parentId:this.idPrefix+this.topId);item.complex=(this.dLoad?(r.getAttribute("complex")!=null?true:!1):(this._buildMenu(r,item.id)>0));if(this.dLoad&&item.complex){item.loaded="no"}
this.itemPull[item.id]=item;for(var w=0;w<r.childNodes.length;w++){var tagNm=r.childNodes[w].tagName;if(tagNm!=null){tagNm=tagNm.toLowerCase()}
if(tagNm==this.userDataTagName){var d=r.childNodes[w];if(d.getAttribute("name")!=null){this.userData[item.id+"_"+d.getAttribute("name")]=(d.firstChild.nodeValue!=null?d.firstChild.nodeValue:"")}}
if(tagNm==this.itemTextTagName){item.title=r.childNodes[w].firstChild.nodeValue}
if(tagNm==this.itemTipTagName){item.tip=r.childNodes[w].firstChild.nodeValue}
if(tagNm==this.itemHotKeyTagName){item.hotkey=r.childNodes[w].firstChild.nodeValue}
if(tagNm==this.itemHrefTagName&&item.type=="item"){item.href_link=r.childNodes[w].firstChild.nodeValue;if(r.childNodes[w].getAttribute("target")!=null){item.href_target=r.childNodes[w].getAttribute("target")}}}
u++}}
return u};this._showSubLevelItem=function(id,back){if(document.getElementById("arrow_"+this.idPrefix+id)!=null){document.getElementById("arrow_"+this.idPrefix+id).style.display=(back?"none":"")}
if(document.getElementById("image_"+this.idPrefix+id)!=null){document.getElementById("image_"+this.idPrefix+id).style.display=(back?"none":"")}
if(document.getElementById(this.idPrefix+id)!=null){document.getElementById(this.idPrefix+id).style.display=(back?"":"none")}};this._hideSubLevelItem=function(id){this._showSubLevelItem(id,!0)};this.idPrefix=this._genStr(12);dhtmlxEvent(document.body,"click",function(e){if(main_self._unloaded)return;if(main_self.context){e=e||event;if(!_isOpera){if(main_self.contextAutoHide)main_self._hideContextMenu()}else{if(main_self.contextAutoHide&&!e.ctrlKey)main_self._hideContextMenu()}}else{main_self._clearAndHide()}});dhtmlxEvent(document.body,"contextmenu",function(e){if(main_self._unloaded)return;e=e||event;e.cancelBubble=!0;var t=(e.srcElement||e.target).className;if(t.search("dhtmlxMenu")!=-1&&t.search("SubLevelArea")!=-1)return;var toHide=!0;var testZone=e.target||e.srcElement;if(testZone.id!=null){if(main_self.isContextZone(testZone.id)){toHide=!1}}
if(toHide)main_self.hideContextMenu()});this._UID=this._genStr(32);dhtmlxMenuObjectLiveInstances[this._UID]=this;dhtmlxEventable(this);return this}
dhtmlXMenuObject.prototype.init=function(){if(this._isInited==!0){return}
if(this.dLoad){this.callEvent("onXLS",[]);this._xmlLoader.loadXML(this.dLoadUrl+this.dLoadSign+"action=loadMenu&etc="+new Date().getTime())}else{this._initTopLevelMenu();this._isInited=!0}};dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(id){var count=0;for(var a in this.itemPull){var par=this.itemPull[a].parent;var tp=this.itemPull[a].type;if(this.idPull[a]!=null){if(par==id&&(tp=="item"||tp=="radio"||tp=="checkbox")&&this.idPull[a].style.display!="none"){count++}}}
return count};dhtmlXMenuObject.prototype._redefineComplexState=function(id){if(this.idPrefix+this.topId==id){return}
if((this.idPull["polygon_"+id]!=null)&&(this.idPull[id]!=null)){var u=this._countVisiblePolygonItems(id);if((u>0)&&(!this.itemPull[id].complex)){this._updateItemComplexState(id,!0,!1)}
if((u==0)&&(this.itemPull[id].complex)){this._updateItemComplexState(id,!1,!1)}}};dhtmlXMenuObject.prototype._updateItemComplexState=function(id,state,over){if((!this.context)&&(this._getItemLevelType(id.replace(this.idPrefix,""))=="TopLevel")){this.itemPull[id].complex=state;return}
if((this.idPull[id]==null)||(this.itemPull[id]==null)){return}
this.itemPull[id].complex=state;var arrowObj=null;if(id==this.idPrefix+this.topId){return}
for(var q=0;q<this.idPull[id].childNodes.length;q++){var node=this.idPull[id].childNodes[q];if(node.id!=null){if(node.id=="arrow_"+id){arrowObj=node}}}
if(this.itemPull[id].complex){if(arrowObj==null){arrowObj=document.createElement("DIV");var arw="arrow"+(this._rtl?"r":"l")+"_"+(this.itemPull[id].state=="enabled"?"en":"dis");arrowObj.className="dhtmlxMenu_SubLevelArea_Item_Arrow "+arw;arrowObj.id="arrow_"+id;this.idPull[id].appendChild(arrowObj)}
if(this.dLoad&&(this.itemPull[id].loaded=="get")&&this.loaderIcon){if(arrowObj.className!="dhtmlxMenu_SubLevelArea_Item_Arrow_Loading")arrowObj.className="dhtmlxMenu_SubLevelArea_Item_Arrow_Loading"}else{var genName="arrow"+(this._rtl?"r":"l")+"_"+(this.itemPull[id].state=="enabled"?(over?"over":"en"):"dis");arrowObj.className="dhtmlxMenu_SubLevelArea_Item_Arrow "+genName}
return}
if((!this.itemPull[id].complex)&&(arrowObj!=null)){this.idPull[id].removeChild(arrowObj);if(this.itemPull[id].hotkey_backup!=null&&this.setHotKey){this.setHotKey(id.replace(this.idPrefix,""),this.itemPull[id].hotkey_backup)}}};dhtmlXMenuObject.prototype._getItemLevelType=function(id){return(this.itemPull[this.idPrefix+id].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea")};dhtmlXMenuObject.prototype._redistribTopLevelPositions=function(){if(this.context)return;var w=this._topLevelOffsetLeft;if(this._align=="left"){for(var q=0;q<this.base.childNodes.length;q++){if(this.base.childNodes[q].tagName=="DIV"){if(String(this.base.childNodes[q].className).search("TopLevel_Text")==-1){if(!this._rtl){this.base.childNodes[q].style.right="";this.base.childNodes[q].style.left=w+"px"}else{this.base.childNodes[q].style.left="";this.base.childNodes[q].style.right=w+"px"}
w+=this.base.childNodes[q].offsetWidth;if(this.skin=="dhx_skyblue"&&String(this.base.childNodes[q].className).search("Separator")==-1)w+=2}}}}else{for(var q=this.base.childNodes.length-1;q>=0;q--){if(String(this.base.childNodes[q].className).search("TopLevel_Text")==-1){this.base.childNodes[q].style.left="";this.base.childNodes[q].style.right=w+"px";w+=this.base.childNodes[q].offsetWidth}}}};dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(id,parent){var i=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var q=0;q<i.length;q++){if(i[q]!=id){this._hidePolygon(i[q])}
if((this.idPull[i[q]]!=null)&&(i[q]!=id)){this.idPull[i[q]].className=this.idPull[i[q]].className.replace(/Selected/g,"Normal")}}
if(this.itemPull[this.idPrefix+id].state=="enabled"){this.idPull[this.idPrefix+id].className="dhtmlxMenu_"+this.skin+"_TopLevel_Item_Selected";this._addSubItemToSelected(this.idPrefix+id,"parent");this.menuSelected=(this.menuMode=="win"?(this.menuSelected!=-1?id:this.menuSelected):id);if((this.itemPull[this.idPrefix+id].complex)&&(this.menuSelected!=-1)){this._showPolygon(this.idPrefix+id,this.dirTopLevel)}}};dhtmlXMenuObject.prototype._initTopLevelMenu=function(){this.dirTopLevel="bottom";this.dirSubLevel=(this._rtl?"left":"right");if(this.context){this.idPull[this.idPrefix+this.topId]=[0,0];this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId);this._attachEvents()}else{var m=this._getMenuNodes(this.idPrefix+this.topId);for(var q=0;q<m.length;q++){if(this.itemPull[m[q]].type=="item")this._renderToplevelItem(m[q],null);if(this.itemPull[m[q]].type=="separator")this._renderSeparator(m[q],null)}}};dhtmlXMenuObject.prototype._attachEvents=function(){var main_self=this;dhtmlxEvent(document.body,"click",function(e){if(main_self._unloaded)return;e=e||event;if(_isOpera&&e.ctrlKey==!0)return;if(main_self._isContextMenuVisible()&&main_self.contextAutoHide)main_self._hideContextMenu()})};dhtmlXMenuObject.prototype._renderToplevelItem=function(id,pos){var main_self=this;var m=document.createElement("DIV");m.id=id;if(this.itemPull[id].state=="enabled"&&this.itemPull[id].cssNormal!=null){m.className=this.itemPull[id].cssNormal}else{m.className="dhtmlxMenu_"+this.skin+"_TopLevel_Item_"+(this.itemPull[id].state=="enabled"?"Normal":"Disabled")}
m.innerHTML=this.itemPull[id].title;if(this.itemPull[id].tip.length>0){m.title=this.itemPull[id].tip}
if((this.itemPull[id].imgen!="")||(this.itemPull[id].imgdis!="")){var imgTop=this.itemPull[id][(this.itemPull[id].state=="enabled")?"imgen":"imgdis"];if(imgTop){var imgTop="<img id='image_"+id+"' src='"+this.imagePath+imgTop+"' class='dhtmlxMenu_TopLevel_Item_Icon_"+(this._rtl?"right":"left")+"' border='0'>";m.innerHTML=imgTop+m.innerHTML;m.style.paddingLeft=this.topLevelItemPaddingIconExists+"px"}}
m.onselectstart=function(e){e=e||event;e.returnValue=!1;return!1};m.oncontextmenu=function(e){e=e||event;e.returnValue=!1;return!1};if(!this._rtl){var w=0;for(var q=0;q<this.base.childNodes.length;q++){if(String(this.base.childNodes[q].className).search("TopLevel_Text")==-1){if(!isNaN(this.base.childNodes[q].offsetWidth)){w=w+this.base.childNodes[q].offsetWidth}}}
m.style.left=w+"px"}
if(pos!=null){pos++;if(pos<0){pos=0}if(pos>this.base.childNodes.length-1){pos=null}}
if(pos!=null){this.base.insertBefore(m,this.base.childNodes[pos]);this._redistribTopLevelPositions()}else{this.base.appendChild(m);if(this._rtl){this._redistribTopLevelPositions()}}
this.idPull[m.id]=m;if(this.itemPull[id].complex&&(!this.dLoad)){this._addSubMenuPolygon(this.itemPull[id].id,this.itemPull[id].id)}
m.onmouseover=function(){if(main_self.menuMode=="web"){window.clearTimeout(main_self.menuTimeoutHandler)}
var i=main_self._getSubItemToDeselectByPolygon("parent");main_self._removeSubItemFromSelected(-1,-1);for(var q=0;q<i.length;q++){if(i[q]!=this.id){main_self._hidePolygon(i[q])}
if((main_self.idPull[i[q]]!=null)&&(i[q]!=this.id)){if(main_self.itemPull[i[q]].cssNormal!=null){main_self.idPull[i[q]].className=main_self.itemPull[i[q]].cssNormal}else{main_self.idPull[i[q]].className=main_self.idPull[i[q]].className.replace(/Selected/g,"Normal")}}}
if(main_self.itemPull[this.id].state=="enabled"){this.className="dhtmlxMenu_"+main_self.skin+"_TopLevel_Item_Selected";main_self._addSubItemToSelected(this.id,"parent");main_self.menuSelected=(main_self.menuMode=="win"?(main_self.menuSelected!=-1?this.id:main_self.menuSelected):this.id);if(main_self.dLoad&&(main_self.itemPull[this.id].loaded=="no")){if(main_self.menuModeTopLevelTimeout&&main_self.menuMode=="web"&&!main_self.context){this._mouseOver=!0;this._dynLoadTM=new Date().getTime()}
var xmlLoader=new dtmlXMLLoaderObject(main_self._xmlParser,window);main_self.itemPull[this.id].loaded="get";main_self.callEvent("onXLS",[]);xmlLoader.loadXML(main_self.dLoadUrl+main_self.dLoadSign+"action=loadMenu&parentId="+this.id.replace(main_self.idPrefix,"")+"&etc="+new Date().getTime())}
if((!main_self.dLoad)||(main_self.dLoad&&(main_self.itemPull[this.id].loaded=="yes"))){if((main_self.itemPull[this.id].complex)&&(main_self.menuSelected!=-1)){if(main_self.menuModeTopLevelTimeout&&main_self.menuMode=="web"&&!main_self.context){this._mouseOver=!0;var showItemId=this.id;this._menuOpenTM=window.setTimeout(function(){main_self._showPolygon(showItemId,main_self.dirTopLevel)},main_self.menuModeTopLevelTimeoutTime)}else{main_self._showPolygon(this.id,main_self.dirTopLevel)}}}}
main_self._doOnTouchMenu(this.id.replace(main_self.idPrefix,""))};m.onmouseout=function(){if(!((main_self.itemPull[this.id].complex)&&(main_self.menuSelected!=-1))&&(main_self.itemPull[this.id].state=="enabled")){if(main_self.itemPull[this.id].cssNormal!=null){m.className=main_self.itemPull[this.id].cssNormal}else{m.className="dhtmlxMenu_"+main_self.skin+"_TopLevel_Item_Normal"}}
if(main_self.menuMode=="web"){window.clearTimeout(main_self.menuTimeoutHandler);main_self.menuTimeoutHandler=window.setTimeout(function(){main_self._clearAndHide()},main_self.menuTimeoutMsec,"JavaScript")}
if(main_self.menuModeTopLevelTimeout&&main_self.menuMode=="web"&&!main_self.context){this._mouseOver=!1;window.clearTimeout(this._menuOpenTM)}};m.onclick=function(e){if(main_self.menuMode=="web"){window.clearTimeout(main_self.menuTimeoutHandler)}
if(main_self.menuMode!="web"&&main_self.itemPull[this.id].state=="disabled"){return}
e=e||event;e.cancelBubble=!0;e.returnValue=!1;if(main_self.menuMode=="win"){if(main_self.itemPull[this.id].complex){if(main_self.menuSelected==this.id){main_self.menuSelected=-1;var s=!1}else{main_self.menuSelected=this.id;var s=!0}
if(s){main_self._showPolygon(this.id,main_self.dirTopLevel)}else{main_self._hidePolygon(this.id)}}}
var tc=(main_self.itemPull[this.id].complex?"c":"-");var td=(main_self.itemPull[this.id].state!="enabled"?"d":"-");var cas={"ctrl":e.ctrlKey,"alt":e.altKey,"shift":e.shiftKey};main_self._doOnClick(this.id.replace(main_self.idPrefix,""),tc+td+"t",cas);return!1}};dhtmlXMenuObject.prototype.setImagePath=function(){};dhtmlXMenuObject.prototype.setIconsPath=function(path){this.imagePath=path};dhtmlXMenuObject.prototype.setIconPath=dhtmlXMenuObject.prototype.setIconsPath;dhtmlXMenuObject.prototype._updateItemImage=function(id,levelType){var imgObj=null;for(var q=0;q<this.idPull[this.idPrefix+id].childNodes.length;q++){var node=this.idPull[this.idPrefix+id].childNodes[q];if(node.id!=null){if(node.id=="image_"+this.idPrefix+id){imgObj=node}}}
if(this.itemPull[this.idPrefix+id].type=="radio"){var imgSrc=this.itemPull[this.idPrefix+id][(this.itemPull[this.idPrefix+id].state=="enabled"?"imgen":"imgdis")]}else{var imgSrc=this.itemPull[this.idPrefix+id][(this.itemPull[this.idPrefix+id].state=="enabled"?"imgen":"imgdis")]}
if(imgSrc.length>0){if(imgObj!=null){var tp=this.itemPull[this.idPrefix+id].type;if(tp=="checkbox"||tp=="radio"){imgObj.className="dhtmlxMenu_SubLevelArea_Item_Icon "+imgSrc}else{if(String(imgObj.className).search("dhtmlxMenu_TopLevel_Item_Icon")===0){imgObj.src=this.imagePath+imgSrc}else{imgObj.style.backgroundImage="url('"+this.imagePath+imgSrc+"')"}}}else{if(levelType=="TopLevel"){var newImgObj=document.createElement("IMG");newImgObj.className="dhtmlxMenu_"+levelType+"_Item_Icon_"+(this._rtl?"right":"left");newImgObj.src=this.imagePath+imgSrc;newImgObj.border="0";newImgObj.id="image_"+this.idPrefix+id;this.idPull[this.idPrefix+id].appendChild(newImgObj);this.idPull[this.idPrefix+id].style.paddingLeft=(this._rtl?this.topLevelItemPaddingIconNotExists:this.topLevelItemPaddingIconExists)+"px";this.idPull[this.idPrefix+id].style.paddingRight=(this._rtl?this.topLevelItemPaddingIconExists:this.topLevelItemPaddingIconNotExists)+"px"}else{var newImgObj=document.createElement("DIV");newImgObj.className="dhtmlxMenu_"+levelType+"_Item_Icon";newImgObj.style.backgroundImage="url('"+this.imagePath+imgSrc+"')";newImgObj.id="image_"+this.idPrefix+id;this.idPull[this.idPrefix+id].appendChild(newImgObj)}}}else{if(imgObj!=null){this.idPull[this.idPrefix+id].removeChild(imgObj);if(levelType=="TopLevel"){this.idPull[this.idPrefix+id].style.paddingLeft=this.topLevelItemPaddingIconNotExists+"px";this.idPull[this.idPrefix+id].style.paddingRight=this.topLevelItemPaddingIconNotExists+"px"}}}};dhtmlXMenuObject.prototype.removeItem=function(id){id=this.idPrefix+id;if(this.itemPull[id]==null){return}
var parentId=this.itemPull[id].parent;if(this.itemPull[id].type=="separator"){this.idPull["separator_"+id].parentNode.removeChild(this.idPull["separator_"+id]);delete this.idPull["separator_"+id];delete this.itemPull[id]}else{if(this.itemPull[id].complex){var items=this._getAllParents(id);items[items.length]=id;var polygons=[];for(var q=0;q<items.length;q++){if(this.itemPull[items[q]].type=="separator"){this.removeItem(items[q].replace(this.idPrefix,""))}else{if(this.itemPull[items[q]].complex){polygons[polygons.length]=items[q]}
this.idPull[items[q]].parentNode.removeChild(this.idPull[items[q]]);delete this.idPull[items[q]];delete this.itemPull[items[q]]}}
for(var q=0;q<polygons.length;q++){this.idPull["polygon_"+polygons[q]].parentNode.removeChild(this.idPull["polygon_"+polygons[q]]);if(this._isIE6){var pId="polygon_"+polygons[q]+"_ie6cover";if(this.idPull[pId]!=null){document.body.removeChild(this.idPull[pId]);delete this.idPull[pId]}}
delete this.idPull["polygon_"+polygons[q]];delete this.itemPull[polygons[q]]}
if(!this.context){this._redistribTopLevelPositions()}}else{this.idPull[id].parentNode.removeChild(this.idPull[id]);delete this.idPull[id];delete this.itemPull[id]}}
if(this.idPull["polygon_"+parentId]!=null){if(this.idPull["polygon_"+parentId].childNodes.length==0){document.body.removeChild(this.idPull["polygon_"+parentId]);if(this._isIE6){var pId="polygon_"+parentId+"_ie6cover";if(this.idPull[pId]!=null){document.body.removeChild(this.idPull[pId]);delete this.idPull[pId]}}
delete this.idPull["polygon_"+parentId];this._updateItemComplexState(parentId,!1,!1)}}};dhtmlXMenuObject.prototype._getAllParents=function(id){var parents=[];for(var a in this.itemPull){if(this.itemPull[a].parent==id){parents[parents.length]=this.itemPull[a].id;if(this.itemPull[a].complex){var t=this._getAllParents(this.itemPull[a].id);for(var q=0;q<t.length;q++){parents[parents.length]=t[q]}}}}
return parents};dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.context=!0;if(this.base._autoSkinUpdate==!0){this.base.className=this.base.className.replace("dhtmlxMenu_"+this.skin+"_Middle","");this.base._autoSkinUpdate=!1}
if(this.addBaseIdAsContextZone!=null){this.addContextZone(this.addBaseIdAsContextZone)}};dhtmlXMenuObject.prototype.addContextZone=function(zoneId){var zone=document.getElementById(zoneId);var zoneExists=!1;for(var a in this.contextZones){zoneExists=zoneExists||(a==zoneId)||(this.contextZones[a]==zone)}
if(zoneExists==!0)return!1;this.contextZones[zoneId]=zone;var main_self=this;if(_isOpera){zone.attachEvent("mouseup",function(e){for(var q in dhtmlxMenuObjectLiveInstances){if(q!=main_self._UID){if(dhtmlxMenuObjectLiveInstances[q].context){dhtmlxMenuObjectLiveInstances[q]._hideContextMenu()}}}
e.cancelBubble=!0;e.returnValue=!1;if(e.button==0&&e.ctrlKey==!0){main_self._doOnContextBeforeCall(e,this)}
return!1})}else{if(zone.oncontextmenu!=null){zone._oldContextMenuHandler=zone.oncontextmenu}
zone.oncontextmenu=function(e){for(var q in dhtmlxMenuObjectLiveInstances){if(q!=main_self._UID){if(dhtmlxMenuObjectLiveInstances[q].context){dhtmlxMenuObjectLiveInstances[q]._hideContextMenu()}}}
e=e||event;e.cancelBubble=!0;e.returnValue=!1;main_self._doOnContextBeforeCall(e,this);return!1}}};dhtmlXMenuObject.prototype.removeContextZone=function(zoneId){if(!this.isContextZone(zoneId))return!1;var zone=this.contextZones[zoneId];if(_isOpera){zone.onmouseup=null}else{zone.oncontextmenu=(zone._oldContextMenuHandler!=null?zone._oldContextMenuHandler:null)}
delete this.contextZones[zoneId];return!0};dhtmlXMenuObject.prototype.isContextZone=function(zoneId){var isZone=!1;if(this.contextZones[zoneId]!=null){if(this.contextZones[zoneId]==document.getElementById(zoneId))isZone=!0}
return isZone};dhtmlXMenuObject.prototype._isContextMenuVisible=function(){if(this.idPull["polygon_"+this.idPrefix+this.topId]==null)return!1;return(this.idPull["polygon_"+this.idPrefix+this.topId].style.display=="")};dhtmlXMenuObject.prototype._showContextMenu=function(x,y,zoneId){this._clearAndHide();if(this.idPull["polygon_"+this.idPrefix+this.topId]==null)return!1;window.clearTimeout(this.menuTimeoutHandler);this.idPull[this.idPrefix+this.topId]=[x,y];this._showPolygon(this.idPrefix+this.topId,"bottom");this.callEvent("onContextMenu",[zoneId])};dhtmlXMenuObject.prototype._hideContextMenu=function(){if(this.idPull["polygon_"+this.idPrefix+this.topId]==null)return!1;this._clearAndHide();this._hidePolygon(this.idPrefix+this.topId);this.zInd=this.zIndInit};dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(e,cZone){this.contextMenuZoneId=cZone.id;this._clearAndHide();this._hideContextMenu();var p=(e.srcElement||e.target);var px=(_isIE||_isOpera||_KHTMLrv?e.offsetX:e.layerX);var py=(_isIE||_isOpera||_KHTMLrv?e.offsetY:e.layerY);var mx=getAbsoluteLeft(p)+px;var my=getAbsoluteTop(p)+py;if(this.checkEvent("onBeforeContextMenu")){if(this.callEvent("onBeforeContextMenu",[cZone.id])){if(this.contextAutoShow){this._showContextMenu(mx,my);this.callEvent("onAfterContextMenu",[cZone.id])}}}else{if(this.contextAutoShow){this._showContextMenu(mx,my);this.callEvent("onAfterContextMenu",[cZone.id])}}};dhtmlXMenuObject.prototype.showContextMenu=function(x,y){this._showContextMenu(x,y,!1)};dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()};dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(this._isVisibleArea)return;this.menuX1=document.body.scrollLeft;this.menuX2=this.menuX1+(window.innerWidth||document.body.clientWidth);this.menuY1=Math.max((_isIE?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);this.menuY2=this.menuY1+(_isIE?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight)};dhtmlXMenuObject.prototype.getItemPosition=function(id){id=this.idPrefix+id;var pos=-1;if(this.itemPull[id]==null){return pos}
var parent=this.itemPull[id].parent;var obj=(this.idPull["polygon_"+parent]!=null?this.idPull["polygon_"+parent]:this.base);for(var q=0;q<obj.childNodes.length;q++){if(obj.childNodes[q]==this.idPull["separator_"+id]||obj.childNodes[q]==this.idPull[id]){pos=q}}
return pos};dhtmlXMenuObject.prototype.setItemPosition=function(id,pos){id=this.idPrefix+id;if(this.idPull[id]==null){return}
var isOnTopLevel=(this.itemPull[id].parent==this.idPrefix+this.topId);var itemData=this.idPull[id];var itemPos=this.getItemPosition(id.replace(this.idPrefix,""));var parent=this.itemPull[id].parent;var obj=(this.idPull["polygon_"+parent]!=null?this.idPull["polygon_"+parent]:this.base);obj.removeChild(obj.childNodes[itemPos]);if(pos<0){pos=0}
if(isOnTopLevel&&pos<1){pos=1}
if(pos<obj.childNodes.length){obj.insertBefore(itemData,obj.childNodes[pos])}else{obj.appendChild(itemData)}
if(isOnTopLevel){this._redistribTopLevelPositions()}};dhtmlXMenuObject.prototype.getParentId=function(id){id=this.idPrefix+id;if(this.itemPull[id]==null){return null}
return((this.itemPull[id].parent!=null?this.itemPull[id].parent:this.topId).replace(this.idPrefix,""))};dhtmlXMenuObject.prototype.addNewSibling=function(nextToId,itemId,itemText,disabled,imgEnabled,imgDisabled,cfunc){var id=this.idPrefix+(itemId!=null?itemId:this._genStr(24));var parentId=this.idPrefix+(nextToId!=null?this.getParentId(nextToId):this.topId);this._addItemIntoGlobalStrorage(id,parentId,itemText,"item",disabled,imgEnabled,imgDisabled,cfunc);if((parentId==this.idPrefix+this.topId)&&(!this.context)){this._renderToplevelItem(id,this.getItemPosition(nextToId));this._redistribTopLevelPositions()}else{this._renderSublevelItem(id,this.getItemPosition(nextToId))}};dhtmlXMenuObject.prototype.addNewChild=function(parentId,pos,itemId,itemText,disabled,imgEnabled,imgDisabled,cfunc){if(parentId==null){if(this.context){parentId=this.topId}else{this.addNewSibling(parentId,itemId,itemText,disabled,imgEnabled,imgDisabled,cfunc);if(pos!=null)this.setItemPosition(itemId,pos);return}}
itemId=this.idPrefix+(itemId!=null?itemId:this._genStr(24));if(this.setHotKey)this.setHotKey(parentId,"");parentId=this.idPrefix+parentId;this._addItemIntoGlobalStrorage(itemId,parentId,itemText,"item",disabled,imgEnabled,imgDisabled,cfunc);if(this.idPull["polygon_"+parentId]==null){this._renderSublevelPolygon(parentId,parentId)}
this._renderSublevelItem(itemId,pos-1);this._redefineComplexState(parentId)};dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(itemId,itemParentId,itemText,itemType,disabled,img,imgDis,cfunc){var item={id:itemId,title:itemText,imgen:(img!=null?img:""),imgdis:(imgDis!=null?imgDis:""),type:itemType,state:(disabled==!0?"disabled":"enabled"),parent:itemParentId,complex:!1,cfunc:cfunc,hotkey:"",tip:""};this.itemPull[item.id]=item};dhtmlXMenuObject.prototype._addSubMenuPolygon=function(id,parentId){var s=this._renderSublevelPolygon(id,parentId);var j=this._getMenuNodes(parentId);for(q=0;q<j.length;q++){if(this.itemPull[j[q]].type=="separator"){this._renderSeparator(j[q],null)}else{this._renderSublevelItem(j[q],null)}}
if(id==parentId){var level="topLevel"}else{var level="subLevel"}
for(var q=0;q<j.length;q++){if(this.itemPull[j[q]].complex){this._addSubMenuPolygon(id,this.itemPull[j[q]].id)}}};dhtmlXMenuObject.prototype._renderSublevelPolygon=function(id,parentId){var s=document.createElement("DIV");s.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Polygon_"+(this._rtl?"right":"left");s.oncontextmenu=function(e){e=e||event;e.returnValue=!1;e.canceBubble=!0;return!1};s.id="polygon_"+parentId;s.onclick=function(e){e=e||event;e.cancelBubble=!0};s.style.display="none";document.body.insertBefore(s,document.body.firstChild);this.idPull[s.id]=s;if(this.sxDacProc!=null){this.idPull["sxDac_"+parentId]=new this.sxDacProc(s,s.className);if(_isIE){this.idPull["sxDac_"+parentId]._setSpeed(this.dacSpeedIE);this.idPull["sxDac_"+parentId]._setCustomCycle(this.dacCyclesIE)}else{this.idPull["sxDac_"+parentId]._setSpeed(this.dacSpeed);this.idPull["sxDac_"+parentId]._setCustomCycle(this.dacCycles)}}
return s};dhtmlXMenuObject.prototype._renderSublevelItem=function(id,pos){var main_self=this;var k=document.createElement("DIV");if(this.itemPull[id].state=="enabled"){k.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Item_Normal";var arw="arrow"+(this._rtl?"r":"l")+"_en";j_icon=this.itemPull[id].imgen}else{k.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Item_Disabled";var arw="arrow"+(this._rtl?"r":"l")+"_dis";j_icon=this.itemPull[id].imgdis}
if(this.itemPull[id].complex){var j_nodes="<div class='dhtmlxMenu_SubLevelArea_Item_Arrow "+arw+"' id='arrow_"+this.itemPull[id].id+"'>"}else{var j_nodes=""}
if(j_icon.length>0){var tp=this.itemPull[id].type;if(tp=="checkbox"||tp=="radio")j_icon="<div id='image_"+this.itemPull[id].id+"' class='dhtmlxMenu_SubLevelArea_Item_Icon "+j_icon+"'></div>";if(!(tp=="checkbox"||tp=="radio"))j_icon="<div id='image_"+this.itemPull[id].id+"' class='dhtmlxMenu_SubLevelArea_Item_Icon' style='background-image:url(\""+this.imagePath+j_icon+"\");'></div>"}
k.innerHTML=j_icon+this.itemPull[id].title+j_nodes;if(this.itemPull[id].hotkey.length>0&&!this.itemPull[id].complex){var p="";k.innerHTML+="<div class='dhtmlxMenu_SubLevelArea_Item_HotKey'>"+this.itemPull[id].hotkey+"</div>"}
k.id=this.itemPull[id].id;k.parent=this.itemPull[id].parent;if(this.itemPull[id].tip.length>0){k.title=this.itemPull[id].tip}
k.onselectstart=function(e){e=e||event;e.returnValue=!1};k.onmouseover=function(){if(main_self.menuMode=="web"){window.clearTimeout(main_self.menuTimeoutHandler)}
main_self._redistribSubLevelSelection(this.id,this.parent)};if(main_self.menuMode=="web"){k.onmouseout=function(){window.clearTimeout(main_self.menuTimeoutHandler);main_self.menuTimeoutHandler=window.setTimeout(function(){main_self._clearAndHide()},main_self.menuTimeoutMsec,"JavaScript")}}
k.onclick=function(e){if(!main_self.checkEvent("onClick")&&main_self.itemPull[this.id].complex){return}
e=e||event;e.cancelBubble=!0;e.returnValue=!1;tc=(main_self.itemPull[this.id].complex?"c":"-");td=(main_self.itemPull[this.id].state=="enabled"?"-":"d");var cas={"ctrl":e.ctrlKey,"alt":e.altKey,"shift":e.shiftKey};switch(main_self.itemPull[this.id].type){case "checkbox":main_self._checkboxOnClickHandler(this.id.replace(main_self.idPrefix,""),tc+td+"n",cas);break;case "radio":main_self._radioOnClickHandler(this.id.replace(main_self.idPrefix,""),tc+td+"n",cas);break;case "item":main_self._doOnClick(this.id.replace(main_self.idPrefix,""),tc+td+"n",cas);break}
return!1};var polygon=this.idPull["polygon_"+this.itemPull[id].parent];if(pos!=null){pos++;if(pos<0){pos=0}if(pos>polygon.childNodes.length-1){pos=null}}
if(pos!=null){polygon.insertBefore(k,polygon.childNodes[pos])}else{polygon.appendChild(k)}
this.idPull[k.id]=k};dhtmlXMenuObject.prototype._renderSeparator=function(id,pos){var level=(this.context?"SubLevelArea":(this.itemPull[id].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"));if(level=="topLevel"&&this.context)return;var main_self=this;var k=document.createElement("DIV");k.id="separator_"+id;k.className="dhtmlxMenu_"+this.skin+"_"+level+"_Separator";k.onselectstart=function(e){e=e||event;e.returnValue=!1};k.onclick=function(e){e=e||event;e.cancelBubble=!0;var cas={"ctrl":e.ctrlKey,"alt":e.altKey,"shift":e.shiftKey};main_self._doOnClick(this.id.replace("separator_"+main_self.idPrefix,""),"--s",cas)};if(level=="TopLevel"){if(pos!=null){pos++;if(pos<0){pos=0}
if(this.base.childNodes[pos]!=null){this.base.insertBefore(k,this.base.childNodes[pos])}else{this.base.appendChild(k)}
this._redistribTopLevelPositions()}else{var last=this.base.childNodes[this.base.childNodes.length-1];if(String(last).search("TopLevel_Text")==-1){this.base.appendChild(k)}else{this.base.insertBefore(k,last)}}}else{var polygon=this.idPull["polygon_"+this.itemPull[id].parent];if(pos!=null){pos++;if(pos<0){pos=0}if(pos>polygon.childNodes.length-1){pos=null}}
if(pos!=null){polygon.insertBefore(k,polygon.childNodes[pos])}else{polygon.appendChild(k)}}
this.idPull[k.id]=k};dhtmlXMenuObject.prototype.addNewSeparator=function(nextToId,itemId){itemId=this.idPrefix+(itemId!=null?itemId:this._genStr(24));var parentId=this.idPrefix+this.getParentId(nextToId);this._addItemIntoGlobalStrorage(itemId,parentId,"","separator",!1,"","");this._renderSeparator(itemId,this.getItemPosition(nextToId))};dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()};dhtmlXMenuObject.prototype.clearAll=function(){for(var a in this.itemPull){if(this.itemPull[a].parent==this.idPrefix+this.topId){this.removeItem(String(a).replace(this.idPrefix,""))}}
this._isInited=!1};dhtmlXMenuObject.prototype.unload=function(){var obj=this.idPull;for(var a in obj){var el=obj[a];el.onmouseover=null;el.onmouseout=null;el.onclick=null;el.onselectstart=null;el.oncontextmenu=null;if(el.parentNode)el.parentNode.removeChild(el);el=null;obj[a]=null;try{delete obj[a]}catch(e){}}
this.idPull=null;for(var a in this.itemPull)this.itemPull[a]=null;this.itemPull=null;if(this.base!=null){this.base.className="";this.base.oncontextmenu=null;this.base.onselectstart=null;this.base=null}
this.setSkin=null;var basicMethods=["_enableDacSupport","_selectedSubItems","_openedPolygons","_addSubItemToSelected","_removeSubItemFromSelected","_getSubItemToDeselectByPolygon","_hidePolygon","_showPolygon","_redistribSubLevelSelection","_doOnClick","_doOnTouchMenu","_searchMenuNode","_getMenuNodes","_genStr","getItemType","forEachItem","_clearAndHide","_doOnLoad","loadXML","loadXMLString","_buildMenu","_xmlParser","_xmlLoader","_showSubLevelItem","_hideSubLevelItem","init","_countVisiblePolygonItems","_redefineComplexState","_updateItemComplexState","_getItemLevelType","_redistribTopLevelPositions","_redistribTopLevelSelection","_initTopLevelMenu","hide","_attachEvents","_renderToplevelItem","setImagePath","setIconsPath","setIconPath","_updateItemImage","removeItem","_getAllParents","renderAsContextMenu","addContextZone","removeContextZone","isContextZone","_isContextMenuVisible","_showContextMenu","_doOnContextBeforeCall","showContextMenu","hideContextMenu","_autoDetectVisibleArea","getItemPosition","setItemPosition","getParentId","addNewSibling","addNewChild","_addItemIntoGlobalStrorage","_addSubMenuPolygon","_renderSublevelPolygon","_renderSublevelItem","clearAll","_renderSeparator","addNewSeparator","attachEvent","callEvent","checkEvent","eventCatcher","detachEvent","dhx_Event","unload","_hideContextMenu","items","radio","dacCycles","dacCyclesIE"];for(var q=0;q<basicMethods.length;q++)this[basicMethods[q]]=null;basicMethods=null;var extMethods=["setItemEnabled","setItemDisabled","isItemEnabled","_changeItemState","getItemText","setItemText","loadFromHTML","hideItem","showItem","isItemHidden","_changeItemVisible","setUserData","getUserData","setOpenMode","setWebModeTimeout","enableDynamicLoading","_updateLoaderIcon","getItemImage","setItemImage","clearItemImage","setAutoShowMode","setAutoHideMode","setContextMenuHideAllMode","getContextMenuHideAllMode","setVisibleArea","setTooltip","getTooltip","setHotKey","getHotKey","setItemSelected","setTopText","setRTL","setAlign","setHref","clearHref","getCircuit","_clearAllSelectedSubItemsInPolygon","_checkArrowsState","contextZones","_addUpArrow","_addDownArrow","_removeUpArrow","_removeDownArrow","_isArrowExists","_doScrollUp","_doScrollDown","_countPolygonItems","setOverflowHeight","_getRadioImgObj","_setRadioState","_radioOnClickHandler","userData","getRadioChecked","setRadioChecked","addRadioButton","_getCheckboxState","_setCheckboxState","_readLevel","_updateCheckboxImage","_checkboxOnClickHandler","setCheckboxState","getCheckboxState","addCheckbox","serialize"];for(var q=0;q<extMethods.length;q++)this[extMethods[q]]=null;extMethods=null;this.extendedModule=null;this._unloaded=!0;dhtmlxMenuObjectLiveInstances[this._UID]=null;this._UID=null};var dhtmlxMenuObjectLiveInstances={};(function(){dhtmlx.extend_api("dhtmlXMenuObject",{_init:function(obj){return[obj.parent,obj.skin]},align:"setAlign",top_text:"setTopText",context:"renderAsContextMenu",icon_path:"setIconsPath",open_mode:"setOpenMode",rtl:"setRTL",skin:"setSkin",dynamic:"enableDynamicLoading",xml:"loadXML",items:"items",overflow:"setOverflowHeight"},{items:function(arr,parent){var pos=100000;var lastItemId=null;for(var i=0;i<arr.length;i++){var item=arr[i];if(item.type=="separator"){this.addNewSeparator(lastItemId,pos,item.id);lastItemId=item.id}else{this.addNewChild(parent,pos,item.id,item.text,item.disabled,item.img,item.img_disabled);lastItemId=item.id;if(item.items)this.items(item.items,item.id)}}}})})();dhtmlXMenuObject.prototype.extendedModule="DHXMENUEXT";dhtmlXMenuObject.prototype.setItemEnabled=function(id){this._changeItemState(id,"enabled",this._getItemLevelType(id))};dhtmlXMenuObject.prototype.setItemDisabled=function(id){this._changeItemState(id,"disabled",this._getItemLevelType(id))};dhtmlXMenuObject.prototype.isItemEnabled=function(id){return(this.itemPull[this.idPrefix+id]!=null?(this.itemPull[this.idPrefix+id].state=="enabled"):!1)};dhtmlXMenuObject.prototype._changeItemState=function(id,newState,levelType){var t=!1;var j=this.idPrefix+id;if((this.itemPull[j]!=null)&&(this.idPull[j]!=null)){if(this.itemPull[j].state!=newState){this.itemPull[j].state=newState;this.idPull[j].className="dhtmlxMenu_"+this.skin+"_"+(!this.context?levelType:"SubLevelArea")+"_Item_"+(this.itemPull[j].state=="enabled"?"Normal":"Disabled");this._updateItemComplexState(this.idPrefix+id,this.itemPull[this.idPrefix+id].complex,!1);this._updateItemImage(id,levelType);if((this.idPrefix+this.menuLastClicked==j)&&(levelType!="TopLevel")){this._redistribSubLevelSelection(j,this.itemPull[j].parent)}
if(levelType=="TopLevel"&&!this.context){this._redistribTopLevelPositions()}}}
return t};dhtmlXMenuObject.prototype.getItemText=function(id){return(this.itemPull[this.idPrefix+id]!=null?this.itemPull[this.idPrefix+id].title:"")};dhtmlXMenuObject.prototype.setItemText=function(id,text){id=this.idPrefix+id;if((this.itemPull[id]!=null)&&(this.idPull[id]!=null)){this._clearAndHide();this.idPull[id].innerHTML=this.idPull[id].innerHTML.replace(this.itemPull[id].title,text);this.itemPull[id].title=text;if(this.idPrefix+this.menuLastClicked==id){this._redistribSubLevelSelection(id,this.itemPull[id].parent)}
if(this.itemPull[id].parent==this.idPrefix+this.topId){this._redistribTopLevelPositions()}}};dhtmlXMenuObject.prototype.loadFromHTML=function(objId,clearAfterAdd,onLoadFunction){this.itemTagName="DIV";if(typeof(objId)=="string"){objId=document.getElementById(objId)}
this._buildMenu(objId,null);this.init();if(clearAfterAdd){objId.parentNode.removeChild(objId)}
if(onLoadFunction!=null){onLoadFunction()}};dhtmlXMenuObject.prototype.hideItem=function(id){this._changeItemVisible(id,!1)};dhtmlXMenuObject.prototype.showItem=function(id){this._changeItemVisible(id,!0)};dhtmlXMenuObject.prototype.isItemHidden=function(id){var isHidden=null;if(this.idPull[this.idPrefix+id]!=null){isHidden=(this.idPull[this.idPrefix+id].style.display=="none")}
return isHidden};dhtmlXMenuObject.prototype._changeItemVisible=function(id,visible){itemId=this.idPrefix+id;if(this.itemPull[itemId]==null)return;if(this.itemPull[itemId].type=="separator"){itemId="separator_"+itemId}
if(this.idPull[itemId]==null)return;this.idPull[itemId].style.display=(visible?"":"none");if(this._getItemLevelType(id)=="TopLevel"){this._redistribTopLevelPositions()}
this._redefineComplexState(this.itemPull[this.idPrefix+id].parent)};dhtmlXMenuObject.prototype.setUserData=function(id,name,value){this.userData[this.idPrefix+id+"_"+name]=value};dhtmlXMenuObject.prototype.getUserData=function(id,name){return(this.userData[this.idPrefix+id+"_"+name]!=null?this.userData[this.idPrefix+id+"_"+name]:null)};dhtmlXMenuObject.prototype.setOpenMode=function(mode){if(mode=="win"||mode=="web")this.menuMode=mode;else this.menuMode=="web"};dhtmlXMenuObject.prototype.setWebModeTimeout=function(tm){this.menuTimeoutMsec=(!isNaN(tm)?tm:400)};dhtmlXMenuObject.prototype.enableDynamicLoading=function(url,icon){this.dLoad=!0;this.dLoadUrl=url;this.dLoadSign=(String(this.dLoadUrl).search(/\?/)==-1?"?":"&");this.loaderIcon=icon;this.init()};dhtmlXMenuObject.prototype._updateLoaderIcon=function(id,state){if(this.idPull[id]==null)return;for(var q=0;q<this.idPull[id].childNodes.length;q++){if(String(this.idPull[id].childNodes[q].tagName).toLowerCase()=="div"){if(this.idPull[id].childNodes[q].className=="dhtmlxMenu_SubLevelArea_Item_Arrow_Loading"){var arw="arrow"+(this._rtl?"r":"l")+"_"+(this.itemPull[id].state=="enabled"?"en":"dis");this.idPull[id].childNodes[q].className="dhtmlxMenu_SubLevelArea_Item_Arrow "+arw}else{this.idPull[id].childNodes[q].className="dhtmlxMenu_SubLevelArea_Item_Arrow_Loading"}}}};dhtmlXMenuObject.prototype.getItemImage=function(id){var imgs=[null,null];id=this.idPrefix+id;if(this.itemPull[id].type=="item"){imgs[0]=this.itemPull[id].imgen;imgs[1]=this.itemPull[id].imgdis}
return imgs};dhtmlXMenuObject.prototype.setItemImage=function(id,img,imgDis){if(this.itemPull[this.idPrefix+id].type!="item")return;this.itemPull[this.idPrefix+id].imgen=img;this.itemPull[this.idPrefix+id].imgdis=imgDis;this._updateItemImage(id,this._getItemLevelType(id));this._redistribTopLevelPositions()};dhtmlXMenuObject.prototype.clearItemImage=function(id){this.setItemImage(id,"","")};dhtmlXMenuObject.prototype.setAutoShowMode=function(mode){this.contextAutoShow=(mode==!0?true:!1)};dhtmlXMenuObject.prototype.setAutoHideMode=function(mode){this.contextAutoHide=(mode==!0?true:!1)};dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(mode){this.contextHideAllMode=(mode==!0?true:!1)};dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.contextHideAllMode};dhtmlXMenuObject.prototype.setVisibleArea=function(x1,x2,y1,y2){this._isVisibleArea=!0;this.menuX1=x1;this.menuX2=x2;this.menuY1=y1;this.menuY2=y2};dhtmlXMenuObject.prototype.setTooltip=function(id,tip){id=this.idPrefix+id;if(!(this.itemPull[id]!=null&&this.idPull[id]!=null))return;this.idPull[id].title=(tip.length>0?tip:null);this.itemPull[id].tip=tip};dhtmlXMenuObject.prototype.getTooltip=function(id){if(this.itemPull[this.idPrefix+id]==null)return null;return this.itemPull[this.idPrefix+id].tip};dhtmlXMenuObject.prototype.setHotKey=function(id,hkey){id=this.idPrefix+id;if(!(this.itemPull[id]!=null&&this.idPull[id]!=null))return;if(this.itemPull[id].parent==this.idPrefix+this.topId&&!this.context)return;if(this.itemPull[id].complex)return;if(this.itemPull[id].type!="item")return;var hkObj=null;for(var q=0;q<this.idPull[id].childNodes.length;q++){if(this.idPull[id].childNodes[q].tagName=="DIV"&&this.idPull[id].childNodes[q].className=="dhtmlxMenu_SubLevelArea_Item_HotKey"){hkObj=this.idPull[id].childNodes[q]}}
if(hkey.length==0){this.itemPull[id].hotkey_backup=this.itemPull[id].hotkey;this.itemPull[id].hotkey="";if(hkObj!=null){this.idPull[id].removeChild(hkObj)}}else{this.itemPull[id].hotkey=hkey;this.itemPull[id].hotkey_backup=null;if(hkObj==null){hkObj=document.createElement("DIV");hkObj.className="dhtmlxMenu_SubLevelArea_Item_HotKey";this.idPull[id].appendChild(hkObj)}
hkObj.innerHTML=hkey}};dhtmlXMenuObject.prototype.getHotKey=function(id){if(this.itemPull[this.idPrefix+id]==null)return null;return this.itemPull[this.idPrefix+id].hotkey};dhtmlXMenuObject.prototype.setItemSelected=function(id){if(this.itemPull[this.idPrefix+id]==null)return null};dhtmlXMenuObject.prototype.setTopText=function(text){if(this.context)return;if(this._topText==null){this._topText=document.createElement("DIV");this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this._rtl?"left":(this._align=="left"?"right":"left"));this.base.appendChild(this._topText)}
this._topText.innerHTML=text};dhtmlXMenuObject.prototype.setRTL=function(state){if(this._rtl==state)return;this.setAlign("left");this._rtl=state;if(!this.context&&this.base!=null){this.base.className="dhtmlxMenu_"+this.skin+"_Middle "+(this._rtl?"dir_right":"dir_left")}
for(var a in this.idPull){if(String(a).search("polygon_")==0){this.idPull[a].className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Polygon_"+(this._rtl?"right":"left")}}
for(var a in this.itemPull){if(this.itemPull[a].parent==this.idPrefix+this.topId){if((this.itemPull[a].state=="enabled"?this.itemPull[a].imgen:this.itemPull[a].imgdis)!=""){this.idPull[a].style.paddingLeft=(this._rtl?this.topLevelItemPaddingIconNotExists:this.topLevelItemPaddingIconExists);this.idPull[a].style.paddingRight=(this._rtl?this.topLevelItemPaddingIconExists:this.topLevelItemPaddingIconNotExists);for(var q=0;q<this.idPull[a].childNodes.length;q++){if(String(this.idPull[a].childNodes[q].tagName).toLowerCase()=="img"){this.idPull[a].childNodes[q].className="dhtmlxMenu_TopLevel_Item_Icon_"+(this._rtl?"right":"left")}}}}
if(this.itemPull[a].complex){this._updateItemComplexState(a,!0,!1)}}
if(this._topText!=null){this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this._rtl?"left":"right")}
this.dirSubLevel=(this._rtl?"left":"right");this._redistribTopLevelPositions()};dhtmlXMenuObject.prototype.setAlign=function(align){if(this._align==align)return;if(align=="left"||align=="right"){this.setRTL(!1);this._align=align;if(this._topText!=null)this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this._align=="left"?"right":"left");this._redistribTopLevelPositions()}};dhtmlXMenuObject.prototype.setHref=function(itemId,href,target){if(this.itemPull[this.idPrefix+itemId]==null)return;this.itemPull[this.idPrefix+itemId].href_link=href;if(target!=null)this.itemPull[this.idPrefix+itemId].href_target=target};dhtmlXMenuObject.prototype.clearHref=function(itemId){if(this.itemPull[this.idPrefix+itemId]==null)return;delete this.itemPull[this.idPrefix+itemId].href_link;delete this.itemPull[this.idPrefix+itemId].href_target};dhtmlXMenuObject.prototype.getCircuit=function(id){var parents=new Array(id);while(this.getParentId(id)!=this.topId){id=this.getParentId(id);parents[parents.length]=id}
return parents.reverse()};dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(polygon){var subIds=this._getSubItemToDeselectByPolygon(polygon);for(var q=0;q<this._openedPolygons.length;q++){if(this._openedPolygons[q]!=polygon){this._hidePolygon(this._openedPolygons[q])}}
for(var q=0;q<subIds.length;q++){if(this.idPull[subIds[q]]!=null){if(this.itemPull[subIds[q]].state=="enabled"){this.idPull[subIds[q]].className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Item_Normal"}}}};dhtmlXMenuObject.prototype._checkArrowsState=function(id){var polygon=this.idPull["polygon_"+id];var arrowUp=this.idPull["arrowup_"+id];var arrowDown=this.idPull["arrowdown_"+id];if(polygon.scrollTop==0){arrowUp.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp_Disabled"}else{arrowUp.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp"+(arrowUp.over?"_Over":"")}
if(polygon.scrollTop+polygon.offsetHeight<polygon.scrollHeight){arrowDown.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown"+(arrowDown.over?"_Over":"")}else{arrowDown.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown_Disabled"}};dhtmlXMenuObject.prototype._addUpArrow=function(id){var main_self=this;var arrow=document.createElement("DIV");arrow.pId=this.idPrefix+id;arrow.id="arrowup_"+this.idPrefix+id;arrow.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp";arrow.innerHTML="<div class='dhtmlxMenu_"+this.skin+"_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>";arrow.style.display="none";arrow.over=!1;arrow.onselectstart=function(e){e=e||event;e.returnValue=!1;return!1};arrow.oncontextmenu=function(e){e=e||event;e.returnValue=!1;return!1};arrow.onmouseover=function(){if(main_self.menuMode=="web"){window.clearTimeout(main_self.menuTimeoutHandler)}
main_self._clearAllSelectedSubItemsInPolygon(this.pId);if(this.className=="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_ArrowUp_Disabled")return;this.className="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_ArrowUp_Over";this.over=!0;main_self._canScrollUp=!0;main_self._doScrollUp(this.pId,!0)};arrow.onmouseout=function(){if(main_self.menuMode=="web"){window.clearTimeout(main_self.menuTimeoutHandler);main_self.menuTimeoutHandler=window.setTimeout(function(){main_self._clearAndHide()},main_self.menuTimeoutMsec,"JavaScript")}
this.over=!1;main_self._canScrollUp=!1;if(this.className=="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_ArrowUp_Disabled")return;this.className="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_ArrowUp";window.clearTimeout(main_self._scrollUpTM)};arrow.onclick=function(e){e=e||event;e.returnValue=!1;e.cancelBubble=!0;return!1};document.body.insertBefore(arrow,document.body.firstChild);this.idPull[arrow.id]=arrow};dhtmlXMenuObject.prototype._addDownArrow=function(id){var main_self=this;var arrow=document.createElement("DIV");arrow.pId=this.idPrefix+id;arrow.id="arrowdown_"+this.idPrefix+id;arrow.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown";arrow.innerHTML="<div class='dhtmlxMenu_"+this.skin+"_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>";arrow.style.display="none";arrow.over=!1;arrow.onselectstart=function(e){e=e||event;e.returnValue=!1;return!1};arrow.oncontextmenu=function(e){e=e||event;e.returnValue=!1;return!1};arrow.onmouseover=function(){if(main_self.menuMode=="web"){window.clearTimeout(main_self.menuTimeoutHandler)}
main_self._clearAllSelectedSubItemsInPolygon(this.pId);if(this.className=="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_ArrowDown_Disabled")return;this.className="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_ArrowDown_Over";this.over=!0;main_self._canScrollDown=!0;main_self._doScrollDown(this.pId,!0)};arrow.onmouseout=function(){if(main_self.menuMode=="web"){window.clearTimeout(main_self.menuTimeoutHandler);main_self.menuTimeoutHandler=window.setTimeout(function(){main_self._clearAndHide()},main_self.menuTimeoutMsec,"JavaScript")}
this.over=!1;main_self._canScrollDown=!1;if(this.className=="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_ArrowDown_Disabled")return;this.className="dhtmlxMenu_"+main_self.skin+"_SubLevelArea_ArrowDown";window.clearTimeout(main_self._scrollDownTM)};arrow.onclick=function(e){e=e||event;e.returnValue=!1;e.cancelBubble=!0;return!1};document.body.insertBefore(arrow,document.body.firstChild);this.idPull[arrow.id]=arrow};dhtmlXMenuObject.prototype._removeUpArrow=function(id){var fullId="arrowup_"+this.idPrefix+id;this._removeArrow(fullId)};dhtmlXMenuObject.prototype._removeDownArrow=function(id){var fullId="arrowdown_"+this.idPrefix+id;this._removeArrow(fullId)};dhtmlXMenuObject.prototype._removeArrow=function(fullId){var arrow=this.idPull[fullId];arrow.onselectstart=null;arrow.oncontextmenu=null;arrow.onmouseover=null;arrow.onmouseout=null;arrow.onclick=null;if(arrow.parentNode)arrow.parentNode.removeChild(arrow);arrow=null;this.idPull[fullId]=null;try{delete this.idPull[fullId]}catch(e){}};dhtmlXMenuObject.prototype._isArrowExists=function(id){if(this.idPull["arrowup_"+id]!=null&&this.idPull["arrowdown_"+id]!=null)return!0;return!1};dhtmlXMenuObject.prototype._doScrollUp=function(id,checkArrows){var polygon=this.idPull["polygon_"+id];if(this._canScrollUp&&polygon.scrollTop>0){var theEnd=!1;var nextScrollTop=polygon.scrollTop-this._scrollUpTMStep;if(nextScrollTop<0){theEnd=!0;nextScrollTop=0}
polygon.scrollTop=nextScrollTop;if(!theEnd){var that=this;this._scrollUpTM=window.setTimeout(function(){that._doScrollUp(id,!1)},this._scrollUpTMTime)}}else{this._canScrollUp=!1;this._checkArrowsState(id)}
if(checkArrows){this._checkArrowsState(id)}};dhtmlXMenuObject.prototype._doScrollDown=function(id,checkArrows){var polygon=this.idPull["polygon_"+id];if(this._canScrollDown&&polygon.scrollTop+polygon.offsetHeight<=polygon.scrollHeight){var theEnd=!1;var nextScrollTop=polygon.scrollTop+this._scrollDownTMStep;if(nextScrollTop+polygon.offsetHeight>polygon.scollHeight){theEnd=!0;nextScrollTop=polygon.scollHeight-polygon.offsetHeight}
polygon.scrollTop=nextScrollTop;if(!theEnd){var that=this;this._scrollDownTM=window.setTimeout(function(){that._doScrollDown(id,!1)},this._scrollDownTMTime)}}else{this._canScrollDown;this._checkArrowsState(id)}
if(checkArrows){this._checkArrowsState(id)}};dhtmlXMenuObject.prototype._countPolygonItems=function(id){var count=0;for(var a in this.itemPull){var par=this.itemPull[a].parent;var tp=this.itemPull[a].type;if(par==this.idPrefix+id&&(tp=="item"||tp=="radio"||tp=="checkbox")){count++}}
return count};dhtmlXMenuObject.prototype.setOverflowHeight=function(itemsNum){if(this.limit==0&&itemsNum<=0)return;this._clearAndHide();if(this.limit>=0&&itemsNum>0){this.limit=itemsNum;return}
if(this.limit>0&&itemsNum<=0){for(var a in this.itemPull){if(this._isArrowExists(a)){var b=String(a).replace(this.idPrefix,"");this._removeUpArrow(b);this._removeDownArrow(b);this.idPull["polygon_"+a].style.height=""}}
this.limit=0}};dhtmlXMenuObject.prototype._getRadioImgObj=function(id){var imgObj=null;for(var q=0;q<this.idPull[this.idPrefix+id].childNodes.length;q++){var node=this.idPull[this.idPrefix+id].childNodes[q];if(node.id!=null)if(node.id=="image_"+this.idPrefix+id)imgObj=node}
return imgObj};dhtmlXMenuObject.prototype._setRadioState=function(id,state){var imgObj=this._getRadioImgObj(id);if(imgObj!=null){var rObj=this.itemPull[this.idPrefix+id];rObj.checked=state;rObj.imgen="rdbt_"+(rObj.checked?"1":"0");rObj.imgdis="rdbtdis_"+(rObj.checked?"1":"0");imgObj.className="dhtmlxMenu_SubLevelArea_Item_Icon "+(rObj.state=="disabled"?rObj.imgdis:rObj.imgen)}};dhtmlXMenuObject.prototype._radioOnClickHandler=function(id,type,casState){if(type.charAt(1)=="d"||this.itemPull[this.idPrefix+id].group==null)return;var group=this.itemPull[this.idPrefix+id].group;if(this.checkEvent("onRadioClick")){if(this.callEvent("onRadioClick",[group,this.getRadioChecked(group),id,this.contextMenuZoneId,casState])){this.setRadioChecked(group,id)}}else{this.setRadioChecked(group,id)}
if(this.checkEvent("onClick"))this.callEvent("onClick",[id])};dhtmlXMenuObject.prototype.getRadioChecked=function(group){var id=null;for(var q=0;q<this.radio[group].length;q++){var itemId=this.radio[group][q].replace(this.idPrefix,"");var imgObj=this._getRadioImgObj(itemId);if(imgObj!=null){var checked=(imgObj.className).match(/rdbt_1$/gi);if(checked!=null)id=itemId}}
return id};dhtmlXMenuObject.prototype.setRadioChecked=function(group,id){if(this.radio[group]==null)return;for(var q=0;q<this.radio[group].length;q++){var itemId=this.radio[group][q].replace(this.idPrefix,"");this._setRadioState(itemId,(itemId==id))}};dhtmlXMenuObject.prototype.addRadioButton=function(mode,nextToId,pos,itemId,itemText,group,state,disabled){if(this.context&&nextToId==this.topId){}else{if(this.itemPull[this.idPrefix+nextToId]==null)return;if(mode=="child"&&this.itemPull[this.idPrefix+nextToId].type!="item")return}
var id=this.idPrefix+(itemId!=null?itemId:this._genStr(24));var img="rdbt_"+(state?"1":"0");var imgDis="rdbtdis_"+(state?"1":"0");if(mode=="sibling"){var parentId=this.idPrefix+this.getParentId(nextToId);this._addItemIntoGlobalStrorage(id,parentId,itemText,"radio",disabled,img,imgDis);this._renderSublevelItem(id,this.getItemPosition(nextToId))}else{var parentId=this.idPrefix+nextToId;this._addItemIntoGlobalStrorage(id,parentId,itemText,"radio",disabled,img,imgDis);if(this.idPull["polygon_"+parentId]==null){this._renderSublevelPolygon(parentId,parentId)}
this._renderSublevelItem(id,pos-1);this._redefineComplexState(parentId)}
var gr=(group!=null?group:this._genStr(24));this.itemPull[id].group=gr;if(this.radio[gr]==null){this.radio[gr]=[]}
this.radio[gr][this.radio[gr].length]=id;if(state==!0)this.setRadioChecked(gr,String(id).replace(this.idPrefix,""))};dhtmlXMenuObject.prototype._getCheckboxState=function(id){if(this.itemPull[this.idPrefix+id]==null)return null;return this.itemPull[this.idPrefix+id].checked};dhtmlXMenuObject.prototype._setCheckboxState=function(id,state){if(this.itemPull[this.idPrefix+id]==null)return;this.itemPull[this.idPrefix+id].checked=state};dhtmlXMenuObject.prototype._updateCheckboxImage=function(id){if(this.idPull[this.idPrefix+id]==null)return;this.itemPull[this.idPrefix+id].imgen="chbx_"+(this._getCheckboxState(id)?"1":"0");this.itemPull[this.idPrefix+id].imgdis="chbxdis_"+(this._getCheckboxState(id)?"1":"0");this.idPull[this.idPrefix+id].childNodes[0].className="dhtmlxMenu_SubLevelArea_Item_Icon "+(this.itemPull[this.idPrefix+id].state=="enabled"?this.itemPull[this.idPrefix+id].imgen:this.itemPull[this.idPrefix+id].imgdis)};dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(id,type,casState){if(type.charAt(1)=="d")return;if(this.itemPull[this.idPrefix+id]==null)return;var state=this._getCheckboxState(id);if(this.checkEvent("onCheckboxClick")){if(this.callEvent("onCheckboxClick",[id,state,this.contextMenuZoneId,casState])){this.setCheckboxState(id,!state)}}else{this.setCheckboxState(id,!state)}
if(this.checkEvent("onClick"))this.callEvent("onClick",[id])};dhtmlXMenuObject.prototype.setCheckboxState=function(id,state){this._setCheckboxState(id,state);this._updateCheckboxImage(id)};dhtmlXMenuObject.prototype.getCheckboxState=function(id){return this._getCheckboxState(id)};dhtmlXMenuObject.prototype.addCheckbox=function(mode,nextToId,pos,itemId,itemText,state,disabled){if(this.context&&nextToId==this.topId){}else{if(this.itemPull[this.idPrefix+nextToId]==null)return;if(mode=="child"&&this.itemPull[this.idPrefix+nextToId].type!="item")return}
var img="chbx_"+(state?"1":"0");var imgDis="chbxdis_"+(state?"1":"0");if(mode=="sibling"){var id=this.idPrefix+(itemId!=null?itemId:this._genStr(24));var parentId=this.idPrefix+this.getParentId(nextToId);this._addItemIntoGlobalStrorage(id,parentId,itemText,"checkbox",disabled,img,imgDis);this.itemPull[id].checked=state;this._renderSublevelItem(id,this.getItemPosition(nextToId))}else{var id=this.idPrefix+(itemId!=null?itemId:this._genStr(24));var parentId=this.idPrefix+nextToId;this._addItemIntoGlobalStrorage(id,parentId,itemText,"checkbox",disabled,img,imgDis);this.itemPull[id].checked=state;if(this.idPull["polygon_"+parentId]==null){this._renderSublevelPolygon(parentId,parentId)}
this._renderSublevelItem(id,pos-1);this._redefineComplexState(parentId)}};dhtmlXMenuObject.prototype._readLevel=function(parentId){var xml="";for(var a in this.itemPull){if(this.itemPull[a].parent==parentId){var imgEn="";var imgDis="";var hotKey="";var itemId=String(this.itemPull[a].id).replace(this.idPrefix,"");var itemType="";var itemText=(this.itemPull[a].title!=""?' text="'+this.itemPull[a].title+'"':"");var itemState="";if(this.itemPull[a].type=="item"){if(this.itemPull[a].imgen!="")imgEn=' img="'+this.itemPull[a].imgen+'"';if(this.itemPull[a].imgdis!="")imgDis=' imgdis="'+this.itemPull[a].imgdis+'"';if(this.itemPull[a].hotkey!="")hotKey='<hotkey>'+this.itemPull[a].hotkey+'</hotkey>'}
if(this.itemPull[a].type=="separator"){itemType=' type="separator"'}else{if(this.itemPull[a].state=="disabled")itemState=' enabled="false"'}
if(this.itemPull[a].type=="checkbox"){itemType=' type="checkbox"'+(this.itemPull[a].checked?' checked="true"':"")}
if(this.itemPull[a].type=="radio"){itemType=' type="radio" group="'+this.itemPull[a].group+'" '+(this.itemPull[a].checked?' checked="true"':"")}
xml+="<item id='"+itemId+"'"+itemText+itemType+imgEn+imgDis+itemState+">";xml+=hotKey;if(this.itemPull[a].complex)xml+=this._readLevel(a);xml+="</item>"}}
return xml};dhtmlXMenuObject.prototype.serialize=function(){var xml="<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>";return xml};if(!window.dhtmlx)
dhtmlx={};dhtmlx.assert=function(test,message){if(!test)dhtmlx.error(message)};dhtmlx.assert_enabled=function(){return!1};dhtmlx.assert_event=function(obj,evs){if(!obj._event_check){obj._event_check={};obj._event_check_size={}}
for(var a in evs){obj._event_check[a.toLowerCase()]=evs[a];var count=-1;for(var t in evs[a])count++;obj._event_check_size[a.toLowerCase()]=count}};dhtmlx.assert_method_info=function(obj,name,descr,rules){var args=[];for(var i=0;i<rules.length;i++){args.push(rules[i][0]+" : "+rules[i][1]+"\n   "+rules[i][2].describe()+(rules[i][3]?"; optional":""))}
return obj.name+"."+name+"\n"+descr+"\n Arguments:\n - "+args.join("\n - ")};dhtmlx.assert_method=function(obj,config){for(var key in config)
dhtmlx.assert_method_process(obj,key,config[key].descr,config[key].args,(config[key].min||99),config[key].skip);};dhtmlx.assert_method_process=function(obj,name,descr,rules,min,skip){var old=obj[name];if(!skip)
obj[name]=function(){if(arguments.length!=rules.length&&arguments.length<min)
dhtmlx.log("warn","Incorrect count of parameters\n"+obj[name].describe()+"\n\nExpecting "+rules.length+" but have only "+arguments.length);else for(var i=0;i<rules.length;i++)
if(!rules[i][3]&&!rules[i][2](arguments[i]))
dhtmlx.log("warn","Incorrect method call\n"+obj[name].describe()+"\n\nActual value of "+(i+1)+" parameter: {"+(typeof arguments[i])+"} "+arguments[i]);return old.apply(this,arguments)};obj[name].describe=function(){return dhtmlx.assert_method_info(obj,name,descr,rules)}};dhtmlx.assert_event_call=function(obj,name,args){if(obj._event_check){if(!obj._event_check[name])
dhtmlx.log("warn","Not expected event call :"+name);else if(dhtmlx.isNotDefined(args))
dhtmlx.log("warn","Event without parameters :"+name);else if(obj._event_check_size[name]!=args.length)
dhtmlx.log("warn","Incorrect event call, expected "+obj._event_check_size[name]+" parameter(s), but have "+args.length+" parameter(s), for "+name+" event")}};dhtmlx.assert_event_attach=function(obj,name){if(obj._event_check&&!obj._event_check[name])
dhtmlx.log("warn","Unknown event name: "+name)};dhtmlx.assert_property=function(obj,evs){if(!obj._settings_check)
obj._settings_check={};dhtmlx.extend(obj._settings_check,evs)};dhtmlx.assert_check=function(data,coll){if(typeof data=="object"){for(var key in data){dhtmlx.assert_settings(key,data[key],coll)}}};dhtmlx.assert_settings=function(mode,value,coll){coll=coll||this._settings_check;if(coll){if(!coll[mode])
return dhtmlx.log("warn","Unknown propery: "+mode);var descr="";var error="";var check=!1;for(var i=0;i<coll[mode].length;i++){var rule=coll[mode][i];if(typeof rule=="string")
continue;if(typeof rule=="function")
check=check||rule(value);else if(typeof rule=="object"&&typeof rule[1]=="function"){check=check||rule[1](value);if(check&&rule[2])
dhtmlx.assert_check(value,rule[2])}
if(check)break}
if(!check)
dhtmlx.log("warn","Invalid configuration\n"+dhtmlx.assert_info(mode,coll)+"\nActual value: {"+(typeof value)+"} "+value)}};dhtmlx.assert_info=function(name,set){var ruleset=set[name];var descr="";var expected=[];for(var i=0;i<ruleset.length;i++){if(typeof rule=="string")
descr=ruleset[i];else if(ruleset[i].describe)
expected.push(ruleset[i].describe());else if(ruleset[i][1]&&ruleset[i][1].describe)
expected.push(ruleset[i][1].describe())}
return"Property: "+name+", "+descr+" \nExpected value: \n - "+expected.join("\n - ")};if(dhtmlx.assert_enabled()){dhtmlx.assert_rule_color=function(check){if(typeof check!="string")return!1;if(check.indexOf("#")!==0)return!1;if(check.substr(1).replace(/[0-9A-F]/gi,"")!=="")return!1;return!0};dhtmlx.assert_rule_color.describe=function(){return"{String} Value must start from # and contain hexadecimal code of color"};dhtmlx.assert_rule_template=function(check){if(typeof check=="function")return!0;if(typeof check=="string")return!0;return!1};dhtmlx.assert_rule_template.describe=function(){return"{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers"};dhtmlx.assert_rule_boolean=function(check){if(typeof check=="boolean")return!0;return!1};dhtmlx.assert_rule_boolean.describe=function(){return"{Boolean} true or false"};dhtmlx.assert_rule_object=function(check,sub){if(typeof check=="object")return!0;return!1};dhtmlx.assert_rule_object.describe=function(){return"{Object} Configuration object"};dhtmlx.assert_rule_string=function(check){if(typeof check=="string")return!0;return!1};dhtmlx.assert_rule_string.describe=function(){return"{String} Plain string"};dhtmlx.assert_rule_htmlpt=function(check){return!!dhtmlx.toNode(check)};dhtmlx.assert_rule_htmlpt.describe=function(){return"{Object},{String} HTML node or ID of HTML Node"};dhtmlx.assert_rule_notdocumented=function(check){return!1};dhtmlx.assert_rule_notdocumented.describe=function(){return"This options wasn't documented"};dhtmlx.assert_rule_key=function(obj){var t=function(check){return obj[check]};t.describe=function(){var opts=[];for(var key in obj)
opts.push(key);return"{String} can take one of next values: "+opts.join(", ")};return t};dhtmlx.assert_rule_dimension=function(check){if(check*1==check&&!isNaN(check)&&check>=0)return!0;return!1};dhtmlx.assert_rule_dimension.describe=function(){return"{Integer} value must be a positive number"};dhtmlx.assert_rule_number=function(check){if(typeof check=="number")return!0;return!1};dhtmlx.assert_rule_number.describe=function(){return"{Integer} value must be a number"};dhtmlx.assert_rule_function=function(check){if(typeof check=="function")return!0;return!1};dhtmlx.assert_rule_function.describe=function(){return"{Function} value must be a custom function"};dhtmlx.assert_rule_any=function(check){return!0};dhtmlx.assert_rule_any.describe=function(){return"Any value"};dhtmlx.assert_rule_mix=function(a,b){var t=function(check){if(a(check)||b(check))return!0;return!1};t.describe=function(){return a.describe()};return t}}
dhtmlx.version="3.0";dhtmlx.codebase="./";dhtmlx.extend=function(target,source){for(var method in source)
target[method]=source[method];if(dhtmlx.assert_enabled()&&source._assert){target._assert();target._assert=null}
if(typeof source!='undefined')
if(source._init)
target._init();return target};dhtmlx.bind=function(functor,object){return function(){return functor.apply(object,arguments)}};dhtmlx.require=function(module){if(!dhtmlx._modules[module]){dhtmlx.assert(dhtmlx.ajax,"load module is required");dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+module).responseText);dhtmlx._modules[module]=!0}};dhtmlx._modules={};dhtmlx.exec=function(code){if(window.execScript)
window.execScript(code);else window.eval(code)};dhtmlx.methodPush=function(object,method,event){return function(){var res=!1;res=object[method].apply(object,arguments);return res}};dhtmlx.isNotDefined=function(a){return typeof a=="undefined"};dhtmlx.delay=function(method,obj,params){setTimeout(function(){var ret=method.apply(obj,params);method=obj=params=null;return ret},1)};dhtmlx.uid=function(){if(!this._seed)this._seed=(new Date).valueOf();this._seed++;return this._seed};dhtmlx.toNode=function(node){if(typeof node=="string")return document.getElementById(node);return node};dhtmlx.toArray=function(array){return dhtmlx.extend((array||[]),dhtmlx.PowerArray)};dhtmlx.toFunctor=function(str){return(typeof(str)=="string")?eval(str):str};dhtmlx._events={};dhtmlx.event=function(node,event,handler,master){node=dhtmlx.toNode(node);var id=dhtmlx.uid();dhtmlx._events[id]=[node,event,handler];if(master)
handler=dhtmlx.bind(handler,master);if(node.addEventListener)
node.addEventListener(event,handler,!1);else if(node.attachEvent)
node.attachEvent("on"+event,handler);return id};dhtmlx.eventRemove=function(id){if(!id)return;dhtmlx.assert(this._events[id],"Removing non-existing event");var ev=dhtmlx._events[id];if(ev[0].removeEventListener)
ev[0].removeEventListener(ev[1],ev[2],!1);else if(ev[0].detachEvent)
ev[0].detachEvent("on"+ev[1],ev[2]);delete this._events[id]};dhtmlx.log=function(type,message,details){};dhtmlx.log_full_time=function(name){dhtmlx._start_time_log=new Date();dhtmlx.log("Info","Timing start ["+name+"]");window.setTimeout(function(){var time=new Date();dhtmlx.log("Info","Timing end ["+name+"]:"+(time.valueOf()-dhtmlx._start_time_log.valueOf())/1000+"s")},1)};dhtmlx.log_time=function(name){var fname="_start_time_log"+name;if(!dhtmlx[fname]){dhtmlx[fname]=new Date();dhtmlx.log("Info","Timing start ["+name+"]")}else{var time=new Date();dhtmlx.log("Info","Timing end ["+name+"]:"+(time.valueOf()-dhtmlx[fname].valueOf())/1000+"s");dhtmlx[fname]=null}};dhtmlx.error=function(message,details){dhtmlx.log("Error",message,details)};dhtmlx.EventSystem={_init:function(){this._events={};this._handlers={};this._map={}},block:function(){this._events._block=!0},unblock:function(){this._events._block=!1},mapEvent:function(map){dhtmlx.extend(this._map,map)},callEvent:function(type,params){if(this._events._block)return!0;type=type.toLowerCase();dhtmlx.assert_event_call(this,type,params);var event_stack=this._events[type.toLowerCase()];var return_value=!0;if(dhtmlx.debug)
dhtmlx.log("info","["+this.name+"] event:"+type,params);if(event_stack)
for(var i=0;i<event_stack.length;i++)
if(event_stack[i].apply(this,(params||[]))===!1)return_value=!1;if(this._map[type]&&!this._map[type].callEvent(type,params))
return_value=!1;return return_value},attachEvent:function(type,functor,id){type=type.toLowerCase();dhtmlx.assert_event_attach(this,type);id=id||dhtmlx.uid();functor=dhtmlx.toFunctor(functor);var event_stack=this._events[type]||dhtmlx.toArray();event_stack.push(functor);this._events[type]=event_stack;this._handlers[id]={f:functor,t:type};return id},detachEvent:function(id){var type=this._handlers[id].t;var functor=this._handlers[id].f;var event_stack=this._events[type];event_stack.remove(functor);delete this._handlers[id]}};dhtmlx.PowerArray={removeAt:function(pos,len){if(pos>=0)this.splice(pos,(len||1))},remove:function(value){this.removeAt(this.find(value))},insertAt:function(data,pos){if(!pos&&pos!==0)
this.push(data);else{var b=this.splice(pos,(this.length-pos));this[pos]=data;this.push.apply(this,b)}},find:function(data){for(i=0;i<this.length;i++)
if(data==this[i])return i;return-1},each:function(functor,master){for(var i=0;i<this.length;i++)
functor.call((master||this),this[i]);},map:function(functor,master){for(var i=0;i<this.length;i++)
this[i]=functor.call((master||this),this[i]);return this}};if(navigator.userAgent.indexOf('Opera')!=-1)
dhtmlx._isOpera=!0;else{dhtmlx._isIE=!!document.all;dhtmlx._isFF=!document.all;dhtmlx._isWebKit=(navigator.userAgent.indexOf("KHTML")!=-1);if(navigator.appVersion.indexOf("MSIE 8.0")!=-1&&document.compatMode!="BackCompat")
dhtmlx._isIE=8}
dhtmlx.zIndex={drag:10000};dhtmlx.html={create:function(name,attrs,html){attrs=attrs||{};var node=document.createElement(name);for(var attr_name in attrs)
node.setAttribute(attr_name,attrs[attr_name]);if(attrs.style)
node.style.cssText=attrs.style;if(attrs["class"])
node.className=attrs["class"];if(html)
node.innerHTML=html;return node},getValue:function(node){node=dhtmlx.toNode(node);if(!node)return"";return dhtmlx.isNotDefined(node.value)?node.innerHTML:node.value},remove:function(node){if(node instanceof Array)
for(var i=0;i<node.length;i++)
this.remove(node[i]);else if(node&&node.parentNode)
node.parentNode.removeChild(node)},insertBefore:function(node,before,rescue){if(!node)return;if(before)
before.parentNode.insertBefore(node,before);else rescue.appendChild(node)},locate:function(e,id){e=e||event;var trg=e.target||e.srcElement;while(trg){if(trg.getAttribute){var test=trg.getAttribute(id);if(test)return test}
trg=trg.parentNode}
return null},offset:function(elem){if(elem.getBoundingClientRect){var box=elem.getBoundingClientRect();var body=document.body;var docElem=document.documentElement;var scrollTop=window.pageYOffset||docElem.scrollTop||body.scrollTop;var scrollLeft=window.pageXOffset||docElem.scrollLeft||body.scrollLeft;var clientTop=docElem.clientTop||body.clientTop||0;var clientLeft=docElem.clientLeft||body.clientLeft||0;var top=box.top+scrollTop-clientTop;var left=box.left+scrollLeft-clientLeft;return{y:Math.round(top),x:Math.round(left)}}else{var top=0,left=0;while(elem){top=top+parseInt(elem.offsetTop,10);left=left+parseInt(elem.offsetLeft,10);elem=elem.offsetParent}
return{y:top,x:left}}},pos:function(ev){ev=ev||event;if(ev.pageX||ev.pageY)
return{x:ev.pageX,y:ev.pageY};var d=((dhtmlx._isIE)&&(document.compatMode!="BackCompat"))?document.documentElement:document.body;return{x:ev.clientX+d.scrollLeft-d.clientLeft,y:ev.clientY+d.scrollTop-d.clientTop}},preventEvent:function(e){if(e&&e.preventDefault)e.preventDefault();dhtmlx.html.stopEvent(e)},stopEvent:function(e){(e||event).cancelBubble=!0;return!1},addCss:function(node,name){node.className+=" "+name},removeCss:function(node,name){node.className=node.className.replace(RegExp(name,"g"),"")}};(function(){var temp=document.getElementsByTagName("SCRIPT");dhtmlx.assert(temp.length,"Can't locate codebase");if(temp.length){temp=(temp[temp.length-1].getAttribute("src")||"").split("/");temp.splice(temp.length-1,1);dhtmlx.codebase=temp.slice(0,temp.length).join("/")+"/"}})();dhtmlx.ui={};if(dhtmlx.assert_enabled()){dhtmlx.EventSystem._assert=function(){dhtmlx.assert_method(this,{block:{descr:"stop event calls until unblocking",args:[]},unblock:{descr:"restore normal event processing",args:[]},mapEvent:{descr:"route events from one object to another",args:[["map","hash of event-object relations",dhtmlx.assert_rule_object]]},callEvent:{descr:"trigger inner event",skip:!dhtmlx.assert_all,args:[["name","name of event",dhtmlx.assert_rule_string],["data","set of event related data",dhtmlx.assert_rule_object]]},attachEvent:{descr:"attach custom handler to inner event, returns event id",args:[["name","name of event",dhtmlx.assert_rule_string],["handler","custom handler",dhtmlx.assert_rule_function]]},detachEvent:{desrc:"detach custom code from handler",args:[["id","event's ID",dhtmlx.assert_rule_number]]}})}}
dhtmlx.Template={_cache:{},empty:function(){return""},setter:function(name,value){return dhtmlx.Template.fromHTML(value)},obj_setter:function(name,value){var f=dhtmlx.Template.setter(name,value);var obj=this;return function(){return f.apply(obj,arguments)}},fromHTML:function(str){if(typeof str=="function")return str;if(this._cache[str])
return this._cache[str];str=(str||"").toString();str=str.replace(/[\r\n]+/g,"\\n");str=str.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,"\"+(obj.$1?\"$2\":\"$3\")+\"");str=str.replace(/\{common\.([^}\(]*)\}/g,"\"+common.$1+\"");str=str.replace(/\{common\.([^\}\(]*)\(\)\}/g,"\"+(common.$1?common.$1(obj):\"\")+\"");str=str.replace(/\{obj\.([^}]*)\}/g,"\"+obj.$1+\"");str=str.replace(/#([a-z0-9_]+)#/gi,"\"+obj.$1+\"");str=str.replace(/\{obj\}/g,"\"+obj+\"");str=str.replace(/\{-obj/g,"{obj");str=str.replace(/\{-common/g,"{common");str="return \""+str+"\";";return this._cache[str]=Function("obj","common",str)}};dhtmlx.Type={add:function(obj,data){if(!obj.types&&obj.prototype.types)
obj=obj.prototype;if(dhtmlx.assert_enabled())
this.assert_event(data);var name=data.name||"default";this._template(data);this._template(data,"edit");this._template(data,"loading");obj.types[name]=dhtmlx.extend(dhtmlx.extend({},(obj.types[name]||this._default)),data);return name},_default:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},_template:function(obj,name){name="template"+(name?("_"+name):"");var data=obj[name];if(data&&(typeof data=="string")){if(data.indexOf("->")!=-1){data=data.split("->");switch(data[0]){case "html":data=dhtmlx.html.getValue(data[1]).replace(/\"/g,"\\\"");break;case "http":data=new dhtmlx.ajax().sync().get(data[1],{uid:(new Date()).valueOf()}).responseText;break;default:break}}
obj[name]=dhtmlx.Template.fromHTML(data)}}};dhtmlx.Type.assert_event=function(data){dhtmlx.assert_check(data,{name:["Name of type",dhtmlx.assert_rule_string],template:["Main template",dhtmlx.assert_rule_template],template_edit:["Edit template",dhtmlx.assert_rule_template],template_loading:["Loading template",dhtmlx.assert_rule_template],css:["Css class of single item",dhtmlx.assert_rule_string],width:["Css class of single item",dhtmlx.assert_rule_dimension],height:["Css class of single item",dhtmlx.assert_rule_dimension],margin:["Css class of single item",dhtmlx.assert_rule_dimension],padding:["Css class of single item",dhtmlx.assert_rule_dimension]})};dhtmlx.Settings={_init:function(){this._settings=this.config=[];this._settings.sort=null},define:function(property,value){if(typeof property=="object")
return this._parseSeetingColl(property);return this._define(property,value)},_define:function(property,value){dhtmlx.assert_settings.call(this,property,value);var setter=this[property+"_setter"];return this._settings[property]=setter?setter.call(this,property,value):value},_parseSeetingColl:function(coll){if(coll){for(var a in coll)
this._define(a,coll[a]);}},_parseSettings:function(obj,initial){var settings=dhtmlx.extend({},initial);if(typeof obj=="object"&&!obj.tagName)
dhtmlx.extend(settings,obj);this._parseSeetingColl(settings)},_mergeSettings:function(config,defaults){for(var key in defaults)
switch(typeof config[key]){case "object":config[key]=this._mergeSettings((config[key]||{}),defaults[key]);break;case "undefined":config[key]=defaults[key];break;default:break}
return config},_parseContainer:function(obj,name,fallback){if(typeof obj=="object"&&!obj.tagName)
obj=obj.container;this._obj=dhtmlx.toNode(obj);if(!this._obj&&fallback)
this._obj=fallback(obj);dhtmlx.assert(this._obj,"Incorrect html container");this._obj.className+=" "+name;this._obj.onselectstart=function(){return!1};this._dataobj=this._obj},_set_type:function(name){if(typeof name=="object")
return this.type_setter("type",name);dhtmlx.assert(this.types,"RenderStack :: Types are not defined");dhtmlx.assert(this.types[name],"RenderStack :: Inccorect type name",name);this.type=dhtmlx.extend({},this.types[name]);this.customize()},customize:function(obj){if(obj)dhtmlx.extend(this.type,obj);this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type._item_end=this.template_item_end(this.type);this.render()},type_setter:function(mode,value){this._set_type(typeof value=="object"?dhtmlx.Type.add(this,value):value);return value},template_setter:function(mode,value){return this.type_setter("type",{template:value})},css_setter:function(mode,value){this._obj.className+=" "+value;return value}};if(dhtmlx.assert_enabled()){dhtmlx.Settings._assert=function(){dhtmlx.assert_property(this,{type:[["Name of object's type",dhtmlx.assert_rule_string],["Configuration of object type",dhtmlx.assert_rule_object]],template:["Default template",dhtmlx.assert_rule_template],css:["Css-class for top level container",dhtmlx.assert_rule_string],container:["Container for the component",dhtmlx.assert_rule_htmlpt]});dhtmlx.assert_method(this,{customize:{descr:"change some property of current data type",min:"0",args:[["obj","hash of properties",dhtmlx.assert_rule_object,!0]]},define:{descr:"sets value for configuration property",args:[["property","name of property",dhtmlx.assert_rule_string],["value","new value of property",dhtmlx.assert_rule_any]]}})}}
dhtmlx.Destruction={_init:function(){dhtmlx.destructors.push(this)},destructor:function(){this.destructor=function(){};this._htmlmap=null;this._htmlrows=null;if(this._html)
document.body.appendChild(this._html);this._html=null;if(this._obj){this._obj.innerHTML="";this._obj._htmlmap=null}
this._obj=this._dataobj=null;this.data=null;this._events=this._handlers={}}};dhtmlx.destructors=[];dhtmlx.event(window,"unload",function(){for(var i=0;i<dhtmlx.destructors.length;i++)
dhtmlx.destructors[i].destructor();dhtmlx.destructors=[];for(var a in dhtmlx._events){var ev=dhtmlx._events[a];if(ev[0].removeEventListener)
ev[0].removeEventListener(ev[1],ev[2],!1);else if(ev[0].detachEvent)
ev[0].detachEvent("on"+ev[1],ev[2]);delete dhtmlx._events[a]}});if(dhtmlx.assert_enabled()){dhtmlx.Destruction._assert=function(){dhtmlx.assert_method(this,{destructor:{descr:"remove component and all realted data",args:[]}})}}
dhtmlx.ui.pager=function(container){this.name="Pager";if(dhtmlx.assert_enabled())this._assert();dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(container,"dhx_pager");dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.SingleRender);dhtmlx.extend(this,dhtmlx.MouseEvents);this._parseSettings(container,{size:10,page:-1,group:5,count:0,type:"default"});this.data=this._settings;this.refresh()};dhtmlx.ui.pager.prototype={_id:"dhx_p_id",on_click:{"dhx_pager_item":function(e,id){this.select(id)}},select:function(id){switch(id){case "next":id=this._settings.page+1;break;case "prev":id=this._settings.page-1;break;case "first":id=0;break;case "last":id=this._settings.limit-1;break;default:break}
if(id<0)id=0;if(id>=this.data.limit)id=this.data.limit-1;if(this.callEvent("onBeforePageChange",[this._settings.page,id])){this.data.page=id*1;this.refresh();this.callEvent("onAfterPageChange",[id])}},types:{"default":{template:dhtmlx.Template.fromHTML("{common.pages()}"),pages:function(obj){var html="";if(obj.page==-1)return"";obj.min=obj.page-Math.round((obj.group-1)/2);obj.max=obj.min+obj.group-1;if(obj.min<0){obj.max+=obj.min*(-1);obj.min=0}
if(obj.max>=obj.limit){obj.min-=Math.min(obj.min,obj.max-obj.limit+1);obj.max=obj.limit-1}
for(var i=(obj.min||0);i<=obj.max;i++)
html+=this.button({id:i,index:(i+1),selected:(i==obj.page?"_selected":"")});return html},page:function(obj){return obj.page+1},first:function(){return this.button({id:"first",index:" &lt;&lt; ",selected:""})},last:function(){return this.button({id:"last",index:" &gt;&gt; ",selected:""})},prev:function(){return this.button({id:"prev",index:"&lt;",selected:""})},next:function(){return this.button({id:"next",index:"&gt;",selected:""})},button:dhtmlx.Template.fromHTML("<div dhx_p_id='{obj.id}' class='dhx_pager_item{obj.selected}'>{obj.index}</div>")}},refresh:function(){var s=this._settings;s.limit=Math.ceil(s.count/s.size);if(s.limit&&s.limit!=s.old_limit)
s.page=Math.min(s.limit-1,s.page);var id=s.page;if(id!=-1&&(id!=s.old_page)||(s.limit!=s.old_limit)){this.render();this.callEvent("onRefresh",[]);s.old_limit=s.limit;s.old_page=s.page}},template_item_start:dhtmlx.Template.fromHTML("<div>"),template_item_end:dhtmlx.Template.fromHTML("</div>")};if(dhtmlx.assert_enabled()){dhtmlx.ui.pager.prototype._assert=function(){dhtmlx.assert_property(this,{size:["expected count of items per page",dhtmlx.assert_rule_dimension],count:["expected count of items",dhtmlx.assert_rule_dimension],page:["current page",dhtmlx.assert_rule_number],group:["count of pages in group",dhtmlx.assert_rule_dimension]});dhtmlx.assert_event(this,{onbeforepagechange:{descr:"page change is activated",old_page:"previously active page",new_page:"new active page"},onafterpagechange:{descr:"active page was changed",active:"currectly active page"},onrefresh:{descr:"each time when page or limit value was changed"}})}}
dhtmlx.SingleRender={_init:function(){},_toHTML:function(obj){return this.type._item_start(obj,this.type)+this.type.template(obj,this.type)+this.type._item_end},render:function(){if(!this.callEvent||this.callEvent("onBeforeRender",[this.data])){if(this.data)
this._dataobj.innerHTML=this._toHTML(this.data);if(this.callEvent)this.callEvent("onAfterRender",[])}}};if(dhtmlx.assert_enabled()){dhtmlx.SingleRender._assert=function(){dhtmlx.assert_event(this,{onbeforerender:{descr:"view rendering is initiated",data:"hash of data, which is used for rendering"},onafterrender:{descr:"view was rendered"}})}}
dhtmlx.ui.Tooltip=function(container){this.name="Tooltip";this.version="3.0";if(dhtmlx.assert_enabled())this._assert();if(typeof container=="string"){container={template:container}}
dhtmlx.extend(this,dhtmlx.Settings);dhtmlx.extend(this,dhtmlx.SingleRender);this._parseSettings(container,{type:"default",dy:0,dx:20});this._dataobj=this._obj=document.createElement("DIV");this._obj.className="dhx_tooltip";dhtmlx.html.insertBefore(this._obj,document.body.firstChild)};dhtmlx.ui.Tooltip.prototype={show:function(data,pos){if(this.data!=data){this.data=data;this.render(data)}
this._obj.style.top=pos.y+this._settings.dy+"px";this._obj.style.left=pos.x+this._settings.dx+"px";this._obj.style.display="block"},hide:function(){this.data=null;this._obj.style.display="none"},types:{"default":dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty};if(dhtmlx.assert_enabled()){dhtmlx.ui.Tooltip.prototype._assert=function(){dhtmlx.assert_property(this,{dx:["x correction for tooltip position",dhtmlx.assert_rule_number],dy:["y correction for tooltip position",dhtmlx.assert_rule_number]})}}
dhtmlx.AutoTooltip={tooltip_setter:function(mode,value){var t=new dhtmlx.ui.Tooltip(value);this.attachEvent("onMouseMove",function(id,e){t.show(this.get(id),dhtmlx.html.pos(e))});this.attachEvent("onMouseOut",function(id,e){t.hide()});this.attachEvent("onMouseMoving",function(id,e){t.hide()});return t}};if(dhtmlx.assert_enabled()){dhtmlx.AutoTooltip._assert=function(){dhtmlx.assert_property(this,{tooltip:[["Template for tooltip",dhtmlx.assert_rule_template],["Tooltip's configuration",dhtmlx.assert_rule_object]]})}}
dhtmlx.compat=function(name,obj){if(dhtmlx.compat[name])
dhtmlx.compat[name](obj)};(function(){if(!window.dhtmlxError){var dummy=function(){};window.dhtmlxError={catchError:dummy,throwError:dummy};window.convertStringToBoolean=function(value){return!!value};window.dhtmlxEventable=function(node){dhtmlx.extend(node,dhtmlx.EventSystem)};var loader={getXMLTopNode:function(name){},doXPath:function(path){return dhtmlx.DataDriver.xml.xpath(this.xml,path)},xmlDoc:{responseXML:!0}};dhtmlx.compat.dataProcessor=function(obj){var sendData="_sendData";var in_progress="_in_progress";var tMode="_tMode";var waitMode="_waitMode";obj[sendData]=function(a1,rowId){if(!a1)return;if(rowId)
this[in_progress][rowId]=(new Date()).valueOf();if(!this.callEvent("onBeforeDataSending",rowId?[rowId,this.getState(rowId)]:[]))return!1;var a2=this;var a3=this.serverProcessor;if(this[tMode]!="POST")
dhtmlx.ajax().get(a3+((a3.indexOf("?")!=-1)?"&":"?")+this.serialize(a1,rowId),"",function(t,x,xml){loader.xml=dhtmlx.DataDriver.xml.checkResponse(t,x);a2.afterUpdate(a2,null,null,null,loader)});else dhtmlx.ajax().post(a3,this.serialize(a1,rowId),function(t,x,xml){loader.xml=dhtmlx.DataDriver.xml.checkResponse(t,x);a2.afterUpdate(a2,null,null,null,loader)});this[waitMode]++}}}})();dhtmlx.DataProcessor={_dp_init:function(dp){var varname="_methods";dp[varname]=["setItemStyle","","changeId","remove"];this.attachEvent("onAfterAdd",function(id){dp.setUpdated(id,!0,"inserted")});this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(driver,data){if(driver.getUserData)
driver.getUserData(data,this._userdata)},this));this.attachEvent("onBeforeDelete",function(id){var z=dp.getState(id);if(z=="inserted"){dp.setUpdated(id,!1);return!0}
if(z=="deleted")return!1;if(z=="true_deleted")return!0;dp.setUpdated(id,!0,"deleted");return!1});this.attachEvent("onAfterEditStop",function(id){dp.setUpdated(id,!0,"updated")});varname="_getRowData";dp[varname]=function(id,pref){var ev=this.obj.data.get(id);var data={};for(var a in ev){if(a.indexOf("_")===0)continue;data[a]=ev[a]}
return data};varname="_clearUpdateFlag";dp[varname]=function(){};this._userdata={};dp.attachEvent("insertCallback",this._dp_callback);dp.attachEvent("updateCallback",this._dp_callback);dp.attachEvent("deleteCallback",function(upd,id){this.obj.setUserData(id,this.action_param,"true_deleted");this.obj.remove(id)});dhtmlx.compat("dataProcessor",dp)},_dp_callback:function(upd,id){this.obj.data.set(id,dhtmlx.DataDriver.xml.getDetails(upd.firstChild));this.obj.data.refresh(id)},setItemStyle:function(id,style){var node=this._locateHTML(id);if(node)node.style.cssText+=";"+style},changeId:function(oldid,newid){this.data.order[this.data.indexById(oldid)]=newid;this.data.pull[newid]=this.data.pull[oldid];this.data.get(newid).id=newid;delete this.data.pull[oldid];this.data.refresh()},setUserData:function(id,name,value){if(id)
this.data.get(id)[name]=value;else this._userdata[name]=value},getUserData:function(id,name){return id?this.data.get(id)[name]:this._userdata[name]}};(function(){var temp="_dp_init";dhtmlx.DataProcessor[temp]=dhtmlx.DataProcessor._dp_init})();if(dhtmlx.assert_enabled()){dhtmlx.DataProcessor._assert=function(){dhtmlx.assert_method(this,{changeId:{descr:"change it of item",args:[["id","existing id of item",dhtmlx.assert_rule_any],["new_id","new id of item",dhtmlx.assert_rule_any]]}})}}
dhtmlx.compat.dnd=function(){if(window.dhtmlDragAndDropObject){var _dragged="_dragged";var old_ocl=dhtmlDragAndDropObject.prototype.checkLanding;dhtmlDragAndDropObject.prototype.checkLanding=function(node,e,skip){old_ocl.apply(this,arguments);if(!skip){dhtmlx.DragControl._drag_context=dhtmlx.DragControl._drag_context||{};dhtmlx.DragControl._checkLand(node,e,!0)}};var old_odp=dhtmlDragAndDropObject.prototype.stopDrag;dhtmlDragAndDropObject.prototype.stopDrag=function(e,dot,skip){if(!skip){if(dhtmlx.DragControl._last){dhtmlx.DragControl._active=dragger.dragStartNode;dhtmlx.DragControl._stopDrag(e,!0)}}
old_odp.apply(this,arguments)};var dragger=new dhtmlDragAndDropObject();var old_start=dhtmlx.DragControl._startDrag;dhtmlx.DragControl._startDrag=function(){old_start.apply(this,arguments);var c=dhtmlx.DragControl._drag_context;if(!c)return;var source=[];var tsource=[];for(var i=0;i<c.source.length;i++){source[i]={idd:c.source[i]};tsource.push(c.source[i])}
dragger.dragStartNode={parentNode:{},parentObject:{idd:source,id:(tsource.length==1?tsource[0]:tsource),treeNod:{object:c.from}}};dragger.dragStartNode.parentObject.treeNod[_dragged]=source;dragger.dragStartObject=c.from};var old_check=dhtmlx.DragControl._checkLand;dhtmlx.DragControl._checkLand=function(node,e,skip){old_check.apply(this,arguments);if(!this._last&&!skip){node=dragger.checkLanding(node,e,!0)}};var old_drop=dhtmlx.DragControl._stopDrag;dhtmlx.DragControl._stopDrag=function(e,skip){old_drop.apply(this,arguments);if(dragger.lastLanding&&!skip)
dragger.stopDrag(e,!1,!0)};var old_mst=dhtmlx.DragControl.getMaster;dhtmlx.DragControl.getMaster=function(t){var master=null;if(t)
master=old_mst.apply(this,arguments);if(!master){master=dragger.dragStartObject;var src=[];var from=master[_dragged];for(var i=0;i<from.length;i++){src.push(from[i].idd||from[i].id)}
dhtmlx.DragControl._drag_context.source=src}
return master}}};dhtmlx.DataMove={_init:function(){dhtmlx.assert(this.data,"DataMove :: Component doesn't have DataStore")},copy:function(sid,tindex,tobj,tid){var data=this.get(sid);if(!data){dhtmlx.log("Warning","Incorrect ID in DataMove::copy");return}
if(tobj){dhtmlx.assert(tobj.externalData,"DataMove :: External object doesn't support operation");data=tobj.externalData(data)}
tobj=tobj||this;return tobj.add(tobj.externalData(data,tid),tindex)},move:function(sid,tindex,tobj,tid){if(sid instanceof Array){for(var i=0;i<sid.length;i++){var new_index=(tobj||this).indexById(this.move(sid[i],tindex,tobj,dhtmlx.uid()));if(sid[i+1])
tindex=new_index+(this.indexById(sid[i+1])<new_index?0:1)}
return}
nid=sid;if(tindex<0){dhtmlx.log("Info","DataMove::move - moving outside of bounds is ignored");return}
var data=this.get(sid);if(!data){dhtmlx.log("Warning","Incorrect ID in DataMove::move");return}
if(!tobj||tobj==this)
this.data.move(this.indexById(sid),tindex);else{dhtmlx.assert(tobj.externalData,"DataMove :: External object doesn't support operation");nid=tobj.add(tobj.externalData(data,tid),tindex);this.remove(sid)}
return nid},moveUp:function(id,step){return this.move(id,this.indexById(id)-(step||1))},moveDown:function(id,step){return this.moveUp(id,(step||1)*-1)},moveTop:function(id){return this.move(id,0)},moveBottom:function(id){return this.move(id,this.data.dataCount()-1)},externalData:function(data,id){var newdata=dhtmlx.extend({},data);newdata.id=id||dhtmlx.uid();newdata.$selected=newdata.$template=null;return newdata}};if(dhtmlx.assert_enabled()){dhtmlx.DataMove._assert=function(){dhtmlx.assert_method(this,{copy:{descr:"copy item in question to the target position",min:2,args:[["source_id","id of item which will be copied",dhtmlx.assert_rule_any],["index","position, to which item need to be copied",dhtmlx.assert_rule_dimension],["target_obj","target component",dhtmlx.assert_rule_object,!0],["target_id","id which will be assigned to the item, after moving",dhtmlx.assert_rule_any,!0]]},move:{descr:"move item in question to the target position",min:2,args:[["source_id","id of item which will be copied",dhtmlx.assert_rule_any],["index","position, to which item need to be copied",dhtmlx.assert_rule_dimension],["target_obj","target component",dhtmlx.assert_rule_object,!0],["target_id","id which will be assigned to the item, after moving",dhtmlx.assert_rule_any,!0]]},moveUp:{descr:"move item up of one or few positions",min:1,args:[["source_id","id of item which will be moved",dhtmlx.assert_rule_any],["step","how far item need to be moved",dhtmlx.assert_rule_dimension,!0]]},moveDown:{descr:"move item down of one or few positions",min:1,args:[["source_id","id of item which will be moved",dhtmlx.assert_rule_any],["step","how far item need to be moved",dhtmlx.assert_rule_dimension,!0]]},moveTop:{descr:"move item to the top position",args:[["source_id","id of item which will be moved",dhtmlx.assert_rule_any]]},moveBottom:{descr:"move item to the bottom position",args:[["source_id","id of item which will be moved",dhtmlx.assert_rule_any]]}})}}
dhtmlx.DragControl={_drag_masters:dhtmlx.toArray(["dummy"]),addDrop:function(node,ctrl,master_mode){node=dhtmlx.toNode(node);node.dhx_drop=this._getCtrl(ctrl);if(master_mode)node.dhx_master=!0},_getCtrl:function(ctrl){ctrl=ctrl||dhtmlx.DragControl;var index=this._drag_masters.find(ctrl);if(index<0){index=this._drag_masters.length;this._drag_masters.push(ctrl)}
return index},addDrag:function(node,ctrl){node=dhtmlx.toNode(node);node.dhx_drag=this._getCtrl(ctrl);dhtmlx.event(node,"mousedown",this._preStart,node)},_preStart:function(e){if(dhtmlx.DragControl._active){dhtmlx.DragControl._preStartFalse();dhtmlx.DragControl.destroyDrag()}
dhtmlx.DragControl._active=this;dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._startDrag);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._preStartFalse);e.cancelBubble=!0;return!1},_preStartFalse:function(e){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu)},_startDrag:function(e){dhtmlx.DragControl._preStartFalse();if(!dhtmlx.DragControl.createDrag(e))return;dhtmlx.DragControl.sendSignal("start");dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._moveDrag);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._stopDrag);dhtmlx.DragControl._moveDrag(e)},_stopDrag:function(e){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu);if(dhtmlx.DragControl._last){dhtmlx.DragControl.onDrop(dhtmlx.DragControl._active,dhtmlx.DragControl._last,this._landing,e);dhtmlx.DragControl.onDragOut(dhtmlx.DragControl._active,dhtmlx.DragControl._last,null,e)}
dhtmlx.DragControl.destroyDrag();dhtmlx.DragControl.sendSignal("stop")},_moveDrag:function(e){var pos=dhtmlx.html.pos(e);dhtmlx.DragControl._html.style.top=pos.y+dhtmlx.DragControl.top+"px";dhtmlx.DragControl._html.style.left=pos.x+dhtmlx.DragControl.left+"px";if(dhtmlx.DragControl._skip)
dhtmlx.DragControl._skip=!1;else dhtmlx.DragControl._checkLand((e.srcElement||e.target),e);e.cancelBubble=!0;return!1},_checkLand:function(node,e){while(node&&node.tagName!="BODY"){if(node.dhx_drop){if(this._last&&(this._last!=node||node.dhx_master))
this.onDragOut(this._active,this._last,node,e);if(!this._last||this._last!=node||node.dhx_master){this._last=null;this._landing=this.onDragIn(dhtmlx.DragControl._active,node,e);if(this._landing)
this._last=node;return}
return}
node=node.parentNode}
if(this._last)
this._last=this._landing=this.onDragOut(this._active,this._last,null,e)},sendSignal:function(signal){dhtmlx.DragControl.active=(signal=="start")},getMaster:function(t){return this._drag_masters[t.dhx_drag||t.dhx_drop]},getContext:function(t){return this._drag_context},createDrag:function(e){var z=document.createElement("DIV");var a=dhtmlx.DragControl._active;if(a.dhx_drag&&a.dhx_drag.onCreateDrag){var t=dhtmlx.DragControl._html;t=a.dhx_drag.onCreateDrag(a,e);t.style.position='absolute';t.style.zIndex=dhtmlx.zIndex.drag;t.onmousemove=dhtmlx.DragControl._skip_mark;return!0}
var t=dhtmlx.DragControl.onDrag(a,e);if(!t)return!1;z.innerHTML=t;z.className="dhx_drag_zone";z.onmousemove=dhtmlx.DragControl._skip_mark;document.body.appendChild(z);dhtmlx.DragControl._html=z;return!0},_skip_mark:function(){dhtmlx.DragControl._skip=!0},destroyDrag:function(){var a=dhtmlx.DragControl._active;if(a.dhx_drag&&a.dhx_drag.onDestroyDrag)
a.dhx_drag.onDestroyDrag(a,dhtmlx.DragControl._html);else dhtmlx.html.remove(dhtmlx.DragControl._html);dhtmlx.DragControl._landing=dhtmlx.DragControl._active=dhtmlx.DragControl._last=dhtmlx.DragControl._html=null},top:5,left:5,onDragIn:function(s,t,e){var m=this._drag_masters[t.dhx_drop];if(m.onDragIn&&m!=this)return m.onDragIn(s,t,e);t.className=t.className+" dhx_drop_zone";return t},onDragOut:function(s,t,n,e){var m=this._drag_masters[t.dhx_drop];if(m.onDragOut&&m!=this)return m.onDragOut(s,t,n,e);t.className=t.className.replace("dhx_drop_zone","");return null},onDrop:function(s,t,d,e){var m=this._drag_masters[t.dhx_drop];if(m.onDrop&&m!=this)return m.onDrop(s,t,d,e);t.appendChild(s)},onDrag:function(s,e){var m=this._drag_masters[s.dhx_drag];if(m.onDrag&&m!=this)return m.onDrag(s,e);dhtmlx.DragControl._drag_context={source:s,from:s};return"<div style='"+s.style.cssText+"'>"+s.innerHTML+"</div>"}};dhtmlx.DragItem={_init:function(){dhtmlx.assert(this.move,"DragItem :: Component doesn't have DataMove interface");dhtmlx.assert(this.locate,"DragItem :: Component doesn't have RenderStack interface");dhtmlx.assert(dhtmlx.DragControl,"DragItem :: DragControl is not included");if(!this._settings||this._settings.drag)
dhtmlx.DragItem._initHandlers(this);else if(this._settings){this.drag_setter=function(prop,value){if(value){this._initHandlers(this);delete this.drag_setter}
return value}}
if(this.dragMarker){this.attachEvent("onBeforeDragIn",this.dragMarker);this.attachEvent("onDragOut",this.dragMarker)}},_initHandlers:function(obj){dhtmlx.DragControl.addDrop(obj._obj,obj,!0);dhtmlx.DragControl.addDrag(obj._obj,obj)},onDragIn:function(s,t,e){var id=this.locate(e)||null;var context=dhtmlx.DragControl._drag_context;var to=dhtmlx.DragControl.getMaster(s);var html=(this._locateHTML(id)||this._obj);if(html==dhtmlx.DragControl._landing)return html;context.target=id;context.to=to;if(!this.callEvent("onBeforeDragIn",[context,e])){context.id=null;return null}
dhtmlx.html.addCss(html,"dhx_drag_over");return html},onDragOut:function(s,t,n,e){var id=this.locate(e)||null;var html=(this._locateHTML(id)||(n?dhtmlx.DragControl.getMaster(n)._obj:window.undefined));if(html==dhtmlx.DragControl._landing)return null;var context=dhtmlx.DragControl._drag_context;dhtmlx.html.removeCss(dhtmlx.DragControl._landing,"dhx_drag_over");context.target=context.to=null;this.callEvent("onDragOut",[context,e]);return null},onDrop:function(s,t,d,e){var context=dhtmlx.DragControl._drag_context;context.from=dhtmlx.DragControl.getMaster(s);context.to=this;context.index=context.target?this.indexById(context.target):this.dataCount();context.new_id=dhtmlx.uid();if(!this.callEvent("onBeforeDrop",[context,e]))return;if(context.from==context.to){this.move(context.source,context.index)}else{if(context.from)
context.from.move(context.source,context.index,context.to,context.new_id);else dhtmlx.error("Unsopported d-n-d combination")}
this.callEvent("onAfterDrop",[context,e])},onDrag:function(s,e){var id=this.locate(e);var list=[id];if(id){if(this.getSelected){var selection=this.getSelected();if(dhtmlx.PowerArray.find.call(selection,id)!=-1)
list=selection}
var context=dhtmlx.DragControl._drag_context={source:list,start:id};context.from=this;if(this.callEvent("onBeforeDrag",[context,e]))
return context.html||this._toHTML(this.get(id))}
return null}};if(dhtmlx.assert_enabled()){dhtmlx.DragItem._assert=function(){dhtmlx.assert_event(this,{ondragout:{descr:"drag moved outside of droppable area",context:"drag and drop context",native_event:"HTML event object"},onbeforedrag:{descr:"mouse button pressed and moved over draggable item",context:"drag and drop context",native_event:"HTML event object"},onbeforedragin:{descr:"drag moved over droppable area",context:"drag and drop context",native_event:"HTML event object"},onbeforedrop:{descr:"drag released over droppable area",context:"drag and drop context",native_event:"HTML event object"},onafterdrop:{descr:"drag-n-drop finished",context:"drag and drop context",native_event:"HTML event object"}});dhtmlx.assert_property(this,{drag:["Enables or disables dnd",dhtmlx.assert_rule_boolean]})}}
dhtmlx.EditAbility={_init:function(id){this._edit_id=null;this._edit_bind=null;dhtmlx.assert(this.data,"EditAbility :: Component doesn't have DataStore");dhtmlx.assert(this._locateHTML,"EditAbility :: Component doesn't have RenderStack");this.attachEvent("onEditKeyPress",function(code,ctrl,shift){if(code==13&&!shift)
this.stopEdit();else if(code==27)
this.stopEdit(!0)});this.attachEvent("onBeforeRender",function(){this.stopEdit()})},isEdit:function(){return this._edit_id},edit:function(id){if(this.stopEdit(!1,id)){if(!this.callEvent("onBeforeEditStart",[id]))
return;var data=this.data.get(id);if(data.$template)return;data.$template="edit";this.data.refresh(id);this._edit_id=id;this._save_binding(id);this._edit_bind(!0,data);this.callEvent("onAfterEditStart",[id])}},stopEdit:function(mode,if_not_id){if(!this._edit_id)return!0;if(this._edit_id==if_not_id)return!1;if(!this.callEvent("onBeforeEditStop",[this._edit_id]))
return!1;var data=this.data.get(this._edit_id);data.$template=null;if(!mode)this._edit_bind(!1,data);var id=this._edit_id;this._edit_bind=this._edit_id=null;this.data.refresh(id);this.callEvent("onAfterEditStop",[id]);return!0},_save_binding:function(id){var cont=this._locateHTML(id);var code="";var back_code="";var bind_elements=[];if(cont){var elements=cont.getElementsByTagName("*");var bind="";for(var i=0;i<elements.length;i++){if(elements[i].nodeType==1&&(bind=elements[i].getAttribute("bind"))){code+="els["+bind_elements.length+"].value="+bind+";";back_code+=bind+"=els["+bind_elements.length+"].value;";bind_elements.push(elements[i]);elements[i].className+=" dhx_allow_selection";elements[i].onselectstart=this._block_native}}
elements=null}
code=Function("obj","els",code);back_code=Function("obj","els",back_code);this._edit_bind=function(mode,obj){if(mode){code(obj,bind_elements);if(bind_elements.length&&bind_elements[0].select)
bind_elements[0].select()}else back_code(obj,bind_elements)}},_block_native:function(e){(e||event).cancelBubble=!0;return!0}};if(dhtmlx.assert_enabled()){dhtmlx.EditAbility._assert=function(){dhtmlx.assert_event(this,{onbeforeeditstart:{descr:"edit operation initiated",id:"id of item, which will be edited"},onaftereditstart:{descr:"edit operation initiated, editor opened and ready for input",id:"id of item, which will be edited"},onbeforeeditstop:{descr:"stop edit command was received",id:"id of item, which was edited"},onaftereditstop:{descr:"edit operation finished",id:"id of item, which was edited"}});dhtmlx.assert_property(this,{edit:["allow or deny edit operations",dhtmlx.assert_rule_boolean]});dhtmlx.assert_method(this,{edit:{descr:"switch item to the edit state",args:[["id","id of item in question",dhtmlx.assert_rule_any]]},stopEdit:{descr:"swithc any item in edit state, back to normal",min:"0",args:[["dont_save","ignore value in editor and revert to old",dhtmlx.assert_rule_boolean,!0],["reserved","reserved for inner usage",dhtmlx.assert_rule_any,!0]]}})}}
dhtmlx.KeyEvents={_init:function(){dhtmlx.event(this._obj,"keypress",this._onKeyPress,this)},_onKeyPress:function(e){e=e||event;var code=e.which||e.keyCode;this.callEvent((this._edit_id?"onEditKeyPress":"onKeyPress"),[code,e.ctrlKey,e.shiftKey,e])}};if(dhtmlx.assert_enabled()){dhtmlx.KeyEvents._assert=function(){dhtmlx.assert_event(this,{onkeypress:{descr:"for each key action in default state",key:"key code",ctrl:"ctrl flag",shift:"shift flag",native_event:"native event"},oneditkeypress:{descr:"for each key action in default state",key:"key code",ctrl:"ctrl flag",shift:"shift flag",native_event:"native event"}})}}
dhtmlx.MouseEvents={_init:function(){if(this.on_click){dhtmlx.event(this._obj,"click",this._onClick,this);dhtmlx.event(this._obj,"contextmenu",this._onContext,this)}
if(this.on_dblclick)
dhtmlx.event(this._obj,"dblclick",this._onDblClick,this);if(this.on_mouse_move){dhtmlx.event(this._obj,"mousemove",this._onMouse,this);dhtmlx.event(this._obj,(dhtmlx._isIE?"mouseleave":"mouseout"),this._onMouse,this)}},_onClick:function(e){return this._mouseEvent(e,this.on_click,"ItemClick")},_onDblClick:function(e){return this._mouseEvent(e,this.on_dblclick,"ItemDblClick")},_onContext:function(e){var id=dhtmlx.html.locate(e,this._id);if(id&&!this.callEvent("onBeforeContextMenu",[id,e]))
return dhtmlx.html.preventEvent(e)},_onMouse:function(e){if(dhtmlx._isIE)
e=document.createEventObject(event);if(this._mouse_move_timer)
window.clearTimeout(this._mouse_move_timer);this.callEvent("onMouseMoving",[e]);this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){if(e.type=="mousemove")
this._onMouseMove(e);else this._onMouseOut(e)},this),500)},_onMouseMove:function(e){if(!this._mouseEvent(e,this.on_mouse_move,"MouseMove"))
this.callEvent("onMouseOut",[e||event])},_onMouseOut:function(e){this.callEvent("onMouseOut",[e||event])},_mouseEvent:function(e,hash,name){e=e||event;var trg=e.target||e.srcElement;var css="";var id=null;var found=!1;while(trg&&trg.parentNode){if(!found&&trg.getAttribute){id=trg.getAttribute(this._id);if(id){if(!this.callEvent("on"+name,[id,e,trg]))return;found=!0}}
css=trg.className;if(css){css=css.split(" ");css=css[0]||css[1];if(hash[css])
return hash[css].call(this,e,id,trg)}
trg=trg.parentNode}
return found}};if(dhtmlx.assert_enabled()){dhtmlx.MouseEvents._assert=function(){dhtmlx.assert_event(this,{onitemclick:{descr:"item was clicked",id:"id of clicked item",ev:"native event object",trg:"target HTML element"},onbeforecontextmenu:{descr:"context menu call in the item area",id:"id of clicked item",ev:"native event object"},onitemdblclick:{descr:"item was double-clicked",id:"id of clicked item",ev:"native event object",trg:"target HTML element"},onmousemove:{descr:"mouse was pointed over item",id:"id of item in question",ev:"native event object",trg:"target HTML element"},onmouseout:{descr:"mouse was moved out from item",ev:"native event object"},onmousemoving:{descr:"mouse was moved over component",ev:"native event object"}})}}
dhtmlx.SelectionModel={_init:function(){this._selected=dhtmlx.toArray();dhtmlx.assert(this.data,"SelectionModel :: Component doesn't have DataStore");this.data.attachEvent("onStoreUpdated",dhtmlx.bind(this._data_updated,this))},_data_updated:function(id,obj,type){if(type=="delete")
this._selected.remove(id);else if(!this.data.dataCount())
this._selected=dhtmlx.toArray()},_select_mark:function(id,state,refresh){if(!refresh&&!this.callEvent("onBeforeSelect",[id,state]))return!1;this.data.get(id).$selected=state;if(refresh)
refresh.push(id);else this._refresh_selection(id);return!0},select:function(id,non_modal,continue_old){if(!id)return this.selectAll();if(id instanceof Array){for(var i=0;i<id.length;i++)
this.select(id[i],non_modal,continue_old);return}
if(continue_old&&this._selected.length)
return this.selectAll(this._selected[this._selected.length-1],id);if(!non_modal&&(this._selected.length!=1||this._selected[0]!=id))
this.unselectAll();if(this.isSelected(id)){if(non_modal)this.unselect(id);return}
if(this._select_mark(id,!0)){this._selected.push(id);this.callEvent("onAfterSelect",[id])}},unselect:function(id){if(!id)return this.unselectAll();if(!this.isSelected(id))return;if(this._select_mark(id,!1))
this._selected.remove(id)},selectAll:function(from,to){var range;var refresh=[];if(from||to)
range=this.data.getRange(from,to);else range=this.data.getRange();range.each(function(obj){var d=this.data.get(obj.id);if(!d.$selected){this._selected.push(obj.id);this._select_mark(obj.id,!0,refresh)}
return obj.id},this);this._refresh_selection(refresh)},unselectAll:function(){var refresh=[];this._selected.each(function(id){this._select_mark(id,!1,refresh)},this);this._selected=dhtmlx.toArray();this._refresh_selection(refresh)},isSelected:function(id){return this._selected.find(id)!=-1},getSelected:function(as_array){switch(this._selected.length){case 0:return as_array?[]:"";case 1:return as_array?[this._selected[0]]:this._selected[0];default:return([].concat(this._selected))}},_is_mass_selection:function(obj){return obj.length>100||obj.length>this.data.dataCount/2},_refresh_selection:function(refresh){if(typeof refresh!="object")refresh=[refresh];if(!refresh.length)return;if(this._is_mass_selection(refresh))
this.data.refresh();else for(var i=0;i<refresh.length;i++)
this.render(refresh[i],this.data.get(refresh[i]),"update");this.callEvent("onSelectChange",[refresh])}};if(dhtmlx.assert_enabled()){dhtmlx.SelectionModel._assert=function(){dhtmlx.assert_event(this,{onbeforeselect:{descr:"item selection is started",id:"id of item",selection:"true if we selecting, false if unselecting"},onafterselect:{descr:"item was selected",id:"id of item"},onselectchange:{descr:"selection state was changed",ids:"aray of IDs, which selection state was changed"}});dhtmlx.assert_property(this,{select:[["Enable|Disable selection",dhtmlx.assert_rule_boolean],["Enables multiselect mode",dhtmlx.assert_rule_key({"multiselect":!0})]]});dhtmlx.assert_method(this,{unselect:{descr:"unselect item",min:"0",args:[["id","id of item in question",dhtmlx.assert_rule_any,!0]]},unselectAll:{descr:"unselect all items",args:[]},select:{descr:"select item",min:"0",args:[["id","id of item in question",dhtmlx.assert_rule_any,!0]]},selectAll:{descr:"select all items",min:"0",args:[["start_id","id of start item",dhtmlx.assert_rule_any,!0],["end_id","id of end item",dhtmlx.assert_rule_any,!0]]},isSelected:{descr:"check is item selected or not",args:[["id","id of item in question",dhtmlx.assert_rule_any]]},getSelected:{descr:"return ID of selected item(s)",args:[]}})}}
dhtmlx.RenderStack={_init:function(){dhtmlx.assert(this.data,"RenderStack :: Component doesn't have DataStore");dhtmlx.assert(dhtmlx.Template,"dhtmlx.Template :: dhtmlx.Template is not accessible");this._html=document.createElement("DIV")},_toHTML:function(obj){dhtmlx.assert((!obj.$template||this.type["template_"+obj.$template]),"RenderStack :: Unknown template: "+obj.$template);this.callEvent("onItemRender",[obj]);return this.type._item_start(obj,this.type)+(obj.$template?this.type["template_"+obj.$template]:this.type.template)(obj,this.type)+this.type._item_end},_toHTMLObject:function(obj){this._html.innerHTML=this._toHTML(obj);return this._html.firstChild},_locateHTML:function(search_id){if(this._htmlmap)
return this._htmlmap[search_id];this._htmlmap={};var t=this._dataobj.childNodes;for(var i=0;i<t.length;i++){var id=t[i].getAttribute(this._id);if(id)
this._htmlmap[id]=t[i]}
return this._locateHTML(search_id)},locate:function(e){return dhtmlx.html.locate(e,this._id)},show:function(id){var html=this._locateHTML(id);if(html)
this._dataobj.scrollTop=html.offsetTop-this._dataobj.offsetTop},render:function(id,data,type,after){if(id){var cont=this._locateHTML(id);switch(type){case "update":if(!cont)return;var t=this._htmlmap[id]=this._toHTMLObject(data);dhtmlx.html.insertBefore(t,cont);dhtmlx.html.remove(cont);break;case "delete":if(!cont)return;dhtmlx.html.remove(cont);delete this._htmlmap[id];break;case "add":var t=this._htmlmap[id]=this._toHTMLObject(data);dhtmlx.html.insertBefore(t,this._locateHTML(this.data.next(id)),this._dataobj);break;case "move":this.render(id,data,"delete");this.render(id,data,"add");break;default:dhtmlx.error("Unknown render command: "+type);break}}else{if(this.callEvent("onBeforeRender",[this.data])){this._dataobj.innerHTML=this.data.getRange().map(this._toHTML,this).join("");this._htmlmap=null;this.callEvent("onAfterRender",[])}}},pager_setter:function(mode,value){this.attachEvent("onBeforeRender",function(){var s=this._settings.pager._settings;if(s.page==-1)return!1;this.data.min=s.page*s.size;this.data.max=(s.page+1)*s.size-1;return!0});var pager=new dhtmlx.ui.pager(value);var update=dhtmlx.bind(function(){this.data.refresh()},this);pager.attachEvent("onRefresh",update);this.data.attachEvent("onStoreUpdated",function(data){var count=this.dataCount();if(count!=pager._settings.count){pager._settings.count=count;if(pager._settings.page==-1)
pager._settings.page=0;pager.refresh()}});return pager},height_setter:function(mode,value){if(value=="auto"){this.attachEvent("onAfterRender",this._correct_height);dhtmlx.event(window,"resize",dhtmlx.bind(this._correct_height,this))}
return value},_correct_height:function(){this._dataobj.style.overflow="hidden";this._dataobj.style.height="1px";var t=this._dataobj.scrollHeight;this._dataobj.style.height=t+"px";if(dhtmlx._isFF){var t2=this._dataobj.scrollHeight;if(t2!=t)
this._dataobj.style.height=t2+"px"}
this._obj.style.height=this._dataobj.style.height},_getDimension:function(){var t=this.type;var d=(t.border||0)+(t.padding||0)*2+(t.margin||0)*2;return{x:t.width+d,y:t.height+d}},x_count_setter:function(mode,value){var dim=this._getDimension();this._dataobj.style.width=dim.x*value+(this._settings.height!="auto"?18:0)+"px";return value},y_count_setter:function(mode,value){var dim=this._getDimension();this._dataobj.style.height=dim.y*value+"px";return value}};if(dhtmlx.assert_enabled()){dhtmlx.RenderStack._assert=function(){dhtmlx.assert_event(this,{onbeforerender:{descr:"occurs when rendering is starting",data:"array of data objects"},onitemrender:{descr:"for each item rendering, occurs only for items with custom templates",obj:"data hash of rendered item"},onafterrender:{descr:"after view rendered"}});dhtmlx.assert_property(this,{x_count:["Width of view in item-widths",dhtmlx.assert_rule_dimension],y_count:["Height of view in item-heights",dhtmlx.assert_rule_dimension],pager:[["Pager configuration",dhtmlx.assert_rule_object],["Pager container",dhtmlx.assert_rule_htmlpt]],height:["Enables auto-height mode",dhtmlx.assert_rule_key({"auto":!0})]});dhtmlx.assert_method(this,{show:{descr:"adjust scroll state to show item in question",args:[["id","id of item in question",dhtmlx.assert_rule_any]]},locate:{descr:"return ID of item which is affected by HTML event",args:[["native_event","html event object",dhtmlx.assert_rule_object]]},render:{descr:"render current state of item or whole component",min:"0",args:[["id","html event object",dhtmlx.assert_rule_any,!0],["data","hash of data for rendered item",dhtmlx.assert_rule_object,!0],["type","type of operat",dhtmlx.assert_rule_string,!0],["after","id of relation item",dhtmlx.assert_rule_any,!0]]}})}}
dhtmlx.VirtualRenderStack={_init:function(){dhtmlx.assert(this.render,"VirtualRenderStack :: Object must use RenderStack first");this._htmlmap={};this._dataobj.style.overflowY="scroll";dhtmlx.event(this._dataobj,"scroll",dhtmlx.bind(this._render_visible_rows,this));dhtmlx.event(window,"resize",dhtmlx.bind(function(){this.render()},this));this._unrendered_area=[];this.attachEvent("onItemRender",function(obj){if(obj.$template=="loading")
this._unrendered_area.push(this.data.id(obj))})},_locateHTML:function(search_id){return this._htmlmap[search_id]},show:function(id){range=this._getVisibleRange();var ind=this.data.indexById(id);var dy=Math.floor(ind/range._dx)*range._y;this._dataobj.scrollTop=dy},render:function(id,data,type,after){if(id){var cont=this._locateHTML(id);switch(type){case "update":if(!cont)return;var t=this._htmlmap[id]=this._toHTMLObject(data);dhtmlx.html.insertBefore(t,cont);dhtmlx.html.remove(cont);break;default:this._render_delayed();break}}else{if(this.callEvent("onBeforeRender",[this.data])){this._htmlmap={};this._render_visible_rows(null,!0);this._wait_for_render=!1;this.callEvent("onAfterRender",[])}}},_render_delayed:function(){if(this._wait_for_render)return;this._wait_for_render=!0;window.setTimeout(dhtmlx.bind(function(){this.render()},this),1)},_create_placeholder:function(height){var node=document.createElement("DIV");node.style.cssText="height:"+height+"px; width:100%; overflow:hidden;";return node},_render_visible_rows:function(e,reset){this._unrendered_area=[];var viewport=this._getVisibleRange();if(!this._dataobj.firstChild||reset){this._dataobj.innerHTML="";this._dataobj.appendChild(this._create_placeholder(viewport._max));this._htmlrows=[this._dataobj.firstChild]}
var t=viewport._from;while(t<=viewport._height){while(this._htmlrows[t]&&this._htmlrows[t]._filled&&t<=viewport._height){t++}
if(t>viewport._height)break;var holder=t;while(!this._htmlrows[holder])holder--;var holder_row=this._htmlrows[holder];var base=t*viewport._dx+(this.data.min||0);if(base>(this.data.max||Infinity))break;var nextpoint=Math.min(base+viewport._dx-1,(this.data.max||Infinity));var node=this._create_placeholder(viewport._y);var range=this.data.getIndexRange(base,nextpoint);if(!range.length)break;node.innerHTML=range.map(this._toHTML,this).join("");for(var i=0;i<range.length;i++)
this._htmlmap[this.data.idByIndex(base+i)]=node.childNodes[i];var h=parseInt(holder_row.style.height,10);var delta=(t-holder)*viewport._y;var delta2=(h-delta-viewport._y);dhtmlx.html.insertBefore(node,delta?holder_row.nextSibling:holder_row,this._dataobj);this._htmlrows[t]=node;node._filled=!0;if(delta<=0&&delta2>0){holder_row.style.height=delta2+"px";this._htmlrows[t+1]=holder_row}else{if(delta<0)
dhtmlx.html.remove(holder_row);else holder_row.style.height=delta+"px";if(delta2>0){var new_space=this._htmlrows[t+1]=this._create_placeholder(delta2);dhtmlx.html.insertBefore(new_space,node.nextSibling,this._dataobj)}}
t++}
if(this._unrendered_area.length){var from=this.indexById(this._unrendered_area[0]);var to=this.indexById(this._unrendered_area.pop())+1;if(to>from){if(!this.callEvent("onDataRequest",[from,to-from]))return!1;dhtmlx.assert(this.data.feed,"Data feed is missed");this.data.feed.call(this,from,to-from)}}},_getVisibleRange:function(){var top=this._dataobj.scrollTop;var width=Math.max(this._dataobj.scrollWidth,this._dataobj.offsetWidth)-18;var height=this._dataobj.offsetHeight;var t=this.type;var dim=this._getDimension();var dx=Math.floor(width/dim.x)||1;var min=Math.floor(top/dim.y);var dy=Math.ceil((height+top)/dim.y)-1;var count=this.data.max?(this.data.max-this.data.min):this.data.dataCount();var max=Math.ceil(count/dx)*dim.y;return{_from:min,_height:dy,_top:top,_max:max,_y:dim.y,_dx:dx}}};if(dhtmlx.assert_enabled()){dhtmlx.VirtualRenderStack._assert=function(){dhtmlx.assert_method(this,{render:{descr:"render current state of item or whole component",min:"0",args:[["id","html event object",dhtmlx.assert_rule_any,!0],["data","hash of data for rendered item",dhtmlx.assert_rule_object,!0],["type","type of operat",dhtmlx.assert_rule_string,!0],["after","id of relation item",dhtmlx.assert_rule_any,!0]]},show:{descr:"adjust scroll state to show item in question",args:[["id","id of item in question",dhtmlx.assert_rule_any]]}});dhtmlx.assert_event(this,{onDataRequest:{descr:"render found not loaded data and requests loading",start:"position from which data is requsted",count:"how much records need to be loaded"}})}}
dhtmlx.DataStore=function(){this.name="DataStore";dhtmlx.extend(this,dhtmlx.EventSystem);this.setDriver("xml");this.pull={};this.order=dhtmlx.toArray()};dhtmlx.DataStore.prototype={setDriver:function(type){dhtmlx.assert(dhtmlx.DataDriver[type],"incorrect DataDriver");this.driver=dhtmlx.DataDriver[type]},_parse:function(data){var info=this.driver.getInfo(data);var recs=this.driver.getRecords(data);var from=(info._from||0)*1;var j=0;for(var i=0;i<recs.length;i++){var temp=this.driver.getDetails(recs[i]);var id=this.id(temp);if(!this.pull[id]){this.order[j+from]=id;j++}
this.pull[id]=temp}
for(var i=0;i<info._size;i++)
if(!this.order[i]){var id=dhtmlx.uid();var temp={id:id,$template:"loading"};this.pull[id]=temp;this.order[i]=id}
this.callEvent("onStoreLoad",[this.driver,data]);this.refresh()},id:function(data){return data.id||(data.id=dhtmlx.uid())},get:function(id){return this.pull[id]},set:function(id,data){this.pull[id]=data;this.refresh()},refresh:function(id){if(id)
this.callEvent("onStoreUpdated",[id,this.pull[id],"update"]);else this.callEvent("onStoreUpdated",[null,null,null])},getRange:function(from,to){if(!arguments.length){from=this.min||0;to=Math.min((this.max||Infinity),(this.dataCount()-1))}else{from=this.indexById(from);to=this.indexById(to);if(from>to){var a=to;to=from;from=a}}
return this.getIndexRange(from,to)},getIndexRange:function(from,to){to=Math.min(to,this.dataCount()-1);var ret=dhtmlx.toArray();for(var i=from;i<=to;i++)
ret.push(this.get(this.order[i]));return ret},dataCount:function(){return this.order.length},exists:function(id){return!!(this.pull[id])},move:function(sindex,tindex){if(sindex<0||tindex<0){dhtmlx.error("DataStore::move","Incorrect indexes");return}
var id=this.idByIndex(sindex);var obj=this.get(id);this.order.removeAt(sindex);this.order.insertAt(id,Math.min(this.order.length,tindex));this.callEvent("onStoreUpdated",[id,obj,"move"])},add:function(obj,index){var id=this.id(obj);var data_size=this.dataCount();if(dhtmlx.isNotDefined(index)||index<0)
index=data_size;if(index>data_size){dhtmlx.log("Warning","DataStore:add","Index of out of bounds");index=Math.min(this.order.length,index)}
if(!this.callEvent("onbeforeAdd",[id,index]))return;if(this.exists(id))return dhtmlx.error("Not unique ID");this.pull[id]=obj;this.order.insertAt(id,index);if(this._filter_order){var original_index=this._filter_order.length;if(!index&&this.order.length)
original_index=0;this._filter_order.insertAt(id,original_index)}
this.callEvent("onafterAdd",[id,index]);this.callEvent("onStoreUpdated",[id,obj,"add"]);return id},remove:function(id){if(id instanceof Array){for(var i=0;i<id.length;i++)
this.remove(id[i]);return}
if(!this.callEvent("onbeforedelete",[id]))return;if(!this.exists(id))return dhtmlx.error("Not existing ID",id);var obj=this.get(id);this.order.remove(id);if(this._filter_order)
this._filter_order.remove(id);delete this.pull[id];this.callEvent("onafterdelete",[id]);this.callEvent("onStoreUpdated",[id,obj,"delete"])},clearAll:function(){this.pull={};this.order=dhtmlx.toArray();this._filter_order=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(index){if(index>=this.order.length||index<0)
dhtmlx.log("Warning","DataStore::idByIndex Incorrect index");return this.order[index]},indexById:function(id){var res=this.order.find(id);if(!res&&res!==0)
dhtmlx.log("Warning","DataStore::indexById Non-existing ID: "+id);return res},next:function(id,step){return this.order[this.indexById(id)+(step||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(id,step){return this.order[this.indexById(id)-(step||1)]},sort:function(by,dir,as){var sort=by;if(typeof by=="function")
sort={as:by,dir:dir};else if(typeof by=="string")
sort={by:by,dir:dir,as:as};var parameters=[sort.by,sort.dir,sort.as];if(!this.callEvent("onbeforesort",parameters))return;var sorter=dhtmlx.sort.create(sort);var neworder=this.getRange();neworder.sort(sorter);this.order=neworder.map(function(obj){return this.id(obj)},this);this.refresh();this.callEvent("onaftersort",parameters)},filter:function(text,value){if(this._filter_order){this.order=this._filter_order;delete this._filter_order}
if(text){var filter=text;if(typeof text=="string"){text=dhtmlx.Template.setter(0,text);filter=function(obj,value){return text(obj).toLowerCase().indexOf(value)!=-1}}
value=(value||"").toString().toLowerCase();var neworder=dhtmlx.toArray();this.order.each(function(id){if(filter(this.get(id),value))
neworder.push(id)},this);this._filter_order=this.order;this.order=neworder}
this.refresh()},each:function(method,master){for(var i=0;i<this.order.length;i++)
method.call((master||this),this.get(this.order[i]));},provideApi:function(target,eventable){if(eventable){this.mapEvent({onbeforesort:target,onaftersort:target,onbeforeadd:target,onafteradd:target,onbeforedelete:target,onafterdelete:target})}
var list=["sort","add","remove","exists","idByIndex","indexById","get","set","refresh","dataCount","filter","next","previous","clearAll","first","last"];for(var i=0;i<list.length;i++)
target[list[i]]=dhtmlx.methodPush(this,list[i]);if(dhtmlx.assert_enabled())
this.assert_event(target)}};dhtmlx.sort={create:function(config){return dhtmlx.sort.dir(config.dir,dhtmlx.sort.by(config.by,config.as))},as:{"int":function(a,b){a=a*1;b=b*1;return a>b?1:(a<b?-1:0)},"string_strict":function(a,b){a=a.toString();b=b.toString();return a>b?1:(a<b?-1:0)},"string":function(a,b){a=a.toString().toLowerCase();b=b.toString().toLowerCase();return a>b?1:(a<b?-1:0)}},by:function(prop,method){if(typeof method!="function")
method=dhtmlx.sort.as[method||"string"];prop=dhtmlx.Template.setter(0,prop);return function(a,b){return method(prop(a),prop(b))}},dir:function(prop,method){if(prop=="asc")
return method;return function(a,b){return method(a,b)*-1}}};if(dhtmlx.assert_enabled()){dhtmlx.DataStore.prototype._assert=function(){dhtmlx.assert_event(this,{onStoreLoad:{descr:"after data is loaded from external resource",driver:"data driver",data:"raw external data"},onStoreUpdated:{descr:"after data was changed in datastore",id:"if of updated object",obj:"updated object",mode:"updating mode"},onClearAll:{descr:"after datastore was cleared"}});this.assert_event(this)};dhtmlx.DataStore.prototype.assert_event=function(master){dhtmlx.assert_event(master,{onbeforeAdd:{descr:"before adding item to datastore",obj:"data for new item",index:"index, at which new item will be added"},onafterAdd:{descr:"after adding item to datastore",obj:"data for new item",index:"index, at which new item was added"},onbeforeDelete:{descr:"before item deleting",id:"id of item in question"},onafterDelete:{descr:"after item deleting",id:"id of item in question"},onbeforeSort:{descr:"before sorting dataset",by:"template of sort-by field",dir:"direction of sorting",as:"type of sorting"},onafterSort:{descr:"after sorting dataset",by:"template of sort-by field",dir:"direction of sorting",as:"type of sorting"}});dhtmlx.assert_method(master,{sort:{descr:"sort data",min:1,args:[["sortBy","sorting key",dhtmlx.assert_rule_any],["direction","sorting direction",dhtmlx.assert_rule_key({asc:!0,desc:!0}),!0],["sortAs","type of data sorting",dhtmlx.assert_rule_mix(dhtmlx.assert_rule_key({"string":!0,"string_strict":!0,"int":!0}),dhtmlx.assert_rule_function),!0]]},add:{descr:"add new item",min:1,args:[["obj","data object",dhtmlx.assert_rule_object],["index","position, at which item need to be added",dhtmlx.assert_rule_dimension,!0]]},remove:{descr:"add new item",args:[["id","id of item in question",dhtmlx.assert_rule_any]]},exists:{descr:"return {Boolean} true if item with such ID exists",args:[["id","id of item in question",dhtmlx.assert_rule_any]]},idByIndex:{descr:"return {String} ID of item at provided ID",args:[["index","index of item in question",dhtmlx.assert_rule_dimension]]},indexById:{descr:"return {Number} index of item in question",args:[["id","id of item in question",dhtmlx.assert_rule_any]]},get:{descr:"return {Object} hash with properties of item",args:[["id","id of item in question",dhtmlx.assert_rule_any]]},set:{descr:"set new hash of properties for the item",args:[["id","id of item in question",dhtmlx.assert_rule_any],["data","hash of data",dhtmlx.assert_rule_object]]},refresh:{descr:"repaint view",min:"0",args:[["id","repaint only item with provided ID",dhtmlx.assert_rule_any,!0]]},next:{descr:"return {String} ID of item, which is next to current",args:[["id","id of item in question",dhtmlx.assert_rule_any]]},previous:{descr:"return {String} ID of item, which is previous to current",args:[["id","id of item in question",dhtmlx.assert_rule_any]]},first:{descr:"return {String} ID of first item",args:[]},last:{descr:"return {String} ID of last item",args:[]},dataCount:{descr:"return {Number} count of items",args:[]},clearAll:{descr:"remove all items from the component",args:[]},filter:{descr:"sort data",min:1,args:[["filter","filter by  key",dhtmlx.assert_rule_mix(dhtmlx.assert_rule_template,dhtmlx.assert_rule_object)],["value","filter by value",dhtmlx.assert_rule_any,!0]]}})}}
dhtmlx.ajax=function(url,call,master){if(arguments.length!==0){var http_request=new dhtmlx.ajax();if(master)http_request.master=master;http_request.get(url,null,call)}
if(!this.getXHR)return new dhtmlx.ajax();return this};dhtmlx.ajax.prototype={getXHR:function(){if(dhtmlx._isIE)
return new ActiveXObject("Microsoft.xmlHTTP");else return new XMLHttpRequest()},send:function(url,params,call){var x=this.getXHR();if(typeof call=="function")
call=[call];if(typeof params=="object"){var t=[];for(var a in params)
t.push(a+"="+encodeURIComponent(params[a]));params=t.join("&")}
if(params&&!this.post){url=url+(url.indexOf("?")!=-1?"&":"?")+params;params=null}
x.open(this.post?"POST":"GET",url,!this._sync);if(this.post)
x.setRequestHeader('Content-type','application/x-www-form-urlencoded');if(!this._sync){var self=this;x.onreadystatechange=function(){if(!x.readyState||x.readyState==4){dhtmlx.log_full_time("data_loading");if(call&&self)
for(var i=0;i<call.length;i++)
if(call[i])
call[i].call((self.master||self),x.responseText,x.responseXML,x);self.master=null;call=x=self=null}}}
x.send(params||null);return x},get:function(url,params,call){this.post=!1;return this.send(url,params,call)},post:function(url,params,call){this.post=!0;return this.send(url,params,call)},sync:function(){this._sync=!0;return this}};dhtmlx.DataLoader={_init:function(){this.data=new dhtmlx.DataStore()},load:function(url,call){this.callEvent("onXLS",[]);if(typeof call=="string"){this.data.setDriver(call);call=arguments[2]}
if(!this.data.feed)
this.data.feed=function(from,count){if(this._load_count)
return this._load_count=[from,count];else this._load_count=!0;this.load(url+((url.indexOf("?")==-1)?"?":"&")+"posStart="+from+"&count="+count,function(){var temp=this._load_count;this._load_count=!1;if(typeof temp=="object")
this.data.feed.apply(this,temp)})};dhtmlx.ajax(url,[this._onLoad,call],this)},parse:function(data,type){this.callEvent("onXLS",[]);if(type)
this.data.setDriver(type);this._onLoad(data,null)},_onLoad:function(text,xml,loader){this.data._parse(this.data.driver.toObject(text,xml));this.callEvent("onXLE",[])}};dhtmlx.DataDriver={};dhtmlx.DataDriver.json={toObject:function(data){if(typeof data=="string"){eval("dhtmlx.temp="+data);return dhtmlx.temp}
return data},getRecords:function(data){if(data&&!(data instanceof Array))
return[data];return data},getDetails:function(data){return data},getInfo:function(data){return{_size:(data.total_count||0),_from:(data.pos||0)}}};dhtmlx.DataDriver.html={toObject:function(data){if(typeof data=="string"){var t=null;if(data.indexOf("<")==-1)
t=dhtmlx.toNode(data);if(!t){t=document.createElement("DIV");t.innerHTML=data}
return t.getElementsByTagName(this.tag)}
return data},getRecords:function(data){if(data.tagName)
return data.childNodes;return data},getDetails:function(data){return dhtmlx.DataDriver.xml.tagToObject(data)},getInfo:function(data){return{_size:0,_from:0}},tag:"LI"};dhtmlx.DataDriver.jsarray={toObject:function(data){if(typeof data=="string"){eval("dhtmlx.temp="+data);return dhtmlx.temp}
return data},getRecords:function(data){return data},getDetails:function(data){var result={};for(var i=0;i<data.length;i++)
result["data"+i]=data[i];return result},getInfo:function(data){return{_size:0,_from:0}}};dhtmlx.DataDriver.csv={toObject:function(data){return data},getRecords:function(data){return data.split(this.row)},getDetails:function(data){data=this.stringToArray(data);var result={};for(var i=0;i<data.length;i++)
result["data"+i]=data[i];return result},getInfo:function(data){return{_size:0,_from:0}},stringToArray:function(data){data=data.split(this.cell);for(var i=0;i<data.length;i++)
data[i]=data[i].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return data},row:"\n",cell:","};dhtmlx.DataDriver.xml={toObject:function(text,xml){if(xml&&(xml=this.checkResponse(text,xml)))
return xml;if(typeof text=="string"){return this.fromString(text)}
return text},getRecords:function(data){return this.xpath(data,this.records)},records:"/*/item",userdata:"/*/userdata",getDetails:function(data){return this.tagToObject(data,{})},getUserData:function(data,col){col=col||{};var ud=this.xpath(data,this.userdata);for(var i=0;i<ud.length;i++){var udx=this.tagToObject(ud[i]);col[udx.name]=udx.value}
return col},getInfo:function(data){return{_size:(data.documentElement.getAttribute("total_count")||0),_from:(data.documentElement.getAttribute("pos")||0)}},xpath:function(xml,path){if(window.XPathResult){var node=xml;if(xml.nodeName.indexOf("document")==-1)
xml=xml.ownerDocument;var res=[];var col=xml.evaluate(path,node,null,XPathResult.ANY_TYPE,null);var temp=col.iterateNext();while(temp){res.push(temp);temp=col.iterateNext()}
return res}
return xml.selectNodes(path)},tagToObject:function(tag,z){z=z||{};var a=tag.attributes;for(var i=0;i<a.length;i++)
z[a[i].name]=a[i].value;var flag=!1;var b=tag.childNodes;var state={};for(var i=0;i<b.length;i++){if(b[i].nodeType==1){var name=b[i].tagName;if(typeof z[name]!="undefined"){if(!(z[name]instanceof Array))
z[name]=[z[name]];z[name].push(this.tagToObject(b[i],{}))}else z[b[i].tagName]=this.tagToObject(b[i],{});flag=!0}}
if(!a.length&&!flag)
return this.nodeValue(tag);z.value=this.nodeValue(tag);return z},nodeValue:function(node){if(node.firstChild)
return node.firstChild.data;return""},fromString:function(xmlString){if(window.DOMParser)
return(new DOMParser()).parseFromString(xmlString,"text/xml");if(window.ActiveXObject){temp=new ActiveXObject("Microsoft.xmlDOM");temp.loadXML(xmlString);return temp}
dhtmlx.error("Load from xml string is not supported")},checkResponse:function(text,xml){if(xml&&(xml.firstChild&&xml.firstChild.tagName!="parsererror"))
return xml;var a=this.from_string(text.responseText.replace(/^[\s]+/,""));if(a)return a;dhtmlx.error("xml can't be parsed",text.responseText)}};if(dhtmlx.assert_enabled()){dhtmlx.DataLoader._assert=function(){dhtmlx.assert_event(this,{onxls:{descr:"before xml loading start"},onxle:{descr:"after xml loading end"}});dhtmlx.assert_method(this,{load:{descr:"load data from external file",min:1,args:[["url","url to load",dhtmlx.assert_rule_string],["callback","function which will be executed after data loading",dhtmlx.assert_rule_mix(dhtmlx.assert_rule_function,dhtmlx.assert_rule_string),!0],["type","name of loading type",dhtmlx.assert_rule_string,!0]]},parse:{descr:"load data from on-page resource",min:1,args:[["data","reference to data object",dhtmlx.assert_rule_any],["type","name of loading type",dhtmlx.assert_rule_string,!0]]}})}}
if(!dhtmlx.attaches)
dhtmlx.attaches={};dhtmlx.attaches.attachAbstract=function(name,conf){var obj=document.createElement("DIV");obj.id="CustomObject_"+dhtmlx.uid();obj.style.width="100%";obj.style.height="100%";obj.cmp="grid";document.body.appendChild(obj);this.attachObject(obj.id);conf.container=obj.id;var that=this.vs[this.av];that.grid=new window[name](conf);that.gridId=obj.id;that.gridObj=obj;that.grid.setSizes=function(){if(this.resize)this.resize();else this.render()};var method_name="_viewRestore";return this.vs[this[method_name]()].grid};dhtmlx.attaches.attachDataView=function(conf){return this.attachAbstract("dhtmlXDataView",conf)};dhtmlx.attaches.attachChart=function(conf){return this.attachAbstract("dhtmlXChart",conf)};dhtmlx.compat.layout=function(){};dhtmlXDataView=function(container){this.name="DataView";this.version="3.0";if(dhtmlx.assert_enabled())this._assert();dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(container,"dhx_dataview");dhtmlx.extend(this,dhtmlx.DataLoader);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.RenderStack);dhtmlx.extend(this,dhtmlx.SelectionModel);dhtmlx.extend(this,dhtmlx.MouseEvents);dhtmlx.extend(this,dhtmlx.KeyEvents);dhtmlx.extend(this,dhtmlx.EditAbility);dhtmlx.extend(this,dhtmlx.DataMove);dhtmlx.extend(this,dhtmlx.DragItem);dhtmlx.extend(this,dhtmlx.DataProcessor);dhtmlx.extend(this,dhtmlx.AutoTooltip);dhtmlx.extend(this,dhtmlx.Destruction);this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render.apply(this,arguments)},this));this._parseSettings(container,{drag:!1,edit:!1,select:"multiselect",type:"default"});if(this._settings.height!="auto")
dhtmlx.extend(this,dhtmlx.VirtualRenderStack);this.data.provideApi(this,!0)};dhtmlXDataView.prototype={dragMarker:function(context,ev){var el=this._locateHTML(context.target);if(this.type.drag_marker){if(this._drag_marker){this._drag_marker.style.backgroundImage="";this._drag_marker.style.backgroundRepeat=""}
if(el){el.style.backgroundImage="url("+(dhtmlx.image_path||"")+this.type.drag_marker+")";el.style.backgroundRepeat="no-repeat";this._drag_marker=el}}
if(el&&this._settings.auto_scroll){var dy=el.offsetTop;var dh=el.offsetHeight;var py=this._obj.scrollTop;var ph=this._obj.offsetHeight;if(dy-dh>0&&dy-dh*0.75<py)
py=Math.max(dy-dh,0);else if(dy+dh/0.75>py+ph)
py=py+dh;this._obj.scrollTop=py}
return!0},_id:"dhx_f_id",on_click:{dhx_dataview_item:function(e,id){if(this.stopEdit(!1,id)){if(this._settings.select){if(this._settings.select=="multiselect")
this.select(id,e.ctrlKey,e.shiftKey);else this.select(id)}}}},on_dblclick:{dhx_dataview_item:function(e,id){if(this._settings.edit)
this.edit(id)}},on_mouse_move:{},types:{"default":{css:"default",template:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>{obj.text}</div>"),template_edit:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea style='width:100%; height:100%;' bind='obj.text'></textarea></div>"),template_loading:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...</div>"),width:210,height:115,margin:0,padding:10,border:1}},template_item_start:dhtmlx.Template.fromHTML("<div dhx_f_id='{-obj.id}' class='dhx_dataview_item dhx_dataview_{obj.css}_item{-obj.$selected?_selected:}' style='width:{obj.width}px; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; float:left; overflow:hidden;'>"),template_item_end:dhtmlx.Template.fromHTML("</div>")};dhtmlx.compat("layout");if(dhtmlx.assert_enabled()){dhtmlXDataView.prototype._assert=function(){dhtmlx.assert_property(this,{auto_scroll:["Auto scroll view dureing drag-n-drop",dhtmlx.assert_rule_boolean]})}};dhtmlXDataView.prototype.types.ficon={css:"ficon",template:dhtmlx.Template.fromHTML("<div align='center'><img onmousedown='return false;' border='0' src='{common.image()}'><div class='dhx_item_text'>{obj.name}</div>"+"<div class='dhx_item_text_small'>{common.size()}</div></div>"),template_edit:dhtmlx.Template.fromHTML("<div align='center'><img onmousedown='return false;' border='0' src='{common.image()}'><input class='dhx_item_editor' bind='obj.name'></div>"),template_loading:dhtmlx.Template.fromHTML(""),width:100,height:110,margin:1,padding:0,drag_marker:"dnd_selector_cells.png",icons_src_dir:"./",image:function(obj){return this.icons_src_dir+"/"+obj.type+".png"},size:function(obj){return obj.size?obj.size:''},text:function(obj){return obj.name.split(".")[0]}};dhtmlXDataView.prototype.types.ftiles={css:"ftiles",template:dhtmlx.Template.fromHTML("<img onmousedown='return false;' style='width:48px; float: left;' border='0' src='{common.image()}'><div style='margin-top: 10px;' class='dhx_item_text'>{common.text()}</div><div class='dhx_item_text_gray'>{common.size()}</div>"),template_edit:dhtmlx.Template.fromHTML("<img onmousedown='return false;' style='width:48px; float: left;' border='0' src='{common.image()}'><textarea class='dhx_item_editor' bind='obj.name'></textarea></div>"),template_loading:dhtmlx.Template.fromHTML(""),width:140,height:58,margin:1,padding:4,drag_marker:"dnd_selector_cells.png",icons_src_dir:"./",image:function(obj){return this.icons_src_dir+"/"+obj.type+".png"},size:function(obj){return obj.size?obj.size:''},text:function(obj){return obj.name.split(".")[0]}};dhtmlXDataView.prototype.types.ftable={css:"ftable",template:dhtmlx.Template.fromHTML("<div style='float: left; width: 70px;'><img onmousedown='return false;' border='0' src='{common.image()}'></div><div style='float: left; padding:18px 0px 0px 0px;  width: 45%; overflow:hidden;' class='dhx_item_text'><span style='padding 0px 2px 0px 2px;'>{obj.name}</span></div><div style='float: left; width: 60px; text-align: right;' class='dhx_item_text'>{common.size()}</div><div style='float: left; width: 130px; padding-left: 10px;' class='dhx_item_text'>{common.date()}</div>"),template_edit:dhtmlx.Template.fromHTML("<div style='float: left; width: 17px;'><img onmousedown='return false;' border='0' src='{common.image()}'></div><div style='float: left; width: 115px;' class='dhx_item_text'><span style='padding-left: 2px; padding-right: 2px;'><input type='text' style='width:100%; height:100%;' bind='obj.name'></span></div><div style='float: left; width: 60px; text-align: right;' class='dhx_item_text'>{common.size()}</div><div style='float: left; width: 130px; padding-left: 10px;' class='dhx_item_text'>{common.date()}</div>"),template_loading:dhtmlx.Template.fromHTML(""),width:800,height:55,margin:1,padding:0,drag_marker:"dnd_selector_lines.png",icons_src_dir:"./",image:function(obj){return this.icons_src_dir+"/"+obj.type+".png"},size:function(obj){return obj.size?obj.size:''},text:function(obj){return obj.name.split(".")[0]},date:function(obj){return obj.mod}};dhtmlXDataView.prototype.types.fthumbs={css:"fthumbs",template:dhtmlx.Template.fromHTML("<div align='center'><img border='0' width='50px' src='{common.image()}'><div class='dhx_item_text'><span style='font-size:9px'>{common.text()}</span></div></div>"),width:85,height:85,margin:15,padding:4,image_types:['png','jpg','gif','jpeg'],thumbs_creator_url:"./",photos_rel_dir:"./",image:function(obj){if(this.image_types.indexOf(obj.type)!=-1){return obj.fullpath}else{return this.icons_src_dir+"/"+obj.type+".png"}},text:function(obj){return obj.name.split(".")[0]}};dhtmlXDataView.prototype.types.fdatalistitem={css:"fdatalistitem",template:dhtmlx.Template.fromHTML("<span class='pull-right'> <a class='remove' href='#'><i class='fa fa-times icon-muted fa-fw'></i></a> </span> <div class='clear'>{common.sid()} | {common.text()} </div>"),template_edit:dhtmlx.Template.fromHTML("<div style='float: left; width: 17px;'><img onmousedown='return false;' border='0' src='{common.image()}'></div><div style='float: left; width: 115px;' class='dhx_item_text'><span style='padding-left: 2px; padding-right: 2px;'><input type='text' style='width:100%; height:100%;' bind='obj.name'></span></div><div style='float: left; width: 60px; text-align: right;' class='dhx_item_text'>{common.size()}</div><div style='float: left; width: 130px; padding-left: 10px;' class='dhx_item_text'>{common.date()}</div>"),template_loading:dhtmlx.Template.fromHTML(""),width:800,height:55,margin:1,padding:0,drag_marker:"dnd_selector_lines.png",icons_src_dir:"./",image:function(obj){},sid:function(obj){return obj.sid},text:function(obj){return obj.name},}